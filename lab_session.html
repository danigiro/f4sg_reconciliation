<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Daniele Girolimetto">
<meta name="dcterms.date" content="2022-03-31">
<title>Forecast Reconciliation for Hierarchically Organized Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="lab_session_files/libs/clipboard/clipboard.min.js"></script>
<script src="lab_session_files/libs/quarto-html/quarto.js"></script>
<script src="lab_session_files/libs/quarto-html/popper.min.js"></script>
<script src="lab_session_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="lab_session_files/libs/quarto-html/anchor.min.js"></script>
<link href="lab_session_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lab_session_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="lab_session_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="lab_session_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="lab_session_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="lab_session_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="lab_session_files/libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script src="lab_session_files/libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><script src="lab_session_files/libs/plotly-binding-4.10.1/plotly.js"></script><script src="lab_session_files/libs/typedarray-0.1/typedarray.min.js"></script><script src="lab_session_files/libs/jquery-3.5.1/jquery.min.js"></script><link href="lab_session_files/libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="lab_session_files/libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="lab_session_files/libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="lab_session_files/libs/plotly-main-2.11.1/plotly-latest.min.js"></script><script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script><script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script><script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">
</head>
<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#library" id="toc-library" class="nav-link" data-scroll-target="#library">Library</a></li>
  <li><a href="#the-data" id="toc-the-data" class="nav-link" data-scroll-target="#the-data">The data</a></li>
  <li>
<a href="#reconciliation" id="toc-reconciliation" class="nav-link" data-scroll-target="#reconciliation">Reconciliation</a>
  <ul class="collapse">
<li><a href="#cross-sectional-forecast-reconciliation" id="toc-cross-sectional-forecast-reconciliation" class="nav-link" data-scroll-target="#cross-sectional-forecast-reconciliation">Cross-sectional forecast reconciliation</a></li>
  <li><a href="#temporal-forecast-reconciliation" id="toc-temporal-forecast-reconciliation" class="nav-link" data-scroll-target="#temporal-forecast-reconciliation">Temporal forecast reconciliation</a></li>
  <li><a href="#cross-temporal-forecast-reconciliation" id="toc-cross-temporal-forecast-reconciliation" class="nav-link" data-scroll-target="#cross-temporal-forecast-reconciliation">Cross-temporal forecast reconciliation</a></li>
  </ul>
</li>
  <li>
<a href="#practical-challenges" id="toc-practical-challenges" class="nav-link" data-scroll-target="#practical-challenges">Practical challenges</a>
  <ul class="collapse">
<li><a href="#non-negativity-issues" id="toc-non-negativity-issues" class="nav-link" data-scroll-target="#non-negativity-issues">Non negativity issues</a></li>
  <li><a href="#a-priori-constrained-immutable-forecasts" id="toc-a-priori-constrained-immutable-forecasts" class="nav-link" data-scroll-target="#a-priori-constrained-immutable-forecasts">A priori constrained (immutable) forecasts</a></li>
  <li><a href="#exploring-a-subset-of-temporal-aggregation-orders" id="toc-exploring-a-subset-of-temporal-aggregation-orders" class="nav-link" data-scroll-target="#exploring-a-subset-of-temporal-aggregation-orders">Exploring a subset of temporal aggregation orders</a></li>
  </ul>
</li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></nav>
</div>
<main class="content" id="quarto-document-content"><header id="title-block-header"><h1 class="title display-7"><b>Forecast Reconciliation for Hierarchically Organized Data</b></h1>

<p class="author"><b>Daniele Girolimetto</b></p>
<a class="author_email" href="mailto:#" style="font-size: 10pt;">daniele.girolimetto@phd.unipd.it</a>

<p class="affiliation" style="font-size: 10pt;">
   
  Department of Statistical Sciences, University of Padova (Italy)
  </p>



<p class="date">March 31, 2022</p>
</header><section id="introduction" class="level2"><h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>In this lab, we will analyze the SPDIS dataset, which consists of 324 hourly time series data of photovoltaic power generation. Our main goal is to reconcile the base forecasts, which are currently neither cross-sectionally (e.g., spatially) nor temporally coherent.</p>
<p>Lab session is organized in two main parts:</p>
<ol type="1">
<li><p><strong>Core lab</strong>: data organization, <code>FoReco</code> functions, visual evaluation of the results</p></li>
<li><p><strong>Practical challenges</strong>: non negativity issues, a priori constraints, subset of temporal aggregation orders</p></li>
</ol></section><section id="library" class="level2"><h2 class="anchored" data-anchor-id="library">Library</h2>
<p>The required libraries are <a href="https://CRAN.R-project.org/package=plotly">plotly</a>, <a href="https://CRAN.R-project.org/package=gridExtra">gridExtra</a>, <a href="https://CRAN.R-project.org/package=scales">scales</a>, and <a href="https://CRAN.R-project.org/package=tidyverse">tidyverse</a> (specifically <a href="https://CRAN.R-project.org/package=ggplot2">ggplot2</a>) to create graphs and tables. For reconciliation, we will use <a href="https://CRAN.R-project.org/package=FoReco">FoReco</a>.</p>
<div class="cell" data-hash="lab_session_cache/html/library_cb7f5e9bd9e2453ec47ec41bb4177504">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(FoReco)     <span class="co"># For reconciliation</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(tidyverse)  <span class="co"># Plot and analysis</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(plotly)     <span class="co"># Interactive plot</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">source</span>(<span class="st">"script/fun.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="the-data" class="level2"><h2 class="anchored" data-anchor-id="the-data">The data</h2>
<p>We consider the <strong>S</strong>olar <strong>P</strong>ower <strong>D</strong>ata for <strong>I</strong>ntegration <strong>S</strong>tudies dataset (<strong>SPDIS</strong>) firstly introduced by Yang et al.&nbsp;(2017) (<em>Reconciling solar forecasts: Geographical hierarchy, Solar Energy</em>).</p>
<p>It refers to 318 simulated PV plants in California for the 2006, whose hourly irradiation data are organized in three levels (<span class="math inline">n=324</span>, <span class="math inline">n_b=318</span>, <span class="math inline">n_a=6</span>):</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/SPDIS_hier.png" class="img-fluid figure-img"></p>
</figure>
</div>
<ul>
<li><p><span class="math inline">\mathcal{L}_0</span>: 1 time series for the Independent System Operator (ISO), given by the sum of the 318 plant series;</p></li>
<li><p><span class="math inline">\mathcal{L}_1</span>: 5 time series for the Transmission Zones (TZ), each given by the sum of 27, 73, 101, 86, and 31 plants, respectively;</p></li>
</ul>
<div class="cell" data-hash="lab_session_cache/html/california_plot_37142858b59de9897f48977d166bdf64">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">load</span>(<span class="st">"./data/pre_analysis.RData"</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a>states <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="st">"state"</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a>ca_df <span class="ot">&lt;-</span> <span class="fu">subset</span>(states, region <span class="sc">==</span> <span class="st">"california"</span>)</span>
<span id="cb2-4"><a href="#cb2-4"></a>counties <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="st">"county"</span>)</span>
<span id="cb2-5"><a href="#cb2-5"></a>ca_county <span class="ot">&lt;-</span> <span class="fu">subset</span>(counties, region <span class="sc">==</span> <span class="st">"california"</span>)</span>
<span id="cb2-6"><a href="#cb2-6"></a>pre_analysis <span class="ot">&lt;-</span> pre_analysis <span class="sc">|&gt;</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>  <span class="fu">mutate</span>(<span class="at">geo =</span> <span class="fu">recode</span>(geo, <span class="st">"X01"</span> <span class="ot">=</span> <span class="st">"TZ1"</span>, <span class="st">"X02"</span> <span class="ot">=</span> <span class="st">"TZ2"</span>, </span>
<span id="cb2-8"><a href="#cb2-8"></a>                      <span class="st">"X03"</span> <span class="ot">=</span> <span class="st">"TZ3"</span>, <span class="st">"X04"</span> <span class="ot">=</span> <span class="st">"TZ4"</span>, <span class="st">"X05"</span> <span class="ot">=</span> <span class="st">"TZ5"</span>))</span>
<span id="cb2-9"><a href="#cb2-9"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> ca_df, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span> </span>
<span id="cb2-10"><a href="#cb2-10"></a>  <span class="fu">coord_fixed</span>(<span class="fl">1.3</span>) <span class="sc">+</span> </span>
<span id="cb2-11"><a href="#cb2-11"></a>  <span class="fu">geom_polygon</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fill =</span> <span class="st">"gray"</span>)<span class="sc">+</span></span>
<span id="cb2-12"><a href="#cb2-12"></a>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> ca_county, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb2-13"><a href="#cb2-13"></a>  <span class="fu">geom_polygon</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fill =</span> <span class="cn">NA</span>)<span class="sc">+</span> </span>
<span id="cb2-14"><a href="#cb2-14"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">as.numeric</span>(Latitude), <span class="at">x =</span> <span class="fu">as.numeric</span>(Longitude), <span class="at">group =</span> <span class="dv">1</span>,</span>
<span id="cb2-15"><a href="#cb2-15"></a>                 <span class="at">size =</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">"([0-9]+).*$"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">1"</span>,CapacityMW))), </span>
<span id="cb2-16"><a href="#cb2-16"></a>             <span class="at">data =</span> pre_analysis,</span>
<span id="cb2-17"><a href="#cb2-17"></a>             <span class="at">alpha =</span> <span class="fl">0.25</span>)<span class="sc">+</span> </span>
<span id="cb2-18"><a href="#cb2-18"></a>  <span class="fu">guides</span>(<span class="at">size=</span><span class="fu">guide_legend</span>(<span class="at">title=</span><span class="st">"Size in MW"</span>))<span class="sc">+</span></span>
<span id="cb2-19"><a href="#cb2-19"></a>  <span class="fu">ylab</span>(<span class="st">"Latitude (°)"</span>)<span class="sc">+</span></span>
<span id="cb2-20"><a href="#cb2-20"></a>  <span class="fu">xlab</span>(<span class="st">"Longitude (°)"</span>)<span class="sc">+</span></span>
<span id="cb2-21"><a href="#cb2-21"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb2-22"><a href="#cb2-22"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="fu">c</span>(.<span class="dv">825</span>,.<span class="dv">825</span>),</span>
<span id="cb2-23"><a href="#cb2-23"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">"white"</span>),</span>
<span id="cb2-24"><a href="#cb2-24"></a>        <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>))</span>
<span id="cb2-25"><a href="#cb2-25"></a></span>
<span id="cb2-26"><a href="#cb2-26"></a></span>
<span id="cb2-27"><a href="#cb2-27"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> ca_df, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span> </span>
<span id="cb2-28"><a href="#cb2-28"></a>  <span class="fu">coord_fixed</span>(<span class="fl">1.3</span>) <span class="sc">+</span> </span>
<span id="cb2-29"><a href="#cb2-29"></a>  <span class="fu">geom_polygon</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fill =</span> <span class="st">"gray"</span>)<span class="sc">+</span></span>
<span id="cb2-30"><a href="#cb2-30"></a>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> ca_county, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb2-31"><a href="#cb2-31"></a>  <span class="fu">geom_polygon</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fill =</span> <span class="cn">NA</span>)<span class="sc">+</span> </span>
<span id="cb2-32"><a href="#cb2-32"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">as.numeric</span>(Latitude), <span class="at">x =</span> <span class="fu">as.numeric</span>(Longitude), <span class="at">group =</span> <span class="dv">1</span>,</span>
<span id="cb2-33"><a href="#cb2-33"></a>                 <span class="at">shape =</span> geo, <span class="at">col =</span> geo), </span>
<span id="cb2-34"><a href="#cb2-34"></a>             <span class="at">data =</span> pre_analysis)<span class="sc">+</span></span>
<span id="cb2-35"><a href="#cb2-35"></a>  <span class="fu">guides</span>(<span class="at">shape=</span><span class="fu">guide_legend</span>(<span class="at">title=</span><span class="st">"Groups"</span>),</span>
<span id="cb2-36"><a href="#cb2-36"></a>         <span class="at">col=</span><span class="fu">guide_legend</span>(<span class="at">title=</span><span class="st">"Groups"</span>))<span class="sc">+</span></span>
<span id="cb2-37"><a href="#cb2-37"></a>  <span class="fu">ylab</span>(<span class="st">"Latitude (°)"</span>)<span class="sc">+</span></span>
<span id="cb2-38"><a href="#cb2-38"></a>  <span class="fu">xlab</span>(<span class="st">"Longitude (°)"</span>)<span class="sc">+</span></span>
<span id="cb2-39"><a href="#cb2-39"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb2-40"><a href="#cb2-40"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="fu">c</span>(.<span class="dv">825</span>,.<span class="dv">79</span>),</span>
<span id="cb2-41"><a href="#cb2-41"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">"white"</span>),</span>
<span id="cb2-42"><a href="#cb2-42"></a>        <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>))</span>
<span id="cb2-43"><a href="#cb2-43"></a></span>
<span id="cb2-44"><a href="#cb2-44"></a>gridExtra<span class="sc">::</span><span class="fu">grid.arrange</span>(p1, p2, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="lab_session_files/figure-html/california_plot-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>
<span class="math inline">\mathcal{L}_2</span>: 318 bottom time series at plant level (P).</li>
</ul>
<div class="cell" data-hash="lab_session_cache/html/cs_info_de5a862b80e0a76ce815fa3feb7247e3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># Information about the reconciliation structure</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>level1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">27</span>, <span class="dv">73</span>, <span class="dv">101</span>, <span class="dv">86</span>, <span class="dv">31</span>) <span class="co"># L1 division of the bts</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co"># Cross-sectional (contemporaneous) matrix, (na x nb)</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>C <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="dv">1</span>, <span class="co"># L0 is the total</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>          Matrix<span class="sc">::</span><span class="fu">bdiag</span>(<span class="fu">lapply</span>(level1, <span class="cf">function</span>(x) <span class="fu">t</span>(<span class="fu">rep</span>(<span class="dv">1</span>, x)))))</span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="co"># List with all the cross-sectional information</span></span>
<span id="cb3-7"><a href="#cb3-7"></a>cs_info <span class="ot">&lt;-</span> FoReco<span class="sc">::</span><span class="fu">hts_tools</span>(<span class="at">C =</span> C, <span class="at">sparse =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="fu">dim</span>(cs_info<span class="sc">$</span>C) <span class="co"># cs_info$n, cs_info$nb, cs_info$na</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#&gt; [1]   6 318</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The hourly time series can be (non-overlapping) aggregated at 2, 3, 4, 6, 12, and 24-hour intervals within a day (daily cycle, <span class="math inline">m=24</span> and <span class="math inline">\mathcal{K} = \{24,12,8,6,4,3,2,1\}</span>).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/thf_hier.png" class="img-fluid figure-img"></p>
</figure>
</div>
<p>The forecasts are generated for 2 days with a 14-day training period. Therefore, for the hourly series, we have 48 forecast (1- to 48-step ahead), and so on up to the daily series with two daily forecasts, respectively 1- and 2- day ahead.</p>
<div class="cell" data-hash="lab_session_cache/html/te_info_a980bf7558f727c3d72289cb5ff7a430">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>m <span class="ot">&lt;-</span> <span class="dv">24</span> <span class="co"># Highest available sampling frequency per seasonal cycle</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>H <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="co"># Forecast horizon (daily level)</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co"># List with all the temporal information</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>te_info <span class="ot">&lt;-</span> FoReco<span class="sc">::</span><span class="fu">thf_tools</span>(<span class="at">m =</span> <span class="dv">24</span>, <span class="at">h =</span> H)</span>
<span id="cb4-5"><a href="#cb4-5"></a>te_info<span class="sc">$</span>kset</span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co">#&gt; [1] 24 12  8  6  4  3  2  1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Suppose we wish to predict the PV power generation at the end of May 16th, 2006 for the upcoming two days, utilizing the previous two weeks as training data.</p>
<div class="cell" data-hash="lab_session_cache/html/training_series_2cb319d5d105eff878b2ca4400d7e048">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">load</span>(<span class="st">"data/train.RData"</span>)</span>
<span id="cb5-2"><a href="#cb5-2"></a>Total <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(train)</span>
<span id="cb5-3"><a href="#cb5-3"></a>P17 <span class="ot">&lt;-</span> train<span class="sc">$</span><span class="st">`</span><span class="at">01|045</span><span class="st">`</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="fu">plot_agg_time</span>(P17, <span class="at">title =</span> <span class="fu">expression</span>(<span class="st">"P"</span>[<span class="dv">17</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="lab_session_files/figure-html/training_series-1.png" class="img-fluid" width="672"></p>
</div>
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">plot_agg_time</span>(Total, <span class="at">title =</span> <span class="st">"Total"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="lab_session_files/figure-html/training_series-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Our objective is to reconcile forecasts, which is a post-forecasting process that involves transforming<br>
a set of incoherent forecasts into coherent forecasts which satisfy a given set of linear constraints. In this example we use the following base forecasts:</p>
<ul>
<li><p>Numerical Weather Prediction (NWP) forecasts (3TIER, 2010) for the 318 hourly time series at the plant level (<span class="math inline">\mathcal{L}_2</span>).</p></li>
<li><p>Automatic ETS forecasts using the R-package <code>forecast</code> (Hyndman et al., 2022) for all the remaining time series (6 hourly ts and 324 ts at greater temporal aggregation order).</p></li>
</ul>
<p>Load the forecasts, residuals, and actual observations for May 17<sup>th</sup> and 18<sup>th</sup>.</p>
<div class="cell" data-hash="lab_session_cache/html/load_data_642ac12b99b92d302d694ca8fc67611f">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">load</span>(<span class="st">"./data/data_17_18_5.RData"</span>)</span>
<span id="cb7-2"><a href="#cb7-2"></a>starting_time <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="st">"2006-05-17 00:00:00"</span>, <span class="at">tz=</span><span class="st">"UTC"</span>)</span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="fu">print_list_matrix</span>(base) <span class="co"># Base forecasts</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="co">#&gt;     k24 k12  k8  k6  k4  k3  k2  k1</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co">#&gt; row   2   4   6   8  12  16  24  48</span></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="co">#&gt; col 324 324 324 324 324 324 324 324</span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="fu">dim</span>(hourly_obs)         <span class="co"># Actual values</span></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="co">#&gt; [1]  48 324</span></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="fu">print_list_matrix</span>(res)  <span class="co"># In-sample residuals</span></span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="co">#&gt;     k24 k12  k8  k6  k4  k3  k2  k1</span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="co">#&gt; row  14  28  42  56  84 112 168 336</span></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="co">#&gt; col 324 324 324 324 324 324 324 324</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="reconciliation" class="level2"><h2 class="anchored" data-anchor-id="reconciliation">Reconciliation</h2>
<section id="cross-sectional-forecast-reconciliation" class="level3"><h3 class="anchored" data-anchor-id="cross-sectional-forecast-reconciliation">Cross-sectional forecast reconciliation</h3>
<p>Let’s start by looking at the hourly forecasts and their corresponding residuals.</p>
<div class="cell" data-hash="lab_session_cache/html/base_cs_6a87b103ea8910c33ff755105367c393">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>base_cs <span class="ot">&lt;-</span> base<span class="sc">$</span>k1     <span class="co"># base forecasts</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="fu">str</span>(<span class="fu">unname</span>(base_cs))</span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="co">#&gt;  num [1:48, 1:324] -0.0797 -0.3017 -0.4208 -0.3808 -0.3767 ...</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>res_cs <span class="ot">&lt;-</span> res<span class="sc">$</span>k1       <span class="co"># residuals</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="fu">str</span>(<span class="fu">unname</span>(res_cs))</span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co">#&gt;  num [1:336, 1:324] 4.31459 0.22634 0.11919 -0.04014 -0.00407 ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Our objective is to generate reconciled forecasts using the <em>shr</em> approach (<code>comb = "shr"</code>), which involves shrinking the sample covariance matrix (more details in the <code>FoReco</code> documentation).</p>
<div class="cell" data-hash="lab_session_cache/html/reco_cs_a94d173f6c23ec729714197bebf30a71">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>reco_cs <span class="ot">&lt;-</span> <span class="fu">htsrec</span>(<span class="at">basef =</span> base_cs,  <span class="co"># base forecasts</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>                  <span class="at">C =</span> C,            <span class="co"># aggregation matrix</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>                  <span class="co">#Ut = cs_info$Ut, # zero constraints matrix</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>                  <span class="at">comb =</span> <span class="st">"shr"</span>,     <span class="co"># covariance matrix approx</span></span>
<span id="cb9-5"><a href="#cb9-5"></a>                  <span class="at">res =</span> res_cs,     <span class="co"># residuals</span></span>
<span id="cb9-6"><a href="#cb9-6"></a>                  <span class="co">#type = "S",      # reconciliation formula</span></span>
<span id="cb9-7"><a href="#cb9-7"></a>                  <span class="at">keep =</span> <span class="st">"recf"</span>)    <span class="co"># output option</span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="fu">str</span>(<span class="fu">unname</span>(reco_cs))</span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="co">#&gt;  num [1:48, 1:324] 0.2818 0.0128 -0.14 -0.0708 -0.2876 ...</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="co">#cs_info$Ut[, 1:10]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To verify that the forecasts have been reconciled, we can check that all constraints have been satisfied.</p>
<div class="cell" data-hash="lab_session_cache/html/check_cs_a88d840c6f4641f59046350d32859913">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">all</span>(<span class="fu">abs</span>(cs_info<span class="sc">$</span>Ut<span class="sc">%*%</span><span class="fu">t</span>(reco_cs)) <span class="sc">&lt;</span> <span class="fu">sqrt</span>(.Machine<span class="sc">$</span>double.eps))</span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="co">#&gt; [1] TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finally, we can plot these series. For example, if we take the series <span class="math inline">\mathrm{P}_{17}</span> (label <code>01_045</code>), we have:</p>
<div class="cell" data-hash="lab_session_cache/html/plot_cs_a7aa4b88f41fe1f8ffdcf21b1ea13334">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>id_serie <span class="ot">&lt;-</span> <span class="st">"01_045"</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>data_cs <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">ocs =</span> reco_cs[,id_serie],</span>
<span id="cb11-3"><a href="#cb11-3"></a>                  <span class="at">base =</span> base_cs[,id_serie],</span>
<span id="cb11-4"><a href="#cb11-4"></a>                  <span class="at">obs =</span> hourly_obs[,id_serie],</span>
<span id="cb11-5"><a href="#cb11-5"></a>                  <span class="at">time =</span> <span class="fu">seq</span>(<span class="at">from =</span> starting_time, <span class="at">by =</span> <span class="st">"hour"</span>, </span>
<span id="cb11-6"><a href="#cb11-6"></a>                             <span class="at">length.out =</span> <span class="dv">48</span>))</span>
<span id="cb11-7"><a href="#cb11-7"></a>plot_cs <span class="ot">&lt;-</span> data_cs <span class="sc">|&gt;</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>time, <span class="at">names_to =</span> <span class="st">"Approach"</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-9"><a href="#cb11-9"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">col =</span> Approach, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb11-10"><a href="#cb11-10"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb11-11"><a href="#cb11-11"></a>  <span class="fu">scale_x_datetime</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_date</span>(<span class="st">"%I:%M %p</span><span class="sc">\n</span><span class="st">%d/%m"</span>),</span>
<span id="cb11-12"><a href="#cb11-12"></a>                   <span class="at">breaks =</span> <span class="fu">seq</span>(starting_time, <span class="at">by =</span> <span class="st">"6 hours"</span>, <span class="at">length.out =</span> <span class="dv">49</span><span class="sc">/</span><span class="dv">6</span>)) <span class="sc">+</span></span>
<span id="cb11-13"><a href="#cb11-13"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb11-14"><a href="#cb11-14"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb11-15"><a href="#cb11-15"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span>
<span id="cb11-16"><a href="#cb11-16"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(plot_cs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-dbb69a67400c6a8c81d7" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-dbb69a67400c6a8c81d7">{"x":{"data":[{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0,0,0,0,0,0.036,0.193,0.354,0.501,0.591,0.653,0.666,0.642,0.574,0.477,0.326,0.151,0.016,0,0,0,0,0,0,0,0,0,0,0,0.033,0.191,0.371,0.523,0.626,0.693,0.707,0.683,0.607,0.488,0.337,0.155,0.017,0,0,0,0,0,0],"text":["time: 2006-05-17 00:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-17 01:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-17 02:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-17 03:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-17 04:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-17 05:00:00<br />value: 0.0360000000<br />Approach: base","time: 2006-05-17 06:00:00<br />value: 0.1930000000<br />Approach: base","time: 2006-05-17 07:00:00<br />value: 0.3540000000<br />Approach: base","time: 2006-05-17 08:00:00<br />value: 0.5010000000<br />Approach: base","time: 2006-05-17 09:00:00<br />value: 0.5910000000<br />Approach: base","time: 2006-05-17 10:00:00<br />value: 0.6530000000<br />Approach: base","time: 2006-05-17 11:00:00<br />value: 0.6660000000<br />Approach: base","time: 2006-05-17 12:00:00<br />value: 0.6420000000<br />Approach: base","time: 2006-05-17 13:00:00<br />value: 0.5740000000<br />Approach: base","time: 2006-05-17 14:00:00<br />value: 0.4770000000<br />Approach: base","time: 2006-05-17 15:00:00<br />value: 0.3260000000<br />Approach: base","time: 2006-05-17 16:00:00<br />value: 0.1510000000<br />Approach: base","time: 2006-05-17 17:00:00<br />value: 0.0160000000<br />Approach: base","time: 2006-05-17 18:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-17 19:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-17 20:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-17 21:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-17 22:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-17 23:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-18 00:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-18 01:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-18 02:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-18 03:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-18 04:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-18 05:00:00<br />value: 0.0330000000<br />Approach: base","time: 2006-05-18 06:00:00<br />value: 0.1910000000<br />Approach: base","time: 2006-05-18 07:00:00<br />value: 0.3710000000<br />Approach: base","time: 2006-05-18 08:00:00<br />value: 0.5230000000<br />Approach: base","time: 2006-05-18 09:00:00<br />value: 0.6260000000<br />Approach: base","time: 2006-05-18 10:00:00<br />value: 0.6930000000<br />Approach: base","time: 2006-05-18 11:00:00<br />value: 0.7070000000<br />Approach: base","time: 2006-05-18 12:00:00<br />value: 0.6830000000<br />Approach: base","time: 2006-05-18 13:00:00<br />value: 0.6070000000<br />Approach: base","time: 2006-05-18 14:00:00<br />value: 0.4880000000<br />Approach: base","time: 2006-05-18 15:00:00<br />value: 0.3370000000<br />Approach: base","time: 2006-05-18 16:00:00<br />value: 0.1550000000<br />Approach: base","time: 2006-05-18 17:00:00<br />value: 0.0170000000<br />Approach: base","time: 2006-05-18 18:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-18 19:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-18 20:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-18 21:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-18 22:00:00<br />value: 0.0000000000<br />Approach: base","time: 2006-05-18 23:00:00<br />value: 0.0000000000<br />Approach: base"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"base","legendgroup":"base","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0,0,0,0,0,0.011,0.156,0.27,0.432,0.57,0.634,0.672,0.662,0.55,0.45,0.332,0.152,0.02,0,0,0,0,0,0,0,0,0,0,0,0.006,0.159,0.354,0.493,0.591,0.67,0.688,0.66,0.596,0.49,0.373,0.188,0.018,0,0,0,0,0,0],"text":["time: 2006-05-17 00:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-17 01:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-17 02:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-17 03:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-17 04:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-17 05:00:00<br />value: 0.0110000000<br />Approach: obs","time: 2006-05-17 06:00:00<br />value: 0.1560000000<br />Approach: obs","time: 2006-05-17 07:00:00<br />value: 0.2700000000<br />Approach: obs","time: 2006-05-17 08:00:00<br />value: 0.4320000000<br />Approach: obs","time: 2006-05-17 09:00:00<br />value: 0.5700000000<br />Approach: obs","time: 2006-05-17 10:00:00<br />value: 0.6340000000<br />Approach: obs","time: 2006-05-17 11:00:00<br />value: 0.6720000000<br />Approach: obs","time: 2006-05-17 12:00:00<br />value: 0.6620000000<br />Approach: obs","time: 2006-05-17 13:00:00<br />value: 0.5500000000<br />Approach: obs","time: 2006-05-17 14:00:00<br />value: 0.4500000000<br />Approach: obs","time: 2006-05-17 15:00:00<br />value: 0.3320000000<br />Approach: obs","time: 2006-05-17 16:00:00<br />value: 0.1520000000<br />Approach: obs","time: 2006-05-17 17:00:00<br />value: 0.0200000000<br />Approach: obs","time: 2006-05-17 18:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-17 19:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-17 20:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-17 21:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-17 22:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-17 23:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-18 00:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-18 01:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-18 02:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-18 03:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-18 04:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-18 05:00:00<br />value: 0.0060000000<br />Approach: obs","time: 2006-05-18 06:00:00<br />value: 0.1590000000<br />Approach: obs","time: 2006-05-18 07:00:00<br />value: 0.3540000000<br />Approach: obs","time: 2006-05-18 08:00:00<br />value: 0.4930000000<br />Approach: obs","time: 2006-05-18 09:00:00<br />value: 0.5910000000<br />Approach: obs","time: 2006-05-18 10:00:00<br />value: 0.6700000000<br />Approach: obs","time: 2006-05-18 11:00:00<br />value: 0.6880000000<br />Approach: obs","time: 2006-05-18 12:00:00<br />value: 0.6600000000<br />Approach: obs","time: 2006-05-18 13:00:00<br />value: 0.5960000000<br />Approach: obs","time: 2006-05-18 14:00:00<br />value: 0.4900000000<br />Approach: obs","time: 2006-05-18 15:00:00<br />value: 0.3730000000<br />Approach: obs","time: 2006-05-18 16:00:00<br />value: 0.1880000000<br />Approach: obs","time: 2006-05-18 17:00:00<br />value: 0.0180000000<br />Approach: obs","time: 2006-05-18 18:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-18 19:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-18 20:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-18 21:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-18 22:00:00<br />value: 0.0000000000<br />Approach: obs","time: 2006-05-18 23:00:00<br />value: 0.0000000000<br />Approach: obs"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,186,56,1)","dash":"solid"},"hoveron":"points","name":"obs","legendgroup":"obs","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0.000152970943901161,0.0019522590848697,0.00233186235980494,0.00186650753808485,0.00227538869115823,0.0207981659200445,0.170480219005068,0.355817603626837,0.529451244824659,0.630684743099341,0.689385299215422,0.705721928703002,0.684613646765209,0.631232948425741,0.554766807939391,0.385409360622978,0.195163521296125,0.0292903051215318,0.00527312925047107,0.00245629714614502,0.00145306319084933,0.00131345953133379,0.00131756043250657,0.000330707885140562,0.000420901735273416,0.00216910780897895,0.00250748556209451,0.00200884517786979,0.00239083868134393,0.0153873796200824,0.156717288788418,0.330772181660731,0.487397096002734,0.595375223833461,0.664990250810581,0.686545089540553,0.673208697375011,0.616801639926658,0.510536900109817,0.3649618311249,0.186562618248603,0.0290445307521658,0.00526943446601437,0.00246203143697846,0.00145781664043449,0.00131740773635949,0.00132084651096686,0.000333448617782185],"text":["time: 2006-05-17 00:00:00<br />value: 0.0001529709<br />Approach: ocs","time: 2006-05-17 01:00:00<br />value: 0.0019522591<br />Approach: ocs","time: 2006-05-17 02:00:00<br />value: 0.0023318624<br />Approach: ocs","time: 2006-05-17 03:00:00<br />value: 0.0018665075<br />Approach: ocs","time: 2006-05-17 04:00:00<br />value: 0.0022753887<br />Approach: ocs","time: 2006-05-17 05:00:00<br />value: 0.0207981659<br />Approach: ocs","time: 2006-05-17 06:00:00<br />value: 0.1704802190<br />Approach: ocs","time: 2006-05-17 07:00:00<br />value: 0.3558176036<br />Approach: ocs","time: 2006-05-17 08:00:00<br />value: 0.5294512448<br />Approach: ocs","time: 2006-05-17 09:00:00<br />value: 0.6306847431<br />Approach: ocs","time: 2006-05-17 10:00:00<br />value: 0.6893852992<br />Approach: ocs","time: 2006-05-17 11:00:00<br />value: 0.7057219287<br />Approach: ocs","time: 2006-05-17 12:00:00<br />value: 0.6846136468<br />Approach: ocs","time: 2006-05-17 13:00:00<br />value: 0.6312329484<br />Approach: ocs","time: 2006-05-17 14:00:00<br />value: 0.5547668079<br />Approach: ocs","time: 2006-05-17 15:00:00<br />value: 0.3854093606<br />Approach: ocs","time: 2006-05-17 16:00:00<br />value: 0.1951635213<br />Approach: ocs","time: 2006-05-17 17:00:00<br />value: 0.0292903051<br />Approach: ocs","time: 2006-05-17 18:00:00<br />value: 0.0052731293<br />Approach: ocs","time: 2006-05-17 19:00:00<br />value: 0.0024562971<br />Approach: ocs","time: 2006-05-17 20:00:00<br />value: 0.0014530632<br />Approach: ocs","time: 2006-05-17 21:00:00<br />value: 0.0013134595<br />Approach: ocs","time: 2006-05-17 22:00:00<br />value: 0.0013175604<br />Approach: ocs","time: 2006-05-17 23:00:00<br />value: 0.0003307079<br />Approach: ocs","time: 2006-05-18 00:00:00<br />value: 0.0004209017<br />Approach: ocs","time: 2006-05-18 01:00:00<br />value: 0.0021691078<br />Approach: ocs","time: 2006-05-18 02:00:00<br />value: 0.0025074856<br />Approach: ocs","time: 2006-05-18 03:00:00<br />value: 0.0020088452<br />Approach: ocs","time: 2006-05-18 04:00:00<br />value: 0.0023908387<br />Approach: ocs","time: 2006-05-18 05:00:00<br />value: 0.0153873796<br />Approach: ocs","time: 2006-05-18 06:00:00<br />value: 0.1567172888<br />Approach: ocs","time: 2006-05-18 07:00:00<br />value: 0.3307721817<br />Approach: ocs","time: 2006-05-18 08:00:00<br />value: 0.4873970960<br />Approach: ocs","time: 2006-05-18 09:00:00<br />value: 0.5953752238<br />Approach: ocs","time: 2006-05-18 10:00:00<br />value: 0.6649902508<br />Approach: ocs","time: 2006-05-18 11:00:00<br />value: 0.6865450895<br />Approach: ocs","time: 2006-05-18 12:00:00<br />value: 0.6732086974<br />Approach: ocs","time: 2006-05-18 13:00:00<br />value: 0.6168016399<br />Approach: ocs","time: 2006-05-18 14:00:00<br />value: 0.5105369001<br />Approach: ocs","time: 2006-05-18 15:00:00<br />value: 0.3649618311<br />Approach: ocs","time: 2006-05-18 16:00:00<br />value: 0.1865626182<br />Approach: ocs","time: 2006-05-18 17:00:00<br />value: 0.0290445308<br />Approach: ocs","time: 2006-05-18 18:00:00<br />value: 0.0052694345<br />Approach: ocs","time: 2006-05-18 19:00:00<br />value: 0.0024620314<br />Approach: ocs","time: 2006-05-18 20:00:00<br />value: 0.0014578166<br />Approach: ocs","time: 2006-05-18 21:00:00<br />value: 0.0013174077<br />Approach: ocs","time: 2006-05-18 22:00:00<br />value: 0.0013208465<br />Approach: ocs","time: 2006-05-18 23:00:00<br />value: 0.0003334486<br />Approach: ocs"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(97,156,255,1)","dash":"solid"},"hoveron":"points","name":"ocs","legendgroup":"ocs","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":25.5707762557078,"l":28.4931506849315},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1147815540,1148001660],"tickmode":"array","ticktext":["12:00 AM<br />17/05","06:00 AM<br />17/05","12:00 PM<br />17/05","06:00 PM<br />17/05","12:00 AM<br />18/05","06:00 AM<br />18/05","12:00 PM<br />18/05","06:00 PM<br />18/05","12:00 AM<br />19/05"],"tickvals":[1147824000,1147845600,1147867200,1147888800,1147910400,1147932000,1147953600,1147975200,1147996800],"categoryorder":"array","categoryarray":["12:00 AM<br />17/05","06:00 AM<br />17/05","12:00 PM<br />17/05","06:00 PM<br />17/05","12:00 AM<br />18/05","06:00 AM<br />18/05","12:00 PM<br />18/05","06:00 PM<br />18/05","12:00 AM<br />19/05"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.03535,0.74235],"tickmode":"array","ticktext":["0.0","0.2","0.4","0.6"],"tickvals":[0,0.2,0.4,0.6],"categoryorder":"array","categoryarray":["0.0","0.2","0.4","0.6"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"Approach","font":{"color":null,"family":null,"size":0}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"c1330adaa89":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"c1330adaa89","visdat":{"c1330adaa89":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Root mean square error:</p>
<div class="cell" data-hash="lab_session_cache/html/score_cs_70aa1543334e50ebb3c75f2c04b92715">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>score_cs <span class="ot">&lt;-</span> data_cs <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span><span class="fu">c</span>(time, obs), <span class="at">names_to =</span> <span class="st">"Approach"</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="fu">group_by</span>(Approach) <span class="sc">|&gt;</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>  <span class="fu">summarise</span>(<span class="at">RMSE =</span> <span class="fu">sqrt</span>(<span class="fu">mean</span>((value<span class="sc">-</span>obs)<span class="sc">^</span><span class="dv">2</span>)))</span>
<span id="cb12-5"><a href="#cb12-5"></a>score_cs</span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="co">#&gt;   Approach   RMSE</span></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt;</span></span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="co">#&gt; 1 base     0.0226</span></span>
<span id="cb12-10"><a href="#cb12-10"></a><span class="co">#&gt; 2 ocs      0.0323</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="temporal-forecast-reconciliation" class="level3"><h3 class="anchored" data-anchor-id="temporal-forecast-reconciliation">Temporal forecast reconciliation</h3>
<p>In the temporal case, we are working with a single series (e.g., <span class="math inline">\mathrm{P}_{17}</span>). In this case, we no longer have matrices as inputs to the functions, but rather vectors whose components are ordered according to increasing temporal frequency. This means that the first two elements of the vector refer&nbsp;<br>
to the two daily forecasts, respectively 1- and 2- day ahead, and so on, up to the last 48 values that refer to the hourly forecasts.</p>
<div class="cell" data-hash="lab_session_cache/html/base_te_c67323a392801f57d237cab50a18fdc5">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>id_serie <span class="ot">&lt;-</span> <span class="st">"01_045"</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>base_te <span class="ot">&lt;-</span> <span class="fu">Reduce</span>(rbind, base)[, id_serie]  <span class="co"># base forecasts</span></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="co">#head(base_te)</span></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="co">#tail(base_te, n = 48)</span></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="fu">str</span>(<span class="fu">unname</span>(base_te))</span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="co">#&gt;  num [1:120] 4.8 4.8 2.54 2.08 2.49 ...</span></span>
<span id="cb13-7"><a href="#cb13-7"></a>res_te <span class="ot">&lt;-</span> <span class="fu">Reduce</span>(rbind, res)[, id_serie]    <span class="co"># residuals</span></span>
<span id="cb13-8"><a href="#cb13-8"></a><span class="fu">str</span>(<span class="fu">unname</span>(res_te))</span>
<span id="cb13-9"><a href="#cb13-9"></a><span class="co">#&gt;  num [1:840] 0.14267 -0.22525 0.13477 0.00412 -0.47658 ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The use of residuals is not always strictly necessary, but depends on the approximation of the covariance matrix that we want to use (<code>comb</code> parameter). For example, in the temporal case, it has been shown (Di Fonzo and Girolimetto, 2023, <em>Spatio-temporal reconciliation of solar forecasts, Solar Energy</em>) that even a simple approach like ‘struc’ is effective in improving the performance of the base forecasts.</p>
<div class="cell" data-hash="lab_session_cache/html/reco_te_b405e7711f980dae6940061479cf69b7">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>reco_te <span class="ot">&lt;-</span> <span class="fu">thfrec</span>(<span class="at">basef =</span> base_te,  <span class="co"># base forecasts</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>                  <span class="at">m =</span> te_info<span class="sc">$</span>m,    <span class="co"># max. order of temporal aggregation</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>                  <span class="co">#comb = "sar1",    # covariance matrix approx</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>                  <span class="at">comb =</span> <span class="st">"struc"</span>,   <span class="co"># covariance matrix approx (no res)</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>                  <span class="co">#res = res_te,     # residuals</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>                  <span class="at">keep =</span> <span class="st">"recf"</span>)    <span class="co"># output option</span></span>
<span id="cb14-7"><a href="#cb14-7"></a><span class="fu">str</span>(<span class="fu">unname</span>(reco_te))</span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="co">#&gt;  num [1:120] 4.79 4.8 2.64 2.14 2.65 ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="lab_session_cache/html/check_te_dc58c270a38aee99c1d14e1ae391c64a">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">all</span>(<span class="fu">abs</span>(te_info<span class="sc">$</span>Zt <span class="sc">%*%</span> reco_te) <span class="sc">&lt;</span><span class="fu">sqrt</span>(.Machine<span class="sc">$</span>double.eps))</span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="co">#&gt; [1] TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="lab_session_cache/html/plot_te_6a2caf8d319cedabe13b2c01802e7922">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">names</span>(base_te) <span class="ot">&lt;-</span> <span class="fu">names</span>(reco_te)</span>
<span id="cb16-2"><a href="#cb16-2"></a>data_te <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">ote =</span> <span class="fu">as.numeric</span>(<span class="fu">FoReco2ts</span>(reco_te)<span class="sc">$</span>k1),</span>
<span id="cb16-3"><a href="#cb16-3"></a>                  <span class="at">base =</span> <span class="fu">as.numeric</span>(<span class="fu">FoReco2ts</span>(base_te)<span class="sc">$</span>k1),</span>
<span id="cb16-4"><a href="#cb16-4"></a>                  <span class="at">obs =</span> hourly_obs[,id_serie],</span>
<span id="cb16-5"><a href="#cb16-5"></a>                  <span class="at">time =</span> <span class="fu">seq</span>(<span class="at">from =</span> starting_time, <span class="at">by =</span> <span class="st">"hour"</span>, </span>
<span id="cb16-6"><a href="#cb16-6"></a>                             <span class="at">length.out =</span> <span class="dv">48</span>))</span>
<span id="cb16-7"><a href="#cb16-7"></a>plot_te <span class="ot">&lt;-</span> data_te <span class="sc">|&gt;</span></span>
<span id="cb16-8"><a href="#cb16-8"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>time, <span class="at">names_to =</span> <span class="st">"Approach"</span>) <span class="sc">|&gt;</span></span>
<span id="cb16-9"><a href="#cb16-9"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">col =</span> Approach, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb16-10"><a href="#cb16-10"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb16-11"><a href="#cb16-11"></a>  <span class="fu">scale_x_datetime</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_date</span>(<span class="st">"%I:%M %p</span><span class="sc">\n</span><span class="st">%d/%m"</span>),</span>
<span id="cb16-12"><a href="#cb16-12"></a>                   <span class="at">breaks =</span> <span class="fu">seq</span>(starting_time, <span class="at">by =</span> <span class="st">"6 hours"</span>, <span class="at">length.out =</span> <span class="dv">49</span><span class="sc">/</span><span class="dv">6</span>)) <span class="sc">+</span></span>
<span id="cb16-13"><a href="#cb16-13"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb16-14"><a href="#cb16-14"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb16-15"><a href="#cb16-15"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span>
<span id="cb16-16"><a href="#cb16-16"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(plot_te)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-d024c86a5cb521de54cd" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-d024c86a5cb521de54cd">{"x":{"data":[{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0,0,0,0,0,0.036,0.193,0.354,0.501,0.591,0.653,0.666,0.642,0.574,0.477,0.326,0.151,0.016,0,0,0,0,0,0,0,0,0,0,0,0.033,0.191,0.371,0.523,0.626,0.693,0.707,0.683,0.607,0.488,0.337,0.155,0.017,0,0,0,0,0,0],"text":["time: 2006-05-17 00:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 01:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 02:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 03:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 04:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 05:00:00<br />value:  0.036000000<br />Approach: base","time: 2006-05-17 06:00:00<br />value:  0.193000000<br />Approach: base","time: 2006-05-17 07:00:00<br />value:  0.354000000<br />Approach: base","time: 2006-05-17 08:00:00<br />value:  0.501000000<br />Approach: base","time: 2006-05-17 09:00:00<br />value:  0.591000000<br />Approach: base","time: 2006-05-17 10:00:00<br />value:  0.653000000<br />Approach: base","time: 2006-05-17 11:00:00<br />value:  0.666000000<br />Approach: base","time: 2006-05-17 12:00:00<br />value:  0.642000000<br />Approach: base","time: 2006-05-17 13:00:00<br />value:  0.574000000<br />Approach: base","time: 2006-05-17 14:00:00<br />value:  0.477000000<br />Approach: base","time: 2006-05-17 15:00:00<br />value:  0.326000000<br />Approach: base","time: 2006-05-17 16:00:00<br />value:  0.151000000<br />Approach: base","time: 2006-05-17 17:00:00<br />value:  0.016000000<br />Approach: base","time: 2006-05-17 18:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 19:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 20:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 21:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 22:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 23:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 00:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 01:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 02:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 03:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 04:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 05:00:00<br />value:  0.033000000<br />Approach: base","time: 2006-05-18 06:00:00<br />value:  0.191000000<br />Approach: base","time: 2006-05-18 07:00:00<br />value:  0.371000000<br />Approach: base","time: 2006-05-18 08:00:00<br />value:  0.523000000<br />Approach: base","time: 2006-05-18 09:00:00<br />value:  0.626000000<br />Approach: base","time: 2006-05-18 10:00:00<br />value:  0.693000000<br />Approach: base","time: 2006-05-18 11:00:00<br />value:  0.707000000<br />Approach: base","time: 2006-05-18 12:00:00<br />value:  0.683000000<br />Approach: base","time: 2006-05-18 13:00:00<br />value:  0.607000000<br />Approach: base","time: 2006-05-18 14:00:00<br />value:  0.488000000<br />Approach: base","time: 2006-05-18 15:00:00<br />value:  0.337000000<br />Approach: base","time: 2006-05-18 16:00:00<br />value:  0.155000000<br />Approach: base","time: 2006-05-18 17:00:00<br />value:  0.017000000<br />Approach: base","time: 2006-05-18 18:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 19:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 20:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 21:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 22:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 23:00:00<br />value:  0.000000000<br />Approach: base"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"base","legendgroup":"base","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0,0,0,0,0,0.011,0.156,0.27,0.432,0.57,0.634,0.672,0.662,0.55,0.45,0.332,0.152,0.02,0,0,0,0,0,0,0,0,0,0,0,0.006,0.159,0.354,0.493,0.591,0.67,0.688,0.66,0.596,0.49,0.373,0.188,0.018,0,0,0,0,0,0],"text":["time: 2006-05-17 00:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 01:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 02:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 03:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 04:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 05:00:00<br />value:  0.011000000<br />Approach: obs","time: 2006-05-17 06:00:00<br />value:  0.156000000<br />Approach: obs","time: 2006-05-17 07:00:00<br />value:  0.270000000<br />Approach: obs","time: 2006-05-17 08:00:00<br />value:  0.432000000<br />Approach: obs","time: 2006-05-17 09:00:00<br />value:  0.570000000<br />Approach: obs","time: 2006-05-17 10:00:00<br />value:  0.634000000<br />Approach: obs","time: 2006-05-17 11:00:00<br />value:  0.672000000<br />Approach: obs","time: 2006-05-17 12:00:00<br />value:  0.662000000<br />Approach: obs","time: 2006-05-17 13:00:00<br />value:  0.550000000<br />Approach: obs","time: 2006-05-17 14:00:00<br />value:  0.450000000<br />Approach: obs","time: 2006-05-17 15:00:00<br />value:  0.332000000<br />Approach: obs","time: 2006-05-17 16:00:00<br />value:  0.152000000<br />Approach: obs","time: 2006-05-17 17:00:00<br />value:  0.020000000<br />Approach: obs","time: 2006-05-17 18:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 19:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 20:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 21:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 22:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 23:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 00:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 01:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 02:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 03:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 04:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 05:00:00<br />value:  0.006000000<br />Approach: obs","time: 2006-05-18 06:00:00<br />value:  0.159000000<br />Approach: obs","time: 2006-05-18 07:00:00<br />value:  0.354000000<br />Approach: obs","time: 2006-05-18 08:00:00<br />value:  0.493000000<br />Approach: obs","time: 2006-05-18 09:00:00<br />value:  0.591000000<br />Approach: obs","time: 2006-05-18 10:00:00<br />value:  0.670000000<br />Approach: obs","time: 2006-05-18 11:00:00<br />value:  0.688000000<br />Approach: obs","time: 2006-05-18 12:00:00<br />value:  0.660000000<br />Approach: obs","time: 2006-05-18 13:00:00<br />value:  0.596000000<br />Approach: obs","time: 2006-05-18 14:00:00<br />value:  0.490000000<br />Approach: obs","time: 2006-05-18 15:00:00<br />value:  0.373000000<br />Approach: obs","time: 2006-05-18 16:00:00<br />value:  0.188000000<br />Approach: obs","time: 2006-05-18 17:00:00<br />value:  0.018000000<br />Approach: obs","time: 2006-05-18 18:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 19:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 20:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 21:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 22:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 23:00:00<br />value:  0.000000000<br />Approach: obs"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,186,56,1)","dash":"solid"},"hoveron":"points","name":"obs","legendgroup":"obs","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[-0.0146997105129048,-0.0146997105129048,-0.0143296302248384,-0.0121797240681506,-0.0261581006600712,0.00984189933992879,0.146406435604167,0.307406435604167,0.450128163404105,0.553485728854494,0.622489060358463,0.635489060358463,0.640991748452973,0.572991748452973,0.484300933532028,0.325542177404028,0.15819677165648,0.0231967716564803,-0.00921101424780481,-0.00921101424780481,-0.0103785612830587,-0.0107817508759214,-0.0111348982510365,-0.0111348982510365,-0.0161081420040837,-0.0161081420040837,-0.0158177114479948,-0.0133492063633972,-0.0267037300070695,0.00629626999293048,0.136400840979882,0.316400840979882,0.449774266424496,0.559167578185912,0.628911973112123,0.642911973112123,0.653642736941894,0.577642736941894,0.47869028037437,0.324978090832688,0.158254626972764,0.020254626972764,-0.0104945002913669,-0.0104945002913669,-0.0116926656606856,-0.0120847213138884,-0.0124406521739185,-0.0124406521739185],"text":["time: 2006-05-17 00:00:00<br />value: -0.014699711<br />Approach: ote","time: 2006-05-17 01:00:00<br />value: -0.014699711<br />Approach: ote","time: 2006-05-17 02:00:00<br />value: -0.014329630<br />Approach: ote","time: 2006-05-17 03:00:00<br />value: -0.012179724<br />Approach: ote","time: 2006-05-17 04:00:00<br />value: -0.026158101<br />Approach: ote","time: 2006-05-17 05:00:00<br />value:  0.009841899<br />Approach: ote","time: 2006-05-17 06:00:00<br />value:  0.146406436<br />Approach: ote","time: 2006-05-17 07:00:00<br />value:  0.307406436<br />Approach: ote","time: 2006-05-17 08:00:00<br />value:  0.450128163<br />Approach: ote","time: 2006-05-17 09:00:00<br />value:  0.553485729<br />Approach: ote","time: 2006-05-17 10:00:00<br />value:  0.622489060<br />Approach: ote","time: 2006-05-17 11:00:00<br />value:  0.635489060<br />Approach: ote","time: 2006-05-17 12:00:00<br />value:  0.640991748<br />Approach: ote","time: 2006-05-17 13:00:00<br />value:  0.572991748<br />Approach: ote","time: 2006-05-17 14:00:00<br />value:  0.484300934<br />Approach: ote","time: 2006-05-17 15:00:00<br />value:  0.325542177<br />Approach: ote","time: 2006-05-17 16:00:00<br />value:  0.158196772<br />Approach: ote","time: 2006-05-17 17:00:00<br />value:  0.023196772<br />Approach: ote","time: 2006-05-17 18:00:00<br />value: -0.009211014<br />Approach: ote","time: 2006-05-17 19:00:00<br />value: -0.009211014<br />Approach: ote","time: 2006-05-17 20:00:00<br />value: -0.010378561<br />Approach: ote","time: 2006-05-17 21:00:00<br />value: -0.010781751<br />Approach: ote","time: 2006-05-17 22:00:00<br />value: -0.011134898<br />Approach: ote","time: 2006-05-17 23:00:00<br />value: -0.011134898<br />Approach: ote","time: 2006-05-18 00:00:00<br />value: -0.016108142<br />Approach: ote","time: 2006-05-18 01:00:00<br />value: -0.016108142<br />Approach: ote","time: 2006-05-18 02:00:00<br />value: -0.015817711<br />Approach: ote","time: 2006-05-18 03:00:00<br />value: -0.013349206<br />Approach: ote","time: 2006-05-18 04:00:00<br />value: -0.026703730<br />Approach: ote","time: 2006-05-18 05:00:00<br />value:  0.006296270<br />Approach: ote","time: 2006-05-18 06:00:00<br />value:  0.136400841<br />Approach: ote","time: 2006-05-18 07:00:00<br />value:  0.316400841<br />Approach: ote","time: 2006-05-18 08:00:00<br />value:  0.449774266<br />Approach: ote","time: 2006-05-18 09:00:00<br />value:  0.559167578<br />Approach: ote","time: 2006-05-18 10:00:00<br />value:  0.628911973<br />Approach: ote","time: 2006-05-18 11:00:00<br />value:  0.642911973<br />Approach: ote","time: 2006-05-18 12:00:00<br />value:  0.653642737<br />Approach: ote","time: 2006-05-18 13:00:00<br />value:  0.577642737<br />Approach: ote","time: 2006-05-18 14:00:00<br />value:  0.478690280<br />Approach: ote","time: 2006-05-18 15:00:00<br />value:  0.324978091<br />Approach: ote","time: 2006-05-18 16:00:00<br />value:  0.158254627<br />Approach: ote","time: 2006-05-18 17:00:00<br />value:  0.020254627<br />Approach: ote","time: 2006-05-18 18:00:00<br />value: -0.010494500<br />Approach: ote","time: 2006-05-18 19:00:00<br />value: -0.010494500<br />Approach: ote","time: 2006-05-18 20:00:00<br />value: -0.011692666<br />Approach: ote","time: 2006-05-18 21:00:00<br />value: -0.012084721<br />Approach: ote","time: 2006-05-18 22:00:00<br />value: -0.012440652<br />Approach: ote","time: 2006-05-18 23:00:00<br />value: -0.012440652<br />Approach: ote"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(97,156,255,1)","dash":"solid"},"hoveron":"points","name":"ote","legendgroup":"ote","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":25.5707762557078,"l":28.4931506849315},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1147815540,1148001660],"tickmode":"array","ticktext":["12:00 AM<br />17/05","06:00 AM<br />17/05","12:00 PM<br />17/05","06:00 PM<br />17/05","12:00 AM<br />18/05","06:00 AM<br />18/05","12:00 PM<br />18/05","06:00 PM<br />18/05","12:00 AM<br />19/05"],"tickvals":[1147824000,1147845600,1147867200,1147888800,1147910400,1147932000,1147953600,1147975200,1147996800],"categoryorder":"array","categoryarray":["12:00 AM<br />17/05","06:00 AM<br />17/05","12:00 PM<br />17/05","06:00 PM<br />17/05","12:00 AM<br />18/05","06:00 AM<br />18/05","12:00 PM<br />18/05","06:00 PM<br />18/05","12:00 AM<br />19/05"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.063388916507423,0.743685186500353],"tickmode":"array","ticktext":["0.0","0.2","0.4","0.6"],"tickvals":[0,0.2,0.4,0.6],"categoryorder":"array","categoryarray":["0.0","0.2","0.4","0.6"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"Approach","font":{"color":null,"family":null,"size":0}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"c131ae6ce02":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"c131ae6ce02","visdat":{"c131ae6ce02":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Root mean square error:</p>
<div class="cell" data-hash="lab_session_cache/html/score_te_a841c115d1db86de01f08e5a1e42cf7d">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>score_te <span class="ot">&lt;-</span> data_te <span class="sc">|&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span><span class="fu">c</span>(time, obs), <span class="at">names_to =</span> <span class="st">"Approach"</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>  <span class="fu">group_by</span>(Approach) <span class="sc">|&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>  <span class="fu">summarise</span>(<span class="at">RMSE =</span> <span class="fu">sqrt</span>(<span class="fu">mean</span>((value<span class="sc">-</span>obs)<span class="sc">^</span><span class="dv">2</span>)))</span>
<span id="cb17-5"><a href="#cb17-5"></a>score_te</span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="co">#&gt;   Approach   RMSE</span></span>
<span id="cb17-8"><a href="#cb17-8"></a><span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt;</span></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="co">#&gt; 1 base     0.0226</span></span>
<span id="cb17-10"><a href="#cb17-10"></a><span class="co">#&gt; 2 ote      0.0217</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="cross-temporal-forecast-reconciliation" class="level3"><h3 class="anchored" data-anchor-id="cross-temporal-forecast-reconciliation">Cross-temporal forecast reconciliation</h3>
<section id="lets-keep-it-simple-partly-bottom-up" class="level4"><h4 class="anchored" data-anchor-id="lets-keep-it-simple-partly-bottom-up">Let’s keep it simple: partly bottom-up</h4>
<p>Sometimes simple one-dimensional approaches can prove very useful, especially in high dimensional problem where other approaches could be resource-intensive in terms of time and computational power. Partly Bottom-Up approach consists in reconciling the high frequency bottom time series (e.g., the 318 hourly base forecasts) and then applying bottom-up. For example, we previously reconciled the hourly time series in a cross-sectional framework. The obtained forecasts may then be aggregated through temporal bottom-up, giving cross-temporally reconciled forecasts.</p>
<div class="cell" data-hash="lab_session_cache/html/reco_pbu_c244355097973b5000dff59b52013b0c">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="co"># Temporal BU for each series</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="fu">system.time</span>(reco_pbu1 <span class="ot">&lt;-</span> <span class="fu">apply</span>(reco_cs, <span class="dv">2</span>, thfrec, <span class="at">comb =</span> <span class="st">"bu"</span>, <span class="at">m =</span> m, <span class="at">keep =</span> <span class="st">"recf"</span>))</span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="co">#&gt;    user  system elapsed </span></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="co">#&gt;   1.747   0.015   1.780</span></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="co"># Cross-temporal structure</span></span>
<span id="cb18-6"><a href="#cb18-6"></a><span class="fu">system.time</span>(reco_pbu2 <span class="ot">&lt;-</span> <span class="fu">ctbu</span>(<span class="fu">t</span>(reco_cs[, <span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)]), <span class="at">m =</span> m, <span class="at">C =</span> C))</span>
<span id="cb18-7"><a href="#cb18-7"></a><span class="co">#&gt;    user  system elapsed </span></span>
<span id="cb18-8"><a href="#cb18-8"></a><span class="co">#&gt;   0.090   0.004   0.095</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="lab_session_cache/html/check_pbu_4e46e4086d8359df1ee69600b68bae45">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="co"># Same results</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="fu">all</span>(<span class="fu">abs</span>(reco_pbu1<span class="sc">-</span><span class="fu">t</span>(reco_pbu2)) <span class="sc">&lt;</span> <span class="fu">sqrt</span>(.Machine<span class="sc">$</span>double.eps))</span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb19-4"><a href="#cb19-4"></a></span>
<span id="cb19-5"><a href="#cb19-5"></a><span class="co"># Cross-temporal constraints</span></span>
<span id="cb19-6"><a href="#cb19-6"></a>discrepancy <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">tol =</span> <span class="fu">sqrt</span>(.Machine<span class="sc">$</span>double.eps)) {</span>
<span id="cb19-7"><a href="#cb19-7"></a>  cs <span class="ot">&lt;-</span> <span class="fu">max</span>(<span class="fu">abs</span>(cs_info<span class="sc">$</span>Ut <span class="sc">%*%</span> x))</span>
<span id="cb19-8"><a href="#cb19-8"></a>  te <span class="ot">&lt;-</span> <span class="fu">max</span>(<span class="fu">abs</span>(te_info<span class="sc">$</span>Zt <span class="sc">%*%</span> <span class="fu">t</span>(x)))</span>
<span id="cb19-9"><a href="#cb19-9"></a>  <span class="fu">cat</span>(<span class="st">"cs discrepancy:"</span>, <span class="fu">ifelse</span>(cs<span class="sc">&gt;</span>tol, <span class="fu">sprintf</span>(<span class="st">"%.8f"</span>, cs), <span class="dv">0</span>),</span>
<span id="cb19-10"><a href="#cb19-10"></a>      <span class="st">"</span><span class="sc">\n</span><span class="st">te discrepancy:"</span>,<span class="fu">ifelse</span>(te<span class="sc">&gt;</span>tol, <span class="fu">sprintf</span>(<span class="st">"%.8f"</span>, te), <span class="dv">0</span>))</span>
<span id="cb19-11"><a href="#cb19-11"></a>}</span>
<span id="cb19-12"><a href="#cb19-12"></a><span class="fu">discrepancy</span>(reco_pbu2)</span>
<span id="cb19-13"><a href="#cb19-13"></a><span class="co">#&gt; cs discrepancy: 0 </span></span>
<span id="cb19-14"><a href="#cb19-14"></a><span class="co">#&gt; te discrepancy: 0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="optimal-forecast-reconciliation" class="level4"><h4 class="anchored" data-anchor-id="optimal-forecast-reconciliation">Optimal forecast reconciliation</h4>
<p>To perform cross-temporal reconciliation with <code>FoReco</code>, it is necessary to arrange base forecasts (and residuals) in matrix form. The rows of the matrix represent the cross-sectional dimension, while the columns represent the temporal dimension.</p>
<div class="cell" data-hash="lab_session_cache/html/info_ct_451fe73658ed105d25587d650bdf234c">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="co"># Base forecasts matrix</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>base_ct <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">Reduce</span>(rbind, base))</span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="fu">str</span>(<span class="fu">unname</span>(base_ct))</span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="co">#&gt;  num [1:324, 1:120] 1611 131 352 472 477 ...</span></span>
<span id="cb20-5"><a href="#cb20-5"></a><span class="fu">discrepancy</span>(base_ct)</span>
<span id="cb20-6"><a href="#cb20-6"></a><span class="co">#&gt; cs discrepancy: 82.24490737 </span></span>
<span id="cb20-7"><a href="#cb20-7"></a><span class="co">#&gt; te discrepancy: 87.12943983</span></span>
<span id="cb20-8"><a href="#cb20-8"></a></span>
<span id="cb20-9"><a href="#cb20-9"></a><span class="co"># Residuals matrix</span></span>
<span id="cb20-10"><a href="#cb20-10"></a>res_ct <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">Reduce</span>(rbind, res))</span>
<span id="cb20-11"><a href="#cb20-11"></a><span class="fu">str</span>(<span class="fu">unname</span>(res_ct))</span>
<span id="cb20-12"><a href="#cb20-12"></a><span class="co">#&gt;  num [1:324, 1:840] -90.018 -0.924 -18.96 -100.991 -57.978 ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>First, we will look at some heuristic approaches (KA, reverse KA and iterative) that use reconciliations separately along the cross-sectional and temporal dimensions, but still satisfy the cross-temporal constraints.</p>
<div class="cell" data-hash="lab_session_cache/html/reco_tcs_534e3d007a8ca89a5c780462ad63c491">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># tcs (KA): first-temporal-then-cross-sectional forecast reconciliation</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>reco_tcs <span class="ot">&lt;-</span> <span class="fu">tcsrec</span>(<span class="at">basef =</span> base_ct,           <span class="co"># base forecasts</span></span>
<span id="cb21-3"><a href="#cb21-3"></a>                   <span class="at">m =</span> m,                     <span class="co"># max. order of temporal aggregation</span></span>
<span id="cb21-4"><a href="#cb21-4"></a>                   <span class="at">C =</span> C,                     <span class="co"># aggregation matrix</span></span>
<span id="cb21-5"><a href="#cb21-5"></a>                   <span class="at">thf_comb =</span> <span class="st">"sar1"</span>,         <span class="co"># te covariance matrix</span></span>
<span id="cb21-6"><a href="#cb21-6"></a>                   <span class="at">hts_comb =</span> <span class="st">"wls"</span>,          <span class="co"># cs covariance matrix</span></span>
<span id="cb21-7"><a href="#cb21-7"></a>                   <span class="at">res =</span> res_ct)              <span class="co"># residuals matrix</span></span>
<span id="cb21-8"><a href="#cb21-8"></a><span class="fu">discrepancy</span>(reco_tcs<span class="sc">$</span>recf)</span>
<span id="cb21-9"><a href="#cb21-9"></a><span class="co">#&gt; cs discrepancy: 0 </span></span>
<span id="cb21-10"><a href="#cb21-10"></a><span class="co">#&gt; te discrepancy: 0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="lab_session_cache/html/reco_cst_84351b1e9610f8ad9754c03d336afef9">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="co"># cst: first-cross-sectional-then-temporal forecast reconciliation</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>reco_cst <span class="ot">&lt;-</span> <span class="fu">cstrec</span>(<span class="at">basef =</span> base_ct,           <span class="co"># base forecasts</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>                   <span class="at">m =</span> m,                     <span class="co"># max. order of temporal aggregation</span></span>
<span id="cb22-4"><a href="#cb22-4"></a>                   <span class="at">C =</span> C,                     <span class="co"># aggregation matrix</span></span>
<span id="cb22-5"><a href="#cb22-5"></a>                   <span class="at">hts_comb =</span> <span class="st">"wls"</span>,          <span class="co"># cs covariance matrix</span></span>
<span id="cb22-6"><a href="#cb22-6"></a>                   <span class="at">thf_comb =</span> <span class="st">"sar1"</span>,         <span class="co"># te covariance matrix</span></span>
<span id="cb22-7"><a href="#cb22-7"></a>                   <span class="at">res =</span> res_ct)              <span class="co"># residuals matrix</span></span>
<span id="cb22-8"><a href="#cb22-8"></a><span class="fu">discrepancy</span>(reco_cst<span class="sc">$</span>recf)</span>
<span id="cb22-9"><a href="#cb22-9"></a><span class="co">#&gt; cs discrepancy: 0 </span></span>
<span id="cb22-10"><a href="#cb22-10"></a><span class="co">#&gt; te discrepancy: 0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="lab_session_cache/html/reco_ite_f12bc3aa964ca3dcb920a3f5d776dfe8">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="co"># Iterative heuristic cross-temporal forecast reconciliation</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>reco_ite <span class="ot">&lt;-</span> <span class="fu">iterec</span>(<span class="at">basef =</span> base_ct,                <span class="co"># base forecasts</span></span>
<span id="cb23-3"><a href="#cb23-3"></a>                   <span class="at">m =</span> m,                          <span class="co"># max. order of temporal aggregation</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>                   <span class="at">C =</span> C,                          <span class="co"># aggregation matrix</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>                   <span class="at">thf_comb =</span> <span class="st">"sar1"</span>,              <span class="co"># te covariance matrix</span></span>
<span id="cb23-6"><a href="#cb23-6"></a>                   <span class="at">hts_comb =</span> <span class="st">"wls"</span>,               <span class="co"># cs covariance matrix</span></span>
<span id="cb23-7"><a href="#cb23-7"></a>                   <span class="at">res =</span> res_ct,                   <span class="co"># residuals matrix</span></span>
<span id="cb23-8"><a href="#cb23-8"></a>                   <span class="at">start_rec =</span> <span class="st">"thf"</span>,              <span class="co"># step 1 framework</span></span>
<span id="cb23-9"><a href="#cb23-9"></a>                   <span class="at">note =</span> <span class="cn">TRUE</span>,                    <span class="co"># console information</span></span>
<span id="cb23-10"><a href="#cb23-10"></a>                   <span class="at">plot =</span> <span class="st">"none"</span>, <span class="at">norm =</span> <span class="st">"inf"</span>, <span class="at">tol =</span> <span class="fl">1e-6</span>)</span>
<span id="cb23-11"><a href="#cb23-11"></a><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span id="cb23-12"><a href="#cb23-12"></a><span class="co">#&gt; Iter       # |     Cross-sec. incoherence     |      Temporal incoherence      |</span></span>
<span id="cb23-13"><a href="#cb23-13"></a><span class="co">#&gt; thf:       0 |                          82.24 |                          87.13 |</span></span>
<span id="cb23-14"><a href="#cb23-14"></a><span class="co">#&gt; thf:       1 |                          31.90 |                          14.56 |</span></span>
<span id="cb23-15"><a href="#cb23-15"></a><span class="co">#&gt; thf:       2 |                           6.56 |                           3.18 |</span></span>
<span id="cb23-16"><a href="#cb23-16"></a><span class="co">#&gt; thf:       3 |                           1.44 |                       7.18e-01 |</span></span>
<span id="cb23-17"><a href="#cb23-17"></a><span class="co">#&gt; thf:       4 |                       3.26e-01 |                       1.66e-01 |</span></span>
<span id="cb23-18"><a href="#cb23-18"></a><span class="co">#&gt; thf:       5 |                       7.54e-02 |                       3.90e-02 |</span></span>
<span id="cb23-19"><a href="#cb23-19"></a><span class="co">#&gt; thf:       6 |                       1.78e-02 |                       9.34e-03 |</span></span>
<span id="cb23-20"><a href="#cb23-20"></a><span class="co">#&gt; thf:       7 |                       4.26e-03 |                       2.27e-03 |</span></span>
<span id="cb23-21"><a href="#cb23-21"></a><span class="co">#&gt; thf:       8 |                       1.03e-03 |                       5.57e-04 |</span></span>
<span id="cb23-22"><a href="#cb23-22"></a><span class="co">#&gt; thf:       9 |                       2.54e-04 |                       1.38e-04 |</span></span>
<span id="cb23-23"><a href="#cb23-23"></a><span class="co">#&gt; thf:      10 |                       6.30e-05 |                       3.44e-05 |</span></span>
<span id="cb23-24"><a href="#cb23-24"></a><span class="co">#&gt; thf:      11 |                       1.57e-05 |                       8.64e-06 |</span></span>
<span id="cb23-25"><a href="#cb23-25"></a><span class="co">#&gt; thf:      12 |                       3.95e-06 |                       2.18e-06 |</span></span>
<span id="cb23-26"><a href="#cb23-26"></a><span class="co">#&gt; thf: Convergence (starting from thf) achieved at iteration number 13! </span></span>
<span id="cb23-27"><a href="#cb23-27"></a><span class="co">#&gt; thf: Temporal incoherence 5.51e-07 &lt; 1e-06 tolerance</span></span>
<span id="cb23-28"><a href="#cb23-28"></a><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span id="cb23-29"><a href="#cb23-29"></a><span class="fu">discrepancy</span>(reco_ite<span class="sc">$</span>recf, <span class="at">tol =</span> <span class="fl">1e-6</span>)</span>
<span id="cb23-30"><a href="#cb23-30"></a><span class="co">#&gt; cs discrepancy: 0 </span></span>
<span id="cb23-31"><a href="#cb23-31"></a><span class="co">#&gt; te discrepancy: 0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finally, let us consider the simultaneous optimal reconciliation approach.</p>
<div class="cell" data-hash="lab_session_cache/html/reco_ct_96185978ab94195e4f2831add69222c3">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="co"># Optimal combination cross-temporal forecast reconciliation</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>reco_ct <span class="ot">&lt;-</span> <span class="fu">octrec</span>(<span class="at">basef =</span> base_ct,       <span class="co"># base forecasts</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>                  <span class="at">m =</span> m,                 <span class="co"># max. order of temporal aggregation</span></span>
<span id="cb24-4"><a href="#cb24-4"></a>                  <span class="at">C =</span> C,                 <span class="co"># aggregation matrix</span></span>
<span id="cb24-5"><a href="#cb24-5"></a>                  <span class="at">comb =</span> <span class="st">"wlsv"</span>,         <span class="co"># covariance matrix</span></span>
<span id="cb24-6"><a href="#cb24-6"></a>                  <span class="at">res =</span> res_ct,          <span class="co"># residuals matrix</span></span>
<span id="cb24-7"><a href="#cb24-7"></a>                  <span class="at">keep =</span> <span class="st">"recf"</span>)</span>
<span id="cb24-8"><a href="#cb24-8"></a><span class="fu">discrepancy</span>(reco_ct)</span>
<span id="cb24-9"><a href="#cb24-9"></a><span class="co">#&gt; cs discrepancy: 0 </span></span>
<span id="cb24-10"><a href="#cb24-10"></a><span class="co">#&gt; te discrepancy: 0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="lab_session_cache/html/plot_ct_28dcd780c6c0d72bc7bf2da3665bd794">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="fu">rownames</span>(reco_pbu2) <span class="ot">&lt;-</span> <span class="fu">rownames</span>(reco_ct)</span>
<span id="cb25-2"><a href="#cb25-2"></a>data_ct <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">oct =</span> <span class="fu">FoReco2ts</span>(reco_ct)<span class="sc">$</span>k1[, id_serie],</span>
<span id="cb25-3"><a href="#cb25-3"></a>                  <span class="at">pbu =</span> <span class="fu">FoReco2ts</span>(reco_pbu2)<span class="sc">$</span>k1[, id_serie],</span>
<span id="cb25-4"><a href="#cb25-4"></a>       <span class="at">tcs =</span> <span class="fu">FoReco2ts</span>(reco_tcs<span class="sc">$</span>recf)<span class="sc">$</span>k1[, id_serie],</span>
<span id="cb25-5"><a href="#cb25-5"></a>       <span class="at">cst =</span> <span class="fu">FoReco2ts</span>(<span class="fu">as.matrix</span>(reco_cst<span class="sc">$</span>recf))<span class="sc">$</span>k1[, id_serie],</span>
<span id="cb25-6"><a href="#cb25-6"></a>       <span class="at">ite =</span> <span class="fu">FoReco2ts</span>(reco_ite<span class="sc">$</span>recf)<span class="sc">$</span>k1[, id_serie],</span>
<span id="cb25-7"><a href="#cb25-7"></a>       <span class="at">base =</span> <span class="fu">as.numeric</span>(<span class="fu">FoReco2ts</span>(base_te)<span class="sc">$</span>k1),</span>
<span id="cb25-8"><a href="#cb25-8"></a>       <span class="at">obs =</span> hourly_obs[, id_serie],</span>
<span id="cb25-9"><a href="#cb25-9"></a>       <span class="at">time =</span> <span class="fu">seq</span>(<span class="at">from=</span>starting_time, <span class="at">by=</span><span class="st">"hour"</span>, <span class="at">length.out =</span> <span class="dv">48</span>))</span>
<span id="cb25-10"><a href="#cb25-10"></a>plot_ct <span class="ot">&lt;-</span> data_ct <span class="sc">|&gt;</span></span>
<span id="cb25-11"><a href="#cb25-11"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>time, <span class="at">names_to =</span> <span class="st">"Approach"</span>) <span class="sc">|&gt;</span></span>
<span id="cb25-12"><a href="#cb25-12"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> value, <span class="at">col =</span> Approach)) <span class="sc">+</span></span>
<span id="cb25-13"><a href="#cb25-13"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb25-14"><a href="#cb25-14"></a>  <span class="fu">scale_x_datetime</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_date</span>(<span class="st">"%I:%M %p</span><span class="sc">\n</span><span class="st">%d/%m"</span>),</span>
<span id="cb25-15"><a href="#cb25-15"></a>                   <span class="at">breaks =</span> <span class="fu">seq</span>(starting_time, <span class="at">by =</span> <span class="st">"6 hours"</span>, <span class="at">length.out =</span> <span class="dv">49</span><span class="sc">/</span><span class="dv">6</span>)) <span class="sc">+</span></span>
<span id="cb25-16"><a href="#cb25-16"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb25-17"><a href="#cb25-17"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb25-18"><a href="#cb25-18"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span>
<span id="cb25-19"><a href="#cb25-19"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(plot_ct)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-a216a7a838949066fc8f" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-a216a7a838949066fc8f">{"x":{"data":[{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0,0,0,0,0,0.036,0.193,0.354,0.501,0.591,0.653,0.666,0.642,0.574,0.477,0.326,0.151,0.016,0,0,0,0,0,0,0,0,0,0,0,0.033,0.191,0.371,0.523,0.626,0.693,0.707,0.683,0.607,0.488,0.337,0.155,0.017,0,0,0,0,0,0],"text":["time: 2006-05-17 00:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-17 01:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-17 02:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-17 03:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-17 04:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-17 05:00:00<br />value:  0.0360000000<br />Approach: base","time: 2006-05-17 06:00:00<br />value:  0.1930000000<br />Approach: base","time: 2006-05-17 07:00:00<br />value:  0.3540000000<br />Approach: base","time: 2006-05-17 08:00:00<br />value:  0.5010000000<br />Approach: base","time: 2006-05-17 09:00:00<br />value:  0.5910000000<br />Approach: base","time: 2006-05-17 10:00:00<br />value:  0.6530000000<br />Approach: base","time: 2006-05-17 11:00:00<br />value:  0.6660000000<br />Approach: base","time: 2006-05-17 12:00:00<br />value:  0.6420000000<br />Approach: base","time: 2006-05-17 13:00:00<br />value:  0.5740000000<br />Approach: base","time: 2006-05-17 14:00:00<br />value:  0.4770000000<br />Approach: base","time: 2006-05-17 15:00:00<br />value:  0.3260000000<br />Approach: base","time: 2006-05-17 16:00:00<br />value:  0.1510000000<br />Approach: base","time: 2006-05-17 17:00:00<br />value:  0.0160000000<br />Approach: base","time: 2006-05-17 18:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-17 19:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-17 20:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-17 21:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-17 22:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-17 23:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-18 00:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-18 01:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-18 02:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-18 03:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-18 04:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-18 05:00:00<br />value:  0.0330000000<br />Approach: base","time: 2006-05-18 06:00:00<br />value:  0.1910000000<br />Approach: base","time: 2006-05-18 07:00:00<br />value:  0.3710000000<br />Approach: base","time: 2006-05-18 08:00:00<br />value:  0.5230000000<br />Approach: base","time: 2006-05-18 09:00:00<br />value:  0.6260000000<br />Approach: base","time: 2006-05-18 10:00:00<br />value:  0.6930000000<br />Approach: base","time: 2006-05-18 11:00:00<br />value:  0.7070000000<br />Approach: base","time: 2006-05-18 12:00:00<br />value:  0.6830000000<br />Approach: base","time: 2006-05-18 13:00:00<br />value:  0.6070000000<br />Approach: base","time: 2006-05-18 14:00:00<br />value:  0.4880000000<br />Approach: base","time: 2006-05-18 15:00:00<br />value:  0.3370000000<br />Approach: base","time: 2006-05-18 16:00:00<br />value:  0.1550000000<br />Approach: base","time: 2006-05-18 17:00:00<br />value:  0.0170000000<br />Approach: base","time: 2006-05-18 18:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-18 19:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-18 20:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-18 21:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-18 22:00:00<br />value:  0.0000000000<br />Approach: base","time: 2006-05-18 23:00:00<br />value:  0.0000000000<br />Approach: base"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"base","legendgroup":"base","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[-0.0159857338563594,-0.0165597412544239,-0.0157162077485395,-0.0161436474622588,-0.0221480273923836,-0.00348939193262981,0.137253554621405,0.299714685131989,0.451643168883748,0.549805572738078,0.616836993806439,0.6378585660194,0.629169377968659,0.577411866429824,0.4921854771311,0.34007399484642,0.163965983477662,0.0151967269627538,-0.00886760347807319,-0.0122022719649027,-0.0132160964635828,-0.013295979960045,-0.0139651928506491,-0.0132962248044023,-0.0167156489126382,-0.0174205565135859,-0.0166529341081868,-0.0165762289739978,-0.0216531414489446,-0.00650257999600988,0.132473570058812,0.30140747155362,0.447396792903784,0.549188817222578,0.618131099049271,0.641943564717448,0.635311565385952,0.581057260347325,0.481167867704927,0.338537742774657,0.162022323127348,0.0150924230191392,-0.00956680091852408,-0.0130458777187062,-0.0140544674957621,-0.0142354169861806,-0.0148129477302956,-0.014029600798982],"text":["time: 2006-05-17 00:00:00<br />value: -0.0159857339<br />Approach: cst","time: 2006-05-17 01:00:00<br />value: -0.0165597413<br />Approach: cst","time: 2006-05-17 02:00:00<br />value: -0.0157162077<br />Approach: cst","time: 2006-05-17 03:00:00<br />value: -0.0161436475<br />Approach: cst","time: 2006-05-17 04:00:00<br />value: -0.0221480274<br />Approach: cst","time: 2006-05-17 05:00:00<br />value: -0.0034893919<br />Approach: cst","time: 2006-05-17 06:00:00<br />value:  0.1372535546<br />Approach: cst","time: 2006-05-17 07:00:00<br />value:  0.2997146851<br />Approach: cst","time: 2006-05-17 08:00:00<br />value:  0.4516431689<br />Approach: cst","time: 2006-05-17 09:00:00<br />value:  0.5498055727<br />Approach: cst","time: 2006-05-17 10:00:00<br />value:  0.6168369938<br />Approach: cst","time: 2006-05-17 11:00:00<br />value:  0.6378585660<br />Approach: cst","time: 2006-05-17 12:00:00<br />value:  0.6291693780<br />Approach: cst","time: 2006-05-17 13:00:00<br />value:  0.5774118664<br />Approach: cst","time: 2006-05-17 14:00:00<br />value:  0.4921854771<br />Approach: cst","time: 2006-05-17 15:00:00<br />value:  0.3400739948<br />Approach: cst","time: 2006-05-17 16:00:00<br />value:  0.1639659835<br />Approach: cst","time: 2006-05-17 17:00:00<br />value:  0.0151967270<br />Approach: cst","time: 2006-05-17 18:00:00<br />value: -0.0088676035<br />Approach: cst","time: 2006-05-17 19:00:00<br />value: -0.0122022720<br />Approach: cst","time: 2006-05-17 20:00:00<br />value: -0.0132160965<br />Approach: cst","time: 2006-05-17 21:00:00<br />value: -0.0132959800<br />Approach: cst","time: 2006-05-17 22:00:00<br />value: -0.0139651929<br />Approach: cst","time: 2006-05-17 23:00:00<br />value: -0.0132962248<br />Approach: cst","time: 2006-05-18 00:00:00<br />value: -0.0167156489<br />Approach: cst","time: 2006-05-18 01:00:00<br />value: -0.0174205565<br />Approach: cst","time: 2006-05-18 02:00:00<br />value: -0.0166529341<br />Approach: cst","time: 2006-05-18 03:00:00<br />value: -0.0165762290<br />Approach: cst","time: 2006-05-18 04:00:00<br />value: -0.0216531414<br />Approach: cst","time: 2006-05-18 05:00:00<br />value: -0.0065025800<br />Approach: cst","time: 2006-05-18 06:00:00<br />value:  0.1324735701<br />Approach: cst","time: 2006-05-18 07:00:00<br />value:  0.3014074716<br />Approach: cst","time: 2006-05-18 08:00:00<br />value:  0.4473967929<br />Approach: cst","time: 2006-05-18 09:00:00<br />value:  0.5491888172<br />Approach: cst","time: 2006-05-18 10:00:00<br />value:  0.6181310990<br />Approach: cst","time: 2006-05-18 11:00:00<br />value:  0.6419435647<br />Approach: cst","time: 2006-05-18 12:00:00<br />value:  0.6353115654<br />Approach: cst","time: 2006-05-18 13:00:00<br />value:  0.5810572603<br />Approach: cst","time: 2006-05-18 14:00:00<br />value:  0.4811678677<br />Approach: cst","time: 2006-05-18 15:00:00<br />value:  0.3385377428<br />Approach: cst","time: 2006-05-18 16:00:00<br />value:  0.1620223231<br />Approach: cst","time: 2006-05-18 17:00:00<br />value:  0.0150924230<br />Approach: cst","time: 2006-05-18 18:00:00<br />value: -0.0095668009<br />Approach: cst","time: 2006-05-18 19:00:00<br />value: -0.0130458777<br />Approach: cst","time: 2006-05-18 20:00:00<br />value: -0.0140544675<br />Approach: cst","time: 2006-05-18 21:00:00<br />value: -0.0142354170<br />Approach: cst","time: 2006-05-18 22:00:00<br />value: -0.0148129477<br />Approach: cst","time: 2006-05-18 23:00:00<br />value: -0.0140296008<br />Approach: cst"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(196,154,0,1)","dash":"solid"},"hoveron":"points","name":"cst","legendgroup":"cst","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[-0.013311560147374,-0.014709746842777,-0.0128911554876617,-0.0124318971058253,-0.0185035051852215,0.000848123157967617,0.140377693693763,0.30290714911979,0.453774744692815,0.551791321132788,0.617385733483672,0.636689249601619,0.628974875621097,0.576217765062331,0.490675265994721,0.338081568534484,0.163856412706693,0.0162885538700163,-0.00728739407533589,-0.00970451414393704,-0.0102117446790059,-0.0104534816359155,-0.0117667220181869,-0.0103893492486578,-0.0142675250506588,-0.0160172915042166,-0.0143956079023107,-0.0134442596193906,-0.0183987325713314,-0.00213287336488314,0.135948222284596,0.305995803225506,0.451458099136776,0.553362459696459,0.620912871273282,0.643139389286755,0.63716273362824,0.581199493113956,0.481693942112952,0.338068358390434,0.162286599699436,0.0158879933572462,-0.00823624271064065,-0.0108778851450272,-0.0113894976704005,-0.0117674144456529,-0.0129482172078979,-0.0112944936334697],"text":["time: 2006-05-17 00:00:00<br />value: -0.0133115601<br />Approach: ite","time: 2006-05-17 01:00:00<br />value: -0.0147097468<br />Approach: ite","time: 2006-05-17 02:00:00<br />value: -0.0128911555<br />Approach: ite","time: 2006-05-17 03:00:00<br />value: -0.0124318971<br />Approach: ite","time: 2006-05-17 04:00:00<br />value: -0.0185035052<br />Approach: ite","time: 2006-05-17 05:00:00<br />value:  0.0008481232<br />Approach: ite","time: 2006-05-17 06:00:00<br />value:  0.1403776937<br />Approach: ite","time: 2006-05-17 07:00:00<br />value:  0.3029071491<br />Approach: ite","time: 2006-05-17 08:00:00<br />value:  0.4537747447<br />Approach: ite","time: 2006-05-17 09:00:00<br />value:  0.5517913211<br />Approach: ite","time: 2006-05-17 10:00:00<br />value:  0.6173857335<br />Approach: ite","time: 2006-05-17 11:00:00<br />value:  0.6366892496<br />Approach: ite","time: 2006-05-17 12:00:00<br />value:  0.6289748756<br />Approach: ite","time: 2006-05-17 13:00:00<br />value:  0.5762177651<br />Approach: ite","time: 2006-05-17 14:00:00<br />value:  0.4906752660<br />Approach: ite","time: 2006-05-17 15:00:00<br />value:  0.3380815685<br />Approach: ite","time: 2006-05-17 16:00:00<br />value:  0.1638564127<br />Approach: ite","time: 2006-05-17 17:00:00<br />value:  0.0162885539<br />Approach: ite","time: 2006-05-17 18:00:00<br />value: -0.0072873941<br />Approach: ite","time: 2006-05-17 19:00:00<br />value: -0.0097045141<br />Approach: ite","time: 2006-05-17 20:00:00<br />value: -0.0102117447<br />Approach: ite","time: 2006-05-17 21:00:00<br />value: -0.0104534816<br />Approach: ite","time: 2006-05-17 22:00:00<br />value: -0.0117667220<br />Approach: ite","time: 2006-05-17 23:00:00<br />value: -0.0103893492<br />Approach: ite","time: 2006-05-18 00:00:00<br />value: -0.0142675251<br />Approach: ite","time: 2006-05-18 01:00:00<br />value: -0.0160172915<br />Approach: ite","time: 2006-05-18 02:00:00<br />value: -0.0143956079<br />Approach: ite","time: 2006-05-18 03:00:00<br />value: -0.0134442596<br />Approach: ite","time: 2006-05-18 04:00:00<br />value: -0.0183987326<br />Approach: ite","time: 2006-05-18 05:00:00<br />value: -0.0021328734<br />Approach: ite","time: 2006-05-18 06:00:00<br />value:  0.1359482223<br />Approach: ite","time: 2006-05-18 07:00:00<br />value:  0.3059958032<br />Approach: ite","time: 2006-05-18 08:00:00<br />value:  0.4514580991<br />Approach: ite","time: 2006-05-18 09:00:00<br />value:  0.5533624597<br />Approach: ite","time: 2006-05-18 10:00:00<br />value:  0.6209128713<br />Approach: ite","time: 2006-05-18 11:00:00<br />value:  0.6431393893<br />Approach: ite","time: 2006-05-18 12:00:00<br />value:  0.6371627336<br />Approach: ite","time: 2006-05-18 13:00:00<br />value:  0.5811994931<br />Approach: ite","time: 2006-05-18 14:00:00<br />value:  0.4816939421<br />Approach: ite","time: 2006-05-18 15:00:00<br />value:  0.3380683584<br />Approach: ite","time: 2006-05-18 16:00:00<br />value:  0.1622865997<br />Approach: ite","time: 2006-05-18 17:00:00<br />value:  0.0158879934<br />Approach: ite","time: 2006-05-18 18:00:00<br />value: -0.0082362427<br />Approach: ite","time: 2006-05-18 19:00:00<br />value: -0.0108778851<br />Approach: ite","time: 2006-05-18 20:00:00<br />value: -0.0113894977<br />Approach: ite","time: 2006-05-18 21:00:00<br />value: -0.0117674144<br />Approach: ite","time: 2006-05-18 22:00:00<br />value: -0.0129482172<br />Approach: ite","time: 2006-05-18 23:00:00<br />value: -0.0112944936<br />Approach: ite"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(83,180,0,1)","dash":"solid"},"hoveron":"points","name":"ite","legendgroup":"ite","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0,0,0,0,0,0.011,0.156,0.27,0.432,0.57,0.634,0.672,0.662,0.55,0.45,0.332,0.152,0.02,0,0,0,0,0,0,0,0,0,0,0,0.006,0.159,0.354,0.493,0.591,0.67,0.688,0.66,0.596,0.49,0.373,0.188,0.018,0,0,0,0,0,0],"text":["time: 2006-05-17 00:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-17 01:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-17 02:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-17 03:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-17 04:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-17 05:00:00<br />value:  0.0110000000<br />Approach: obs","time: 2006-05-17 06:00:00<br />value:  0.1560000000<br />Approach: obs","time: 2006-05-17 07:00:00<br />value:  0.2700000000<br />Approach: obs","time: 2006-05-17 08:00:00<br />value:  0.4320000000<br />Approach: obs","time: 2006-05-17 09:00:00<br />value:  0.5700000000<br />Approach: obs","time: 2006-05-17 10:00:00<br />value:  0.6340000000<br />Approach: obs","time: 2006-05-17 11:00:00<br />value:  0.6720000000<br />Approach: obs","time: 2006-05-17 12:00:00<br />value:  0.6620000000<br />Approach: obs","time: 2006-05-17 13:00:00<br />value:  0.5500000000<br />Approach: obs","time: 2006-05-17 14:00:00<br />value:  0.4500000000<br />Approach: obs","time: 2006-05-17 15:00:00<br />value:  0.3320000000<br />Approach: obs","time: 2006-05-17 16:00:00<br />value:  0.1520000000<br />Approach: obs","time: 2006-05-17 17:00:00<br />value:  0.0200000000<br />Approach: obs","time: 2006-05-17 18:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-17 19:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-17 20:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-17 21:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-17 22:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-17 23:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-18 00:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-18 01:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-18 02:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-18 03:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-18 04:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-18 05:00:00<br />value:  0.0060000000<br />Approach: obs","time: 2006-05-18 06:00:00<br />value:  0.1590000000<br />Approach: obs","time: 2006-05-18 07:00:00<br />value:  0.3540000000<br />Approach: obs","time: 2006-05-18 08:00:00<br />value:  0.4930000000<br />Approach: obs","time: 2006-05-18 09:00:00<br />value:  0.5910000000<br />Approach: obs","time: 2006-05-18 10:00:00<br />value:  0.6700000000<br />Approach: obs","time: 2006-05-18 11:00:00<br />value:  0.6880000000<br />Approach: obs","time: 2006-05-18 12:00:00<br />value:  0.6600000000<br />Approach: obs","time: 2006-05-18 13:00:00<br />value:  0.5960000000<br />Approach: obs","time: 2006-05-18 14:00:00<br />value:  0.4900000000<br />Approach: obs","time: 2006-05-18 15:00:00<br />value:  0.3730000000<br />Approach: obs","time: 2006-05-18 16:00:00<br />value:  0.1880000000<br />Approach: obs","time: 2006-05-18 17:00:00<br />value:  0.0180000000<br />Approach: obs","time: 2006-05-18 18:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-18 19:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-18 20:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-18 21:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-18 22:00:00<br />value:  0.0000000000<br />Approach: obs","time: 2006-05-18 23:00:00<br />value:  0.0000000000<br />Approach: obs"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,192,148,1)","dash":"solid"},"hoveron":"points","name":"obs","legendgroup":"obs","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[-0.0153679955906507,-0.0146354495402865,-0.0137501124966259,-0.0126015501889459,-0.0212619496340709,0.00656288185128649,0.14333553953638,0.314981490935801,0.459713957899756,0.561308293506228,0.629118443311721,0.639965011413553,0.639011185860879,0.580061795871637,0.491835353116936,0.334688348695124,0.166357617729516,0.0160554173484906,-0.00879529769765974,-0.00994886935124817,-0.0104799393471798,-0.010810671118832,-0.0110151302131251,-0.0112661553895705,-0.0164734653849242,-0.0157633206429153,-0.0149419310850275,-0.0135506273479709,-0.0210732402236071,0.00272089299333134,0.138652688101988,0.318279416349465,0.458317466692196,0.565669304118973,0.63439751112147,0.650870657116735,0.652968225600893,0.585544481230991,0.483613792188802,0.333496794685918,0.163627957555079,0.0163995043144813,-0.00981813970060003,-0.0109554602322109,-0.0115488843229218,-0.0118584483255747,-0.0120685413966519,-0.0123197480565617],"text":["time: 2006-05-17 00:00:00<br />value: -0.0153679956<br />Approach: oct","time: 2006-05-17 01:00:00<br />value: -0.0146354495<br />Approach: oct","time: 2006-05-17 02:00:00<br />value: -0.0137501125<br />Approach: oct","time: 2006-05-17 03:00:00<br />value: -0.0126015502<br />Approach: oct","time: 2006-05-17 04:00:00<br />value: -0.0212619496<br />Approach: oct","time: 2006-05-17 05:00:00<br />value:  0.0065628819<br />Approach: oct","time: 2006-05-17 06:00:00<br />value:  0.1433355395<br />Approach: oct","time: 2006-05-17 07:00:00<br />value:  0.3149814909<br />Approach: oct","time: 2006-05-17 08:00:00<br />value:  0.4597139579<br />Approach: oct","time: 2006-05-17 09:00:00<br />value:  0.5613082935<br />Approach: oct","time: 2006-05-17 10:00:00<br />value:  0.6291184433<br />Approach: oct","time: 2006-05-17 11:00:00<br />value:  0.6399650114<br />Approach: oct","time: 2006-05-17 12:00:00<br />value:  0.6390111859<br />Approach: oct","time: 2006-05-17 13:00:00<br />value:  0.5800617959<br />Approach: oct","time: 2006-05-17 14:00:00<br />value:  0.4918353531<br />Approach: oct","time: 2006-05-17 15:00:00<br />value:  0.3346883487<br />Approach: oct","time: 2006-05-17 16:00:00<br />value:  0.1663576177<br />Approach: oct","time: 2006-05-17 17:00:00<br />value:  0.0160554173<br />Approach: oct","time: 2006-05-17 18:00:00<br />value: -0.0087952977<br />Approach: oct","time: 2006-05-17 19:00:00<br />value: -0.0099488694<br />Approach: oct","time: 2006-05-17 20:00:00<br />value: -0.0104799393<br />Approach: oct","time: 2006-05-17 21:00:00<br />value: -0.0108106711<br />Approach: oct","time: 2006-05-17 22:00:00<br />value: -0.0110151302<br />Approach: oct","time: 2006-05-17 23:00:00<br />value: -0.0112661554<br />Approach: oct","time: 2006-05-18 00:00:00<br />value: -0.0164734654<br />Approach: oct","time: 2006-05-18 01:00:00<br />value: -0.0157633206<br />Approach: oct","time: 2006-05-18 02:00:00<br />value: -0.0149419311<br />Approach: oct","time: 2006-05-18 03:00:00<br />value: -0.0135506273<br />Approach: oct","time: 2006-05-18 04:00:00<br />value: -0.0210732402<br />Approach: oct","time: 2006-05-18 05:00:00<br />value:  0.0027208930<br />Approach: oct","time: 2006-05-18 06:00:00<br />value:  0.1386526881<br />Approach: oct","time: 2006-05-18 07:00:00<br />value:  0.3182794163<br />Approach: oct","time: 2006-05-18 08:00:00<br />value:  0.4583174667<br />Approach: oct","time: 2006-05-18 09:00:00<br />value:  0.5656693041<br />Approach: oct","time: 2006-05-18 10:00:00<br />value:  0.6343975111<br />Approach: oct","time: 2006-05-18 11:00:00<br />value:  0.6508706571<br />Approach: oct","time: 2006-05-18 12:00:00<br />value:  0.6529682256<br />Approach: oct","time: 2006-05-18 13:00:00<br />value:  0.5855444812<br />Approach: oct","time: 2006-05-18 14:00:00<br />value:  0.4836137922<br />Approach: oct","time: 2006-05-18 15:00:00<br />value:  0.3334967947<br />Approach: oct","time: 2006-05-18 16:00:00<br />value:  0.1636279576<br />Approach: oct","time: 2006-05-18 17:00:00<br />value:  0.0163995043<br />Approach: oct","time: 2006-05-18 18:00:00<br />value: -0.0098181397<br />Approach: oct","time: 2006-05-18 19:00:00<br />value: -0.0109554602<br />Approach: oct","time: 2006-05-18 20:00:00<br />value: -0.0115488843<br />Approach: oct","time: 2006-05-18 21:00:00<br />value: -0.0118584483<br />Approach: oct","time: 2006-05-18 22:00:00<br />value: -0.0120685414<br />Approach: oct","time: 2006-05-18 23:00:00<br />value: -0.0123197481<br />Approach: oct"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,182,235,1)","dash":"solid"},"hoveron":"points","name":"oct","legendgroup":"oct","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0.000152970943901161,0.0019522590848697,0.00233186235980494,0.00186650753808485,0.00227538869115823,0.0207981659200445,0.170480219005068,0.355817603626837,0.529451244824659,0.630684743099341,0.689385299215422,0.705721928703002,0.684613646765209,0.631232948425741,0.554766807939391,0.385409360622978,0.195163521296125,0.0292903051215318,0.00527312925047107,0.00245629714614502,0.00145306319084933,0.00131345953133379,0.00131756043250657,0.000330707885140562,0.000420901735273416,0.00216910780897895,0.00250748556209451,0.00200884517786979,0.00239083868134393,0.0153873796200824,0.156717288788418,0.330772181660731,0.487397096002734,0.595375223833461,0.664990250810581,0.686545089540553,0.673208697375011,0.616801639926658,0.510536900109817,0.3649618311249,0.186562618248603,0.0290445307521658,0.00526943446601437,0.00246203143697846,0.00145781664043449,0.00131740773635949,0.00132084651096686,0.000333448617782185],"text":["time: 2006-05-17 00:00:00<br />value:  0.0001529709<br />Approach: pbu","time: 2006-05-17 01:00:00<br />value:  0.0019522591<br />Approach: pbu","time: 2006-05-17 02:00:00<br />value:  0.0023318624<br />Approach: pbu","time: 2006-05-17 03:00:00<br />value:  0.0018665075<br />Approach: pbu","time: 2006-05-17 04:00:00<br />value:  0.0022753887<br />Approach: pbu","time: 2006-05-17 05:00:00<br />value:  0.0207981659<br />Approach: pbu","time: 2006-05-17 06:00:00<br />value:  0.1704802190<br />Approach: pbu","time: 2006-05-17 07:00:00<br />value:  0.3558176036<br />Approach: pbu","time: 2006-05-17 08:00:00<br />value:  0.5294512448<br />Approach: pbu","time: 2006-05-17 09:00:00<br />value:  0.6306847431<br />Approach: pbu","time: 2006-05-17 10:00:00<br />value:  0.6893852992<br />Approach: pbu","time: 2006-05-17 11:00:00<br />value:  0.7057219287<br />Approach: pbu","time: 2006-05-17 12:00:00<br />value:  0.6846136468<br />Approach: pbu","time: 2006-05-17 13:00:00<br />value:  0.6312329484<br />Approach: pbu","time: 2006-05-17 14:00:00<br />value:  0.5547668079<br />Approach: pbu","time: 2006-05-17 15:00:00<br />value:  0.3854093606<br />Approach: pbu","time: 2006-05-17 16:00:00<br />value:  0.1951635213<br />Approach: pbu","time: 2006-05-17 17:00:00<br />value:  0.0292903051<br />Approach: pbu","time: 2006-05-17 18:00:00<br />value:  0.0052731293<br />Approach: pbu","time: 2006-05-17 19:00:00<br />value:  0.0024562971<br />Approach: pbu","time: 2006-05-17 20:00:00<br />value:  0.0014530632<br />Approach: pbu","time: 2006-05-17 21:00:00<br />value:  0.0013134595<br />Approach: pbu","time: 2006-05-17 22:00:00<br />value:  0.0013175604<br />Approach: pbu","time: 2006-05-17 23:00:00<br />value:  0.0003307079<br />Approach: pbu","time: 2006-05-18 00:00:00<br />value:  0.0004209017<br />Approach: pbu","time: 2006-05-18 01:00:00<br />value:  0.0021691078<br />Approach: pbu","time: 2006-05-18 02:00:00<br />value:  0.0025074856<br />Approach: pbu","time: 2006-05-18 03:00:00<br />value:  0.0020088452<br />Approach: pbu","time: 2006-05-18 04:00:00<br />value:  0.0023908387<br />Approach: pbu","time: 2006-05-18 05:00:00<br />value:  0.0153873796<br />Approach: pbu","time: 2006-05-18 06:00:00<br />value:  0.1567172888<br />Approach: pbu","time: 2006-05-18 07:00:00<br />value:  0.3307721817<br />Approach: pbu","time: 2006-05-18 08:00:00<br />value:  0.4873970960<br />Approach: pbu","time: 2006-05-18 09:00:00<br />value:  0.5953752238<br />Approach: pbu","time: 2006-05-18 10:00:00<br />value:  0.6649902508<br />Approach: pbu","time: 2006-05-18 11:00:00<br />value:  0.6865450895<br />Approach: pbu","time: 2006-05-18 12:00:00<br />value:  0.6732086974<br />Approach: pbu","time: 2006-05-18 13:00:00<br />value:  0.6168016399<br />Approach: pbu","time: 2006-05-18 14:00:00<br />value:  0.5105369001<br />Approach: pbu","time: 2006-05-18 15:00:00<br />value:  0.3649618311<br />Approach: pbu","time: 2006-05-18 16:00:00<br />value:  0.1865626182<br />Approach: pbu","time: 2006-05-18 17:00:00<br />value:  0.0290445308<br />Approach: pbu","time: 2006-05-18 18:00:00<br />value:  0.0052694345<br />Approach: pbu","time: 2006-05-18 19:00:00<br />value:  0.0024620314<br />Approach: pbu","time: 2006-05-18 20:00:00<br />value:  0.0014578166<br />Approach: pbu","time: 2006-05-18 21:00:00<br />value:  0.0013174077<br />Approach: pbu","time: 2006-05-18 22:00:00<br />value:  0.0013208465<br />Approach: pbu","time: 2006-05-18 23:00:00<br />value:  0.0003334486<br />Approach: pbu"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(165,138,255,1)","dash":"solid"},"hoveron":"points","name":"pbu","legendgroup":"pbu","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[-0.0131480229375368,-0.0147397224071253,-0.0129207941721862,-0.0129885023660415,-0.0209554851389164,0.00302143720044803,0.143755452048736,0.30134037820199,0.452112615762859,0.550098566283013,0.617143966503842,0.638910935804198,0.631933375762374,0.575992669393626,0.488231878495835,0.336621496769676,0.161071578360367,0.0192842020951944,-0.00620417464041445,-0.0100798236047056,-0.010386838948993,-0.0103741903406643,-0.0118142925486359,-0.0104825698359125,-0.014177624914142,-0.0160692521219269,-0.0144585791255625,-0.0137880763271211,-0.0206244022661399,-0.000667345003286551,0.137215031655977,0.30593079772277,0.450805325948251,0.552901853141457,0.621006102059227,0.643784946163428,0.63904548296545,0.580593603426119,0.480984328088067,0.337231931800589,0.159629316100561,0.0178792543438688,-0.00745683619938591,-0.0110123060175907,-0.0114558348037477,-0.0116969032779102,-0.0130218226903236,-0.0114508514744124],"text":["time: 2006-05-17 00:00:00<br />value: -0.0131480229<br />Approach: tcs","time: 2006-05-17 01:00:00<br />value: -0.0147397224<br />Approach: tcs","time: 2006-05-17 02:00:00<br />value: -0.0129207942<br />Approach: tcs","time: 2006-05-17 03:00:00<br />value: -0.0129885024<br />Approach: tcs","time: 2006-05-17 04:00:00<br />value: -0.0209554851<br />Approach: tcs","time: 2006-05-17 05:00:00<br />value:  0.0030214372<br />Approach: tcs","time: 2006-05-17 06:00:00<br />value:  0.1437554520<br />Approach: tcs","time: 2006-05-17 07:00:00<br />value:  0.3013403782<br />Approach: tcs","time: 2006-05-17 08:00:00<br />value:  0.4521126158<br />Approach: tcs","time: 2006-05-17 09:00:00<br />value:  0.5500985663<br />Approach: tcs","time: 2006-05-17 10:00:00<br />value:  0.6171439665<br />Approach: tcs","time: 2006-05-17 11:00:00<br />value:  0.6389109358<br />Approach: tcs","time: 2006-05-17 12:00:00<br />value:  0.6319333758<br />Approach: tcs","time: 2006-05-17 13:00:00<br />value:  0.5759926694<br />Approach: tcs","time: 2006-05-17 14:00:00<br />value:  0.4882318785<br />Approach: tcs","time: 2006-05-17 15:00:00<br />value:  0.3366214968<br />Approach: tcs","time: 2006-05-17 16:00:00<br />value:  0.1610715784<br />Approach: tcs","time: 2006-05-17 17:00:00<br />value:  0.0192842021<br />Approach: tcs","time: 2006-05-17 18:00:00<br />value: -0.0062041746<br />Approach: tcs","time: 2006-05-17 19:00:00<br />value: -0.0100798236<br />Approach: tcs","time: 2006-05-17 20:00:00<br />value: -0.0103868389<br />Approach: tcs","time: 2006-05-17 21:00:00<br />value: -0.0103741903<br />Approach: tcs","time: 2006-05-17 22:00:00<br />value: -0.0118142925<br />Approach: tcs","time: 2006-05-17 23:00:00<br />value: -0.0104825698<br />Approach: tcs","time: 2006-05-18 00:00:00<br />value: -0.0141776249<br />Approach: tcs","time: 2006-05-18 01:00:00<br />value: -0.0160692521<br />Approach: tcs","time: 2006-05-18 02:00:00<br />value: -0.0144585791<br />Approach: tcs","time: 2006-05-18 03:00:00<br />value: -0.0137880763<br />Approach: tcs","time: 2006-05-18 04:00:00<br />value: -0.0206244023<br />Approach: tcs","time: 2006-05-18 05:00:00<br />value: -0.0006673450<br />Approach: tcs","time: 2006-05-18 06:00:00<br />value:  0.1372150317<br />Approach: tcs","time: 2006-05-18 07:00:00<br />value:  0.3059307977<br />Approach: tcs","time: 2006-05-18 08:00:00<br />value:  0.4508053259<br />Approach: tcs","time: 2006-05-18 09:00:00<br />value:  0.5529018531<br />Approach: tcs","time: 2006-05-18 10:00:00<br />value:  0.6210061021<br />Approach: tcs","time: 2006-05-18 11:00:00<br />value:  0.6437849462<br />Approach: tcs","time: 2006-05-18 12:00:00<br />value:  0.6390454830<br />Approach: tcs","time: 2006-05-18 13:00:00<br />value:  0.5805936034<br />Approach: tcs","time: 2006-05-18 14:00:00<br />value:  0.4809843281<br />Approach: tcs","time: 2006-05-18 15:00:00<br />value:  0.3372319318<br />Approach: tcs","time: 2006-05-18 16:00:00<br />value:  0.1596293161<br />Approach: tcs","time: 2006-05-18 17:00:00<br />value:  0.0178792543<br />Approach: tcs","time: 2006-05-18 18:00:00<br />value: -0.0074568362<br />Approach: tcs","time: 2006-05-18 19:00:00<br />value: -0.0110123060<br />Approach: tcs","time: 2006-05-18 20:00:00<br />value: -0.0114558348<br />Approach: tcs","time: 2006-05-18 21:00:00<br />value: -0.0116969033<br />Approach: tcs","time: 2006-05-18 22:00:00<br />value: -0.0130218227<br />Approach: tcs","time: 2006-05-18 23:00:00<br />value: -0.0114508515<br />Approach: tcs"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(251,97,215,1)","dash":"solid"},"hoveron":"points","name":"tcs","legendgroup":"tcs","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":25.5707762557078,"l":28.4931506849315},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1147815540,1148001660],"tickmode":"array","ticktext":["12:00 AM<br />17/05","06:00 AM<br />17/05","12:00 PM<br />17/05","06:00 PM<br />17/05","12:00 AM<br />18/05","06:00 AM<br />18/05","12:00 PM<br />18/05","06:00 PM<br />18/05","12:00 AM<br />19/05"],"tickvals":[1147824000,1147845600,1147867200,1147888800,1147910400,1147932000,1147953600,1147975200,1147996800],"categoryorder":"array","categoryarray":["12:00 AM<br />17/05","06:00 AM<br />17/05","12:00 PM<br />17/05","06:00 PM<br />17/05","12:00 AM<br />18/05","06:00 AM<br />18/05","12:00 PM<br />18/05","06:00 PM<br />18/05","12:00 AM<br />19/05"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.0586054287620028,0.743457401369619],"tickmode":"array","ticktext":["0.0","0.2","0.4","0.6"],"tickvals":[0,0.2,0.4,0.6],"categoryorder":"array","categoryarray":["0.0","0.2","0.4","0.6"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"Approach","font":{"color":null,"family":null,"size":0}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"c1361dbfd28":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"c1361dbfd28","visdat":{"c1361dbfd28":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Root mean square error:</p>
<div class="cell" data-hash="lab_session_cache/html/score_ct_13894bb4ebfcbebdb53d7e3686bc2792">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>score_ct <span class="ot">&lt;-</span> data_ct <span class="sc">|&gt;</span></span>
<span id="cb26-2"><a href="#cb26-2"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span><span class="fu">c</span>(time, obs), <span class="at">names_to =</span> <span class="st">"Approach"</span>) <span class="sc">|&gt;</span></span>
<span id="cb26-3"><a href="#cb26-3"></a>  <span class="fu">group_by</span>(Approach) <span class="sc">|&gt;</span></span>
<span id="cb26-4"><a href="#cb26-4"></a>  <span class="fu">summarise</span>(<span class="at">RMSE =</span> <span class="fu">sqrt</span>(<span class="fu">mean</span>((value<span class="sc">-</span>obs)<span class="sc">^</span><span class="dv">2</span>)))</span>
<span id="cb26-5"><a href="#cb26-5"></a>score_ct</span>
<span id="cb26-6"><a href="#cb26-6"></a><span class="co">#&gt; # A tibble: 6 × 2</span></span>
<span id="cb26-7"><a href="#cb26-7"></a><span class="co">#&gt;   Approach   RMSE</span></span>
<span id="cb26-8"><a href="#cb26-8"></a><span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt;</span></span>
<span id="cb26-9"><a href="#cb26-9"></a><span class="co">#&gt; 1 base     0.0226</span></span>
<span id="cb26-10"><a href="#cb26-10"></a><span class="co">#&gt; 2 cst      0.0240</span></span>
<span id="cb26-11"><a href="#cb26-11"></a><span class="co">#&gt; 3 ite      0.0224</span></span>
<span id="cb26-12"><a href="#cb26-12"></a><span class="co">#&gt; 4 oct      0.0205</span></span>
<span id="cb26-13"><a href="#cb26-13"></a><span class="co">#&gt; 5 pbu      0.0323</span></span>
<span id="cb26-14"><a href="#cb26-14"></a><span class="co">#&gt; 6 tcs      0.0222</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section></section><section id="practical-challenges" class="level2"><h2 class="anchored" data-anchor-id="practical-challenges">Practical challenges</h2>
<section id="non-negativity-issues" class="level3"><h3 class="anchored" data-anchor-id="non-negativity-issues">Non negativity issues</h3>
<p>As we have seen in the previous plots, a major concern when reconciling this type of data is the presence of negative values. It is worth noting that this occurs even when the reconciliation procedure works with non-negative base forecasts. To address this issue, <code>FoReco</code> offers two options: <strong>osqp</strong> and <strong>sntz</strong>. The former is an optimization approach with non-negativity constraints using the <a href="https://CRAN.R-project.org/package=osqp">R package</a> <code>osqp</code> (Stellato et al.&nbsp;2020). The latter is a simple heuristic that exploits the hierarchical nature of the data: any negative forecasts for the high-frequency bottom time series are set to zero, and then a cross-temporal bottom-up procedure is applied to obtain the complete set of fully (and non-negative) coherent forecasts.</p>
<div class="cell" data-hash="lab_session_cache/html/osqp_0f1cff1f97c2fee5f0d9c989f8a019ed">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="fu">system.time</span>(osqp_cs <span class="ot">&lt;-</span> <span class="fu">htsrec</span>(<span class="at">basef =</span> base_cs, <span class="at">C =</span> C, <span class="at">comb =</span> <span class="st">"shr"</span>, </span>
<span id="cb27-2"><a href="#cb27-2"></a>                              <span class="at">res =</span> res_cs, <span class="at">keep =</span> <span class="st">"recf"</span>,</span>
<span id="cb27-3"><a href="#cb27-3"></a>                              <span class="co">#nn_type = "osqp",</span></span>
<span id="cb27-4"><a href="#cb27-4"></a>                              <span class="at">settings =</span><span class="fu">list</span>(<span class="at">check_termination =</span> <span class="dv">5</span>, </span>
<span id="cb27-5"><a href="#cb27-5"></a>                                             <span class="at">verbose =</span> <span class="cn">FALSE</span>, </span>
<span id="cb27-6"><a href="#cb27-6"></a>                                             <span class="at">polish =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-7"><a href="#cb27-7"></a>                              <span class="at">nn =</span> <span class="cn">TRUE</span>))</span>
<span id="cb27-8"><a href="#cb27-8"></a><span class="co">#&gt;    user  system elapsed </span></span>
<span id="cb27-9"><a href="#cb27-9"></a><span class="co">#&gt;   0.756   0.071   0.845</span></span>
<span id="cb27-10"><a href="#cb27-10"></a></span>
<span id="cb27-11"><a href="#cb27-11"></a><span class="fu">system.time</span>(osqp_te <span class="ot">&lt;-</span> <span class="fu">thfrec</span>(<span class="at">basef =</span> base_te, <span class="at">m =</span> m, <span class="at">comb =</span> <span class="st">"sar1"</span>, </span>
<span id="cb27-12"><a href="#cb27-12"></a>                              <span class="at">res =</span> res_te, <span class="at">keep =</span> <span class="st">"recf"</span>,</span>
<span id="cb27-13"><a href="#cb27-13"></a>                              <span class="co">#nn_type = "osqp",</span></span>
<span id="cb27-14"><a href="#cb27-14"></a>                              <span class="at">settings =</span><span class="fu">list</span>(<span class="at">check_termination =</span> <span class="dv">5</span>, </span>
<span id="cb27-15"><a href="#cb27-15"></a>                                             <span class="at">verbose =</span> <span class="cn">FALSE</span>, </span>
<span id="cb27-16"><a href="#cb27-16"></a>                                             <span class="at">polish =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-17"><a href="#cb27-17"></a>                              <span class="at">nn =</span> <span class="cn">TRUE</span>))</span>
<span id="cb27-18"><a href="#cb27-18"></a><span class="co">#&gt; as(&lt;dsCMatrix&gt;, "dgCMatrix") is deprecated since Matrix 1.5-0; do as(., "generalMatrix") instead</span></span>
<span id="cb27-19"><a href="#cb27-19"></a><span class="co">#&gt;    user  system elapsed </span></span>
<span id="cb27-20"><a href="#cb27-20"></a><span class="co">#&gt;   0.033   0.001   0.035</span></span>
<span id="cb27-21"><a href="#cb27-21"></a></span>
<span id="cb27-22"><a href="#cb27-22"></a><span class="fu">system.time</span>(osqp_ct <span class="ot">&lt;-</span> <span class="fu">octrec</span>(<span class="at">basef =</span> base_ct, <span class="at">m =</span> m, <span class="at">C =</span> C, <span class="at">comb =</span> <span class="st">"wlsv"</span>, </span>
<span id="cb27-23"><a href="#cb27-23"></a>                              <span class="at">res =</span> res_ct, <span class="at">keep =</span> <span class="st">"recf"</span>,</span>
<span id="cb27-24"><a href="#cb27-24"></a>                              <span class="co">#nn_type = "osqp",</span></span>
<span id="cb27-25"><a href="#cb27-25"></a>                              <span class="at">settings =</span><span class="fu">list</span>(<span class="at">check_termination =</span> <span class="dv">5</span>, </span>
<span id="cb27-26"><a href="#cb27-26"></a>                                             <span class="at">verbose =</span> <span class="cn">FALSE</span>, </span>
<span id="cb27-27"><a href="#cb27-27"></a>                                             <span class="at">polish =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-28"><a href="#cb27-28"></a>                              <span class="at">nn =</span> <span class="cn">TRUE</span>))</span>
<span id="cb27-29"><a href="#cb27-29"></a><span class="co">#&gt;    user  system elapsed </span></span>
<span id="cb27-30"><a href="#cb27-30"></a><span class="co">#&gt;   0.449   0.066   0.516</span></span>
<span id="cb27-31"><a href="#cb27-31"></a></span>
<span id="cb27-32"><a href="#cb27-32"></a>osqp_ct<span class="sc">$</span>info</span>
<span id="cb27-33"><a href="#cb27-33"></a><span class="co">#&gt;     obj_val  run_time iter      pri_res status status_polish</span></span>
<span id="cb27-34"><a href="#cb27-34"></a><span class="co">#&gt; 1 -556926.7 0.1240961   20 3.950174e-13      1             1</span></span>
<span id="cb27-35"><a href="#cb27-35"></a><span class="co">#&gt; 2 -594544.7 0.1186128   20 3.979039e-13      1             1</span></span>
<span id="cb27-36"><a href="#cb27-36"></a><span class="fu">discrepancy</span>(osqp_ct<span class="sc">$</span>recf)</span>
<span id="cb27-37"><a href="#cb27-37"></a><span class="co">#&gt; cs discrepancy: 0 </span></span>
<span id="cb27-38"><a href="#cb27-38"></a><span class="co">#&gt; te discrepancy: 0</span></span>
<span id="cb27-39"><a href="#cb27-39"></a><span class="fu">all</span>(osqp_ct<span class="sc">$</span>recf<span class="sc">&gt;=</span><span class="dv">0</span>)</span>
<span id="cb27-40"><a href="#cb27-40"></a><span class="co">#&gt; [1] TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="lab_session_cache/html/sntz_fec2cf2fa693e1abb84c9b53d1b92bbc">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="fu">system.time</span>(sntz_cs <span class="ot">&lt;-</span> <span class="fu">htsrec</span>(<span class="at">basef =</span> base_cs, <span class="at">C =</span> C, <span class="at">comb =</span> <span class="st">"shr"</span>, </span>
<span id="cb28-2"><a href="#cb28-2"></a>                              <span class="at">res =</span> res_cs, <span class="at">keep =</span> <span class="st">"recf"</span>,</span>
<span id="cb28-3"><a href="#cb28-3"></a>                              <span class="at">nn_type =</span> <span class="st">"sntz"</span>,</span>
<span id="cb28-4"><a href="#cb28-4"></a>                              <span class="at">nn =</span> <span class="cn">TRUE</span>))</span>
<span id="cb28-5"><a href="#cb28-5"></a><span class="co">#&gt;    user  system elapsed </span></span>
<span id="cb28-6"><a href="#cb28-6"></a><span class="co">#&gt;   0.086   0.006   0.092</span></span>
<span id="cb28-7"><a href="#cb28-7"></a><span class="fu">system.time</span>(sntz_te <span class="ot">&lt;-</span> <span class="fu">thfrec</span>(<span class="at">basef =</span> base_te, <span class="at">m =</span> m, <span class="at">comb =</span> <span class="st">"sar1"</span>, </span>
<span id="cb28-8"><a href="#cb28-8"></a>                              <span class="at">res =</span> res_te, <span class="at">keep =</span> <span class="st">"recf"</span>,</span>
<span id="cb28-9"><a href="#cb28-9"></a>                              <span class="at">nn_type =</span> <span class="st">"sntz"</span>,</span>
<span id="cb28-10"><a href="#cb28-10"></a>                              <span class="at">nn =</span> <span class="cn">TRUE</span>))</span>
<span id="cb28-11"><a href="#cb28-11"></a><span class="co">#&gt;    user  system elapsed </span></span>
<span id="cb28-12"><a href="#cb28-12"></a><span class="co">#&gt;   0.019   0.000   0.018</span></span>
<span id="cb28-13"><a href="#cb28-13"></a><span class="fu">system.time</span>(sntz_ct <span class="ot">&lt;-</span> <span class="fu">octrec</span>(<span class="at">basef =</span> base_ct, <span class="at">m =</span> m, <span class="at">C =</span> C, <span class="at">comb =</span> <span class="st">"wlsv"</span>, </span>
<span id="cb28-14"><a href="#cb28-14"></a>                              <span class="at">res =</span> res_ct, <span class="at">keep =</span> <span class="st">"recf"</span>,</span>
<span id="cb28-15"><a href="#cb28-15"></a>                              <span class="at">nn_type =</span> <span class="st">"sntz"</span>,</span>
<span id="cb28-16"><a href="#cb28-16"></a>                              <span class="at">nn =</span> <span class="cn">TRUE</span>))</span>
<span id="cb28-17"><a href="#cb28-17"></a><span class="co">#&gt;    user  system elapsed </span></span>
<span id="cb28-18"><a href="#cb28-18"></a><span class="co">#&gt;   0.206   0.033   0.240</span></span>
<span id="cb28-19"><a href="#cb28-19"></a><span class="fu">discrepancy</span>(sntz_ct)</span>
<span id="cb28-20"><a href="#cb28-20"></a><span class="co">#&gt; cs discrepancy: 0 </span></span>
<span id="cb28-21"><a href="#cb28-21"></a><span class="co">#&gt; te discrepancy: 0</span></span>
<span id="cb28-22"><a href="#cb28-22"></a><span class="fu">all</span>(sntz_ct<span class="sc">&gt;=</span><span class="dv">0</span>)</span>
<span id="cb28-23"><a href="#cb28-23"></a><span class="co">#&gt; [1] TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="lab_session_cache/html/plot_ct_nn_4034c00641b70fb59c45cefd7612b41d">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>data_ct_nn <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"oct-free"</span> <span class="ot">=</span> <span class="fu">FoReco2ts</span>(reco_ct)<span class="sc">$</span>k1[, id_serie],</span>
<span id="cb29-2"><a href="#cb29-2"></a>                     <span class="st">"oct-osqp"</span> <span class="ot">=</span> <span class="fu">FoReco2ts</span>(osqp_ct<span class="sc">$</span>recf)<span class="sc">$</span>k1[, id_serie],</span>
<span id="cb29-3"><a href="#cb29-3"></a>                     <span class="st">"oct-sntz"</span> <span class="ot">=</span> <span class="fu">FoReco2ts</span>(sntz_ct)<span class="sc">$</span>k1[, id_serie],</span>
<span id="cb29-4"><a href="#cb29-4"></a>                     <span class="at">base =</span> <span class="fu">as.numeric</span>(<span class="fu">FoReco2ts</span>(base_te)<span class="sc">$</span>k1),</span>
<span id="cb29-5"><a href="#cb29-5"></a>                     <span class="at">obs =</span> hourly_obs[, id_serie],</span>
<span id="cb29-6"><a href="#cb29-6"></a>                     <span class="at">time =</span> <span class="fu">seq</span>(<span class="at">from=</span>starting_time, <span class="at">by=</span><span class="st">"hour"</span>, </span>
<span id="cb29-7"><a href="#cb29-7"></a>                                <span class="at">length.out =</span> <span class="dv">48</span>))</span>
<span id="cb29-8"><a href="#cb29-8"></a>plot_ct_nn <span class="ot">&lt;-</span> data_ct_nn <span class="sc">|&gt;</span></span>
<span id="cb29-9"><a href="#cb29-9"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>time, <span class="at">names_to =</span> <span class="st">"Approach"</span>) <span class="sc">|&gt;</span></span>
<span id="cb29-10"><a href="#cb29-10"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> value, <span class="at">col =</span> Approach)) <span class="sc">+</span></span>
<span id="cb29-11"><a href="#cb29-11"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb29-12"><a href="#cb29-12"></a>  <span class="fu">scale_x_datetime</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_date</span>(<span class="st">"%I:%M %p</span><span class="sc">\n</span><span class="st">%d/%m"</span>),</span>
<span id="cb29-13"><a href="#cb29-13"></a>                   <span class="at">breaks =</span> <span class="fu">seq</span>(starting_time, <span class="at">by =</span> <span class="st">"6 hours"</span>, <span class="at">length.out =</span> <span class="dv">49</span><span class="sc">/</span><span class="dv">6</span>)) <span class="sc">+</span></span>
<span id="cb29-14"><a href="#cb29-14"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb29-15"><a href="#cb29-15"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb29-16"><a href="#cb29-16"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span>
<span id="cb29-17"><a href="#cb29-17"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(plot_ct_nn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-b85ad47acc812f004497" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-b85ad47acc812f004497">{"x":{"data":[{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0,0,0,0,0,0.036,0.193,0.354,0.501,0.591,0.653,0.666,0.642,0.574,0.477,0.326,0.151,0.016,0,0,0,0,0,0,0,0,0,0,0,0.033,0.191,0.371,0.523,0.626,0.693,0.707,0.683,0.607,0.488,0.337,0.155,0.017,0,0,0,0,0,0],"text":["time: 2006-05-17 00:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-17 01:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-17 02:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-17 03:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-17 04:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-17 05:00:00<br />value:  3.600000e-02<br />Approach: base","time: 2006-05-17 06:00:00<br />value:  1.930000e-01<br />Approach: base","time: 2006-05-17 07:00:00<br />value:  3.540000e-01<br />Approach: base","time: 2006-05-17 08:00:00<br />value:  5.010000e-01<br />Approach: base","time: 2006-05-17 09:00:00<br />value:  5.910000e-01<br />Approach: base","time: 2006-05-17 10:00:00<br />value:  6.530000e-01<br />Approach: base","time: 2006-05-17 11:00:00<br />value:  6.660000e-01<br />Approach: base","time: 2006-05-17 12:00:00<br />value:  6.420000e-01<br />Approach: base","time: 2006-05-17 13:00:00<br />value:  5.740000e-01<br />Approach: base","time: 2006-05-17 14:00:00<br />value:  4.770000e-01<br />Approach: base","time: 2006-05-17 15:00:00<br />value:  3.260000e-01<br />Approach: base","time: 2006-05-17 16:00:00<br />value:  1.510000e-01<br />Approach: base","time: 2006-05-17 17:00:00<br />value:  1.600000e-02<br />Approach: base","time: 2006-05-17 18:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-17 19:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-17 20:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-17 21:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-17 22:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-17 23:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-18 00:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-18 01:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-18 02:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-18 03:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-18 04:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-18 05:00:00<br />value:  3.300000e-02<br />Approach: base","time: 2006-05-18 06:00:00<br />value:  1.910000e-01<br />Approach: base","time: 2006-05-18 07:00:00<br />value:  3.710000e-01<br />Approach: base","time: 2006-05-18 08:00:00<br />value:  5.230000e-01<br />Approach: base","time: 2006-05-18 09:00:00<br />value:  6.260000e-01<br />Approach: base","time: 2006-05-18 10:00:00<br />value:  6.930000e-01<br />Approach: base","time: 2006-05-18 11:00:00<br />value:  7.070000e-01<br />Approach: base","time: 2006-05-18 12:00:00<br />value:  6.830000e-01<br />Approach: base","time: 2006-05-18 13:00:00<br />value:  6.070000e-01<br />Approach: base","time: 2006-05-18 14:00:00<br />value:  4.880000e-01<br />Approach: base","time: 2006-05-18 15:00:00<br />value:  3.370000e-01<br />Approach: base","time: 2006-05-18 16:00:00<br />value:  1.550000e-01<br />Approach: base","time: 2006-05-18 17:00:00<br />value:  1.700000e-02<br />Approach: base","time: 2006-05-18 18:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-18 19:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-18 20:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-18 21:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-18 22:00:00<br />value:  0.000000e+00<br />Approach: base","time: 2006-05-18 23:00:00<br />value:  0.000000e+00<br />Approach: base"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"base","legendgroup":"base","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0,0,0,0,0,0.011,0.156,0.27,0.432,0.57,0.634,0.672,0.662,0.55,0.45,0.332,0.152,0.02,0,0,0,0,0,0,0,0,0,0,0,0.006,0.159,0.354,0.493,0.591,0.67,0.688,0.66,0.596,0.49,0.373,0.188,0.018,0,0,0,0,0,0],"text":["time: 2006-05-17 00:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-17 01:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-17 02:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-17 03:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-17 04:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-17 05:00:00<br />value:  1.100000e-02<br />Approach: obs","time: 2006-05-17 06:00:00<br />value:  1.560000e-01<br />Approach: obs","time: 2006-05-17 07:00:00<br />value:  2.700000e-01<br />Approach: obs","time: 2006-05-17 08:00:00<br />value:  4.320000e-01<br />Approach: obs","time: 2006-05-17 09:00:00<br />value:  5.700000e-01<br />Approach: obs","time: 2006-05-17 10:00:00<br />value:  6.340000e-01<br />Approach: obs","time: 2006-05-17 11:00:00<br />value:  6.720000e-01<br />Approach: obs","time: 2006-05-17 12:00:00<br />value:  6.620000e-01<br />Approach: obs","time: 2006-05-17 13:00:00<br />value:  5.500000e-01<br />Approach: obs","time: 2006-05-17 14:00:00<br />value:  4.500000e-01<br />Approach: obs","time: 2006-05-17 15:00:00<br />value:  3.320000e-01<br />Approach: obs","time: 2006-05-17 16:00:00<br />value:  1.520000e-01<br />Approach: obs","time: 2006-05-17 17:00:00<br />value:  2.000000e-02<br />Approach: obs","time: 2006-05-17 18:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-17 19:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-17 20:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-17 21:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-17 22:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-17 23:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-18 00:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-18 01:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-18 02:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-18 03:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-18 04:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-18 05:00:00<br />value:  6.000000e-03<br />Approach: obs","time: 2006-05-18 06:00:00<br />value:  1.590000e-01<br />Approach: obs","time: 2006-05-18 07:00:00<br />value:  3.540000e-01<br />Approach: obs","time: 2006-05-18 08:00:00<br />value:  4.930000e-01<br />Approach: obs","time: 2006-05-18 09:00:00<br />value:  5.910000e-01<br />Approach: obs","time: 2006-05-18 10:00:00<br />value:  6.700000e-01<br />Approach: obs","time: 2006-05-18 11:00:00<br />value:  6.880000e-01<br />Approach: obs","time: 2006-05-18 12:00:00<br />value:  6.600000e-01<br />Approach: obs","time: 2006-05-18 13:00:00<br />value:  5.960000e-01<br />Approach: obs","time: 2006-05-18 14:00:00<br />value:  4.900000e-01<br />Approach: obs","time: 2006-05-18 15:00:00<br />value:  3.730000e-01<br />Approach: obs","time: 2006-05-18 16:00:00<br />value:  1.880000e-01<br />Approach: obs","time: 2006-05-18 17:00:00<br />value:  1.800000e-02<br />Approach: obs","time: 2006-05-18 18:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-18 19:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-18 20:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-18 21:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-18 22:00:00<br />value:  0.000000e+00<br />Approach: obs","time: 2006-05-18 23:00:00<br />value:  0.000000e+00<br />Approach: obs"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(163,165,0,1)","dash":"solid"},"hoveron":"points","name":"obs","legendgroup":"obs","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[-0.0153679955906507,-0.0146354495402865,-0.0137501124966259,-0.0126015501889459,-0.0212619496340709,0.00656288185128649,0.14333553953638,0.314981490935801,0.459713957899756,0.561308293506228,0.629118443311721,0.639965011413553,0.639011185860879,0.580061795871637,0.491835353116936,0.334688348695124,0.166357617729516,0.0160554173484906,-0.00879529769765974,-0.00994886935124817,-0.0104799393471798,-0.010810671118832,-0.0110151302131251,-0.0112661553895705,-0.0164734653849242,-0.0157633206429153,-0.0149419310850275,-0.0135506273479709,-0.0210732402236071,0.00272089299333134,0.138652688101988,0.318279416349465,0.458317466692196,0.565669304118973,0.63439751112147,0.650870657116735,0.652968225600893,0.585544481230991,0.483613792188802,0.333496794685918,0.163627957555079,0.0163995043144813,-0.00981813970060003,-0.0109554602322109,-0.0115488843229218,-0.0118584483255747,-0.0120685413966519,-0.0123197480565617],"text":["time: 2006-05-17 00:00:00<br />value: -1.536800e-02<br />Approach: oct-free","time: 2006-05-17 01:00:00<br />value: -1.463545e-02<br />Approach: oct-free","time: 2006-05-17 02:00:00<br />value: -1.375011e-02<br />Approach: oct-free","time: 2006-05-17 03:00:00<br />value: -1.260155e-02<br />Approach: oct-free","time: 2006-05-17 04:00:00<br />value: -2.126195e-02<br />Approach: oct-free","time: 2006-05-17 05:00:00<br />value:  6.562882e-03<br />Approach: oct-free","time: 2006-05-17 06:00:00<br />value:  1.433355e-01<br />Approach: oct-free","time: 2006-05-17 07:00:00<br />value:  3.149815e-01<br />Approach: oct-free","time: 2006-05-17 08:00:00<br />value:  4.597140e-01<br />Approach: oct-free","time: 2006-05-17 09:00:00<br />value:  5.613083e-01<br />Approach: oct-free","time: 2006-05-17 10:00:00<br />value:  6.291184e-01<br />Approach: oct-free","time: 2006-05-17 11:00:00<br />value:  6.399650e-01<br />Approach: oct-free","time: 2006-05-17 12:00:00<br />value:  6.390112e-01<br />Approach: oct-free","time: 2006-05-17 13:00:00<br />value:  5.800618e-01<br />Approach: oct-free","time: 2006-05-17 14:00:00<br />value:  4.918354e-01<br />Approach: oct-free","time: 2006-05-17 15:00:00<br />value:  3.346883e-01<br />Approach: oct-free","time: 2006-05-17 16:00:00<br />value:  1.663576e-01<br />Approach: oct-free","time: 2006-05-17 17:00:00<br />value:  1.605542e-02<br />Approach: oct-free","time: 2006-05-17 18:00:00<br />value: -8.795298e-03<br />Approach: oct-free","time: 2006-05-17 19:00:00<br />value: -9.948869e-03<br />Approach: oct-free","time: 2006-05-17 20:00:00<br />value: -1.047994e-02<br />Approach: oct-free","time: 2006-05-17 21:00:00<br />value: -1.081067e-02<br />Approach: oct-free","time: 2006-05-17 22:00:00<br />value: -1.101513e-02<br />Approach: oct-free","time: 2006-05-17 23:00:00<br />value: -1.126616e-02<br />Approach: oct-free","time: 2006-05-18 00:00:00<br />value: -1.647347e-02<br />Approach: oct-free","time: 2006-05-18 01:00:00<br />value: -1.576332e-02<br />Approach: oct-free","time: 2006-05-18 02:00:00<br />value: -1.494193e-02<br />Approach: oct-free","time: 2006-05-18 03:00:00<br />value: -1.355063e-02<br />Approach: oct-free","time: 2006-05-18 04:00:00<br />value: -2.107324e-02<br />Approach: oct-free","time: 2006-05-18 05:00:00<br />value:  2.720893e-03<br />Approach: oct-free","time: 2006-05-18 06:00:00<br />value:  1.386527e-01<br />Approach: oct-free","time: 2006-05-18 07:00:00<br />value:  3.182794e-01<br />Approach: oct-free","time: 2006-05-18 08:00:00<br />value:  4.583175e-01<br />Approach: oct-free","time: 2006-05-18 09:00:00<br />value:  5.656693e-01<br />Approach: oct-free","time: 2006-05-18 10:00:00<br />value:  6.343975e-01<br />Approach: oct-free","time: 2006-05-18 11:00:00<br />value:  6.508707e-01<br />Approach: oct-free","time: 2006-05-18 12:00:00<br />value:  6.529682e-01<br />Approach: oct-free","time: 2006-05-18 13:00:00<br />value:  5.855445e-01<br />Approach: oct-free","time: 2006-05-18 14:00:00<br />value:  4.836138e-01<br />Approach: oct-free","time: 2006-05-18 15:00:00<br />value:  3.334968e-01<br />Approach: oct-free","time: 2006-05-18 16:00:00<br />value:  1.636280e-01<br />Approach: oct-free","time: 2006-05-18 17:00:00<br />value:  1.639950e-02<br />Approach: oct-free","time: 2006-05-18 18:00:00<br />value: -9.818140e-03<br />Approach: oct-free","time: 2006-05-18 19:00:00<br />value: -1.095546e-02<br />Approach: oct-free","time: 2006-05-18 20:00:00<br />value: -1.154888e-02<br />Approach: oct-free","time: 2006-05-18 21:00:00<br />value: -1.185845e-02<br />Approach: oct-free","time: 2006-05-18 22:00:00<br />value: -1.206854e-02<br />Approach: oct-free","time: 2006-05-18 23:00:00<br />value: -1.231975e-02<br />Approach: oct-free"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,191,125,1)","dash":"solid"},"hoveron":"points","name":"oct-free","legendgroup":"oct-free","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[5.72955050118739e-15,5.73723876231078e-15,5.56287707919279e-15,5.69187790215978e-15,5.21932508598006e-15,4.17239528733625e-15,0.139489893298499,0.311247489063521,0.459079277544289,0.559826584436389,0.62782483682871,0.63867140493054,0.637870313292061,0.57892092330282,0.49050466001218,0.334214231141513,0.162690873683001,0.0123852644078758,5.02922413393444e-15,5.07768568021499e-15,5.48593796602402e-15,5.50319022131256e-15,5.49976437220907e-15,5.49911424367625e-15,5.69573265181107e-15,5.65601768408192e-15,5.70621598529437e-15,5.67703800511921e-15,5.23973085575814e-15,4.06437990636986e-15,0.134117106104127,0.314156459342042,0.457659882897712,0.564021715465584,0.632970580533519,0.649443726528782,0.651714305579899,0.584290561209998,0.482154838430431,0.332969625889804,0.15959888281634,0.0123670066252693,4.95929808334635e-15,5.05181916379155e-15,5.40214356565414e-15,5.37062576660501e-15,5.36333854626913e-15,5.43598048757936e-15],"text":["time: 2006-05-17 00:00:00<br />value:  5.729551e-15<br />Approach: oct-osqp","time: 2006-05-17 01:00:00<br />value:  5.737239e-15<br />Approach: oct-osqp","time: 2006-05-17 02:00:00<br />value:  5.562877e-15<br />Approach: oct-osqp","time: 2006-05-17 03:00:00<br />value:  5.691878e-15<br />Approach: oct-osqp","time: 2006-05-17 04:00:00<br />value:  5.219325e-15<br />Approach: oct-osqp","time: 2006-05-17 05:00:00<br />value:  4.172395e-15<br />Approach: oct-osqp","time: 2006-05-17 06:00:00<br />value:  1.394899e-01<br />Approach: oct-osqp","time: 2006-05-17 07:00:00<br />value:  3.112475e-01<br />Approach: oct-osqp","time: 2006-05-17 08:00:00<br />value:  4.590793e-01<br />Approach: oct-osqp","time: 2006-05-17 09:00:00<br />value:  5.598266e-01<br />Approach: oct-osqp","time: 2006-05-17 10:00:00<br />value:  6.278248e-01<br />Approach: oct-osqp","time: 2006-05-17 11:00:00<br />value:  6.386714e-01<br />Approach: oct-osqp","time: 2006-05-17 12:00:00<br />value:  6.378703e-01<br />Approach: oct-osqp","time: 2006-05-17 13:00:00<br />value:  5.789209e-01<br />Approach: oct-osqp","time: 2006-05-17 14:00:00<br />value:  4.905047e-01<br />Approach: oct-osqp","time: 2006-05-17 15:00:00<br />value:  3.342142e-01<br />Approach: oct-osqp","time: 2006-05-17 16:00:00<br />value:  1.626909e-01<br />Approach: oct-osqp","time: 2006-05-17 17:00:00<br />value:  1.238526e-02<br />Approach: oct-osqp","time: 2006-05-17 18:00:00<br />value:  5.029224e-15<br />Approach: oct-osqp","time: 2006-05-17 19:00:00<br />value:  5.077686e-15<br />Approach: oct-osqp","time: 2006-05-17 20:00:00<br />value:  5.485938e-15<br />Approach: oct-osqp","time: 2006-05-17 21:00:00<br />value:  5.503190e-15<br />Approach: oct-osqp","time: 2006-05-17 22:00:00<br />value:  5.499764e-15<br />Approach: oct-osqp","time: 2006-05-17 23:00:00<br />value:  5.499114e-15<br />Approach: oct-osqp","time: 2006-05-18 00:00:00<br />value:  5.695733e-15<br />Approach: oct-osqp","time: 2006-05-18 01:00:00<br />value:  5.656018e-15<br />Approach: oct-osqp","time: 2006-05-18 02:00:00<br />value:  5.706216e-15<br />Approach: oct-osqp","time: 2006-05-18 03:00:00<br />value:  5.677038e-15<br />Approach: oct-osqp","time: 2006-05-18 04:00:00<br />value:  5.239731e-15<br />Approach: oct-osqp","time: 2006-05-18 05:00:00<br />value:  4.064380e-15<br />Approach: oct-osqp","time: 2006-05-18 06:00:00<br />value:  1.341171e-01<br />Approach: oct-osqp","time: 2006-05-18 07:00:00<br />value:  3.141565e-01<br />Approach: oct-osqp","time: 2006-05-18 08:00:00<br />value:  4.576599e-01<br />Approach: oct-osqp","time: 2006-05-18 09:00:00<br />value:  5.640217e-01<br />Approach: oct-osqp","time: 2006-05-18 10:00:00<br />value:  6.329706e-01<br />Approach: oct-osqp","time: 2006-05-18 11:00:00<br />value:  6.494437e-01<br />Approach: oct-osqp","time: 2006-05-18 12:00:00<br />value:  6.517143e-01<br />Approach: oct-osqp","time: 2006-05-18 13:00:00<br />value:  5.842906e-01<br />Approach: oct-osqp","time: 2006-05-18 14:00:00<br />value:  4.821548e-01<br />Approach: oct-osqp","time: 2006-05-18 15:00:00<br />value:  3.329696e-01<br />Approach: oct-osqp","time: 2006-05-18 16:00:00<br />value:  1.595989e-01<br />Approach: oct-osqp","time: 2006-05-18 17:00:00<br />value:  1.236701e-02<br />Approach: oct-osqp","time: 2006-05-18 18:00:00<br />value:  4.959298e-15<br />Approach: oct-osqp","time: 2006-05-18 19:00:00<br />value:  5.051819e-15<br />Approach: oct-osqp","time: 2006-05-18 20:00:00<br />value:  5.402144e-15<br />Approach: oct-osqp","time: 2006-05-18 21:00:00<br />value:  5.370626e-15<br />Approach: oct-osqp","time: 2006-05-18 22:00:00<br />value:  5.363339e-15<br />Approach: oct-osqp","time: 2006-05-18 23:00:00<br />value:  5.435980e-15<br />Approach: oct-osqp"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,176,246,1)","dash":"solid"},"hoveron":"points","name":"oct-osqp","legendgroup":"oct-osqp","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0,0,0,0,0,0.00656288185128649,0.14333553953638,0.314981490935801,0.459713957899756,0.561308293506228,0.629118443311721,0.639965011413553,0.639011185860879,0.580061795871637,0.491835353116936,0.334688348695124,0.166357617729516,0.0160554173484906,0,0,0,0,0,0,0,0,0,0,0,0.00272089299333134,0.138652688101988,0.318279416349465,0.458317466692196,0.565669304118973,0.63439751112147,0.650870657116735,0.652968225600893,0.585544481230991,0.483613792188802,0.333496794685918,0.163627957555079,0.0163995043144813,0,0,0,0,0,0],"text":["time: 2006-05-17 00:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-17 01:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-17 02:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-17 03:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-17 04:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-17 05:00:00<br />value:  6.562882e-03<br />Approach: oct-sntz","time: 2006-05-17 06:00:00<br />value:  1.433355e-01<br />Approach: oct-sntz","time: 2006-05-17 07:00:00<br />value:  3.149815e-01<br />Approach: oct-sntz","time: 2006-05-17 08:00:00<br />value:  4.597140e-01<br />Approach: oct-sntz","time: 2006-05-17 09:00:00<br />value:  5.613083e-01<br />Approach: oct-sntz","time: 2006-05-17 10:00:00<br />value:  6.291184e-01<br />Approach: oct-sntz","time: 2006-05-17 11:00:00<br />value:  6.399650e-01<br />Approach: oct-sntz","time: 2006-05-17 12:00:00<br />value:  6.390112e-01<br />Approach: oct-sntz","time: 2006-05-17 13:00:00<br />value:  5.800618e-01<br />Approach: oct-sntz","time: 2006-05-17 14:00:00<br />value:  4.918354e-01<br />Approach: oct-sntz","time: 2006-05-17 15:00:00<br />value:  3.346883e-01<br />Approach: oct-sntz","time: 2006-05-17 16:00:00<br />value:  1.663576e-01<br />Approach: oct-sntz","time: 2006-05-17 17:00:00<br />value:  1.605542e-02<br />Approach: oct-sntz","time: 2006-05-17 18:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-17 19:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-17 20:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-17 21:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-17 22:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-17 23:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-18 00:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-18 01:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-18 02:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-18 03:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-18 04:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-18 05:00:00<br />value:  2.720893e-03<br />Approach: oct-sntz","time: 2006-05-18 06:00:00<br />value:  1.386527e-01<br />Approach: oct-sntz","time: 2006-05-18 07:00:00<br />value:  3.182794e-01<br />Approach: oct-sntz","time: 2006-05-18 08:00:00<br />value:  4.583175e-01<br />Approach: oct-sntz","time: 2006-05-18 09:00:00<br />value:  5.656693e-01<br />Approach: oct-sntz","time: 2006-05-18 10:00:00<br />value:  6.343975e-01<br />Approach: oct-sntz","time: 2006-05-18 11:00:00<br />value:  6.508707e-01<br />Approach: oct-sntz","time: 2006-05-18 12:00:00<br />value:  6.529682e-01<br />Approach: oct-sntz","time: 2006-05-18 13:00:00<br />value:  5.855445e-01<br />Approach: oct-sntz","time: 2006-05-18 14:00:00<br />value:  4.836138e-01<br />Approach: oct-sntz","time: 2006-05-18 15:00:00<br />value:  3.334968e-01<br />Approach: oct-sntz","time: 2006-05-18 16:00:00<br />value:  1.636280e-01<br />Approach: oct-sntz","time: 2006-05-18 17:00:00<br />value:  1.639950e-02<br />Approach: oct-sntz","time: 2006-05-18 18:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-18 19:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-18 20:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-18 21:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-18 22:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz","time: 2006-05-18 23:00:00<br />value:  0.000000e+00<br />Approach: oct-sntz"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(231,107,243,1)","dash":"solid"},"hoveron":"points","name":"oct-sntz","legendgroup":"oct-sntz","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":25.5707762557078,"l":28.4931506849315},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1147815540,1148001660],"tickmode":"array","ticktext":["12:00 AM<br />17/05","06:00 AM<br />17/05","12:00 PM<br />17/05","06:00 PM<br />17/05","12:00 AM<br />18/05","06:00 AM<br />18/05","12:00 PM<br />18/05","06:00 PM<br />18/05","12:00 AM<br />19/05"],"tickvals":[1147824000,1147845600,1147867200,1147888800,1147910400,1147932000,1147953600,1147975200,1147996800],"categoryorder":"array","categoryarray":["12:00 AM<br />17/05","06:00 AM<br />17/05","12:00 PM<br />17/05","06:00 PM<br />17/05","12:00 AM<br />18/05","06:00 AM<br />18/05","12:00 PM<br />18/05","06:00 PM<br />18/05","12:00 AM<br />19/05"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.0576750471157745,0.743413097481703],"tickmode":"array","ticktext":["0.0","0.2","0.4","0.6"],"tickvals":[0,0.2,0.4,0.6],"categoryorder":"array","categoryarray":["0.0","0.2","0.4","0.6"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"Approach","font":{"color":null,"family":null,"size":0}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"c137e6c596a":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"c137e6c596a","visdat":{"c137e6c596a":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Root mean square error:</p>
<div class="cell" data-hash="lab_session_cache/html/score_nn_e978e08bc4452aa7310bdbaf4d7bba97">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>score_ct_nn <span class="ot">&lt;-</span> data_ct_nn <span class="sc">|&gt;</span></span>
<span id="cb30-2"><a href="#cb30-2"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span><span class="fu">c</span>(time, obs), <span class="at">names_to =</span> <span class="st">"Approach"</span>) <span class="sc">|&gt;</span></span>
<span id="cb30-3"><a href="#cb30-3"></a>  <span class="fu">group_by</span>(Approach) <span class="sc">|&gt;</span></span>
<span id="cb30-4"><a href="#cb30-4"></a>  <span class="fu">summarise</span>(<span class="at">RMSE =</span> <span class="fu">sqrt</span>(<span class="fu">mean</span>((value<span class="sc">-</span>obs)<span class="sc">^</span><span class="dv">2</span>)))</span>
<span id="cb30-5"><a href="#cb30-5"></a>score_ct_nn</span>
<span id="cb30-6"><a href="#cb30-6"></a><span class="co">#&gt; # A tibble: 4 × 2</span></span>
<span id="cb30-7"><a href="#cb30-7"></a><span class="co">#&gt;   Approach   RMSE</span></span>
<span id="cb30-8"><a href="#cb30-8"></a><span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt;</span></span>
<span id="cb30-9"><a href="#cb30-9"></a><span class="co">#&gt; 1 base     0.0226</span></span>
<span id="cb30-10"><a href="#cb30-10"></a><span class="co">#&gt; 2 oct-free 0.0205</span></span>
<span id="cb30-11"><a href="#cb30-11"></a><span class="co">#&gt; 3 oct-osqp 0.0189</span></span>
<span id="cb30-12"><a href="#cb30-12"></a><span class="co">#&gt; 4 oct-sntz 0.0183</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="a-priori-constrained-immutable-forecasts" class="level3"><h3 class="anchored" data-anchor-id="a-priori-constrained-immutable-forecasts">A priori constrained (immutable) forecasts</h3>
<p>Sometimes we may wish to incorporate a priori knowledge during the reconciliation process in order to improve the accuracy of the reconciled forecasts. For example, suppose we want to fix the daily forecasts of the top level series at the base forecasts values.</p>
<div class="cell" data-hash="lab_session_cache/html/unnamed-chunk-1_d4a3323c9c89c57f8d292f7654c4ac34">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>base_ct[<span class="dv">1</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="co"># Daily top level base forecasts</span></span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="co">#&gt; [1] 1610.683 1610.683</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="lab_session_cache/html/fixed_ct_249a0cf4b902de5c1f76781aa396c8a2">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>id_fix_ct <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>fixed_ct <span class="ot">&lt;-</span> <span class="fu">octrec</span>(<span class="at">basef =</span> base_ct, <span class="at">m =</span> m, <span class="at">C =</span> C, <span class="at">comb =</span> <span class="st">"wlsv"</span>,</span>
<span id="cb32-3"><a href="#cb32-3"></a>                   <span class="at">res =</span> res_ct, <span class="at">keep =</span> <span class="st">"recf"</span>,</span>
<span id="cb32-4"><a href="#cb32-4"></a>                   <span class="at">v =</span> id_fix_ct)</span>
<span id="cb32-5"><a href="#cb32-5"></a>fixed_ct[<span class="dv">1</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb32-6"><a href="#cb32-6"></a><span class="co">#&gt;    k24h1    k24h2 </span></span>
<span id="cb32-7"><a href="#cb32-7"></a><span class="co">#&gt; 1610.683 1610.683</span></span>
<span id="cb32-8"><a href="#cb32-8"></a><span class="fu">any</span>(fixed_ct<span class="sc">&lt;</span><span class="dv">0</span>)</span>
<span id="cb32-9"><a href="#cb32-9"></a><span class="co">#&gt; [1] TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Even so, however, there is no guarantee that the reconciled forecasts will be non-negative. Therefore, we must continue to apply the techniques previously discussed to satisfy these supplementary constraints.</p>
<div class="cell" data-hash="lab_session_cache/html/fixed_nn_ff144dd35a360f4efd9ef925268601f1">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>fixed_nn_ct <span class="ot">&lt;-</span> <span class="fu">octrec</span>(<span class="at">basef =</span> base_ct, <span class="at">m =</span> m, <span class="at">C =</span> C, <span class="at">comb =</span> <span class="st">"wlsv"</span>,</span>
<span id="cb33-2"><a href="#cb33-2"></a>                      <span class="at">res =</span> res_ct, <span class="at">keep =</span> <span class="st">"recf"</span>, </span>
<span id="cb33-3"><a href="#cb33-3"></a>                      <span class="at">nn =</span> <span class="cn">TRUE</span>, </span>
<span id="cb33-4"><a href="#cb33-4"></a>                      <span class="at">v =</span> id_fix_ct)</span>
<span id="cb33-5"><a href="#cb33-5"></a>fixed_nn_ct<span class="sc">$</span>recf[<span class="dv">1</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb33-6"><a href="#cb33-6"></a><span class="co">#&gt;    k24h1    k24h2 </span></span>
<span id="cb33-7"><a href="#cb33-7"></a><span class="co">#&gt; 1610.683 1610.683</span></span>
<span id="cb33-8"><a href="#cb33-8"></a><span class="fu">any</span>(fixed_nn_ct<span class="sc">$</span>recf<span class="sc">&lt;</span><span class="dv">0</span>)</span>
<span id="cb33-9"><a href="#cb33-9"></a><span class="co">#&gt; [1] FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="lab_session_cache/html/plot_fixed_91a39ecfd205c2b67b7eb30ffc797414">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>data_ct_nn_fix <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"oct-free"</span> <span class="ot">=</span> <span class="fu">FoReco2ts</span>(reco_ct)<span class="sc">$</span>k1[, id_serie],</span>
<span id="cb34-2"><a href="#cb34-2"></a>                     <span class="st">"oct-sntz"</span> <span class="ot">=</span> <span class="fu">FoReco2ts</span>(sntz_ct)<span class="sc">$</span>k1[, id_serie],</span>
<span id="cb34-3"><a href="#cb34-3"></a>                     <span class="st">"oct-fixed"</span> <span class="ot">=</span> <span class="fu">FoReco2ts</span>(fixed_ct)<span class="sc">$</span>k1[, id_serie],</span>
<span id="cb34-4"><a href="#cb34-4"></a>                     <span class="st">"oct-fixed-nn"</span> <span class="ot">=</span> <span class="fu">FoReco2ts</span>(fixed_nn_ct<span class="sc">$</span>recf)<span class="sc">$</span>k1[, id_serie],</span>
<span id="cb34-5"><a href="#cb34-5"></a>                     <span class="at">base =</span> <span class="fu">as.numeric</span>(<span class="fu">FoReco2ts</span>(base_te)<span class="sc">$</span>k1),</span>
<span id="cb34-6"><a href="#cb34-6"></a>                     <span class="at">obs =</span> hourly_obs[, id_serie],</span>
<span id="cb34-7"><a href="#cb34-7"></a>                     <span class="at">time =</span> <span class="fu">seq</span>(<span class="at">from=</span>starting_time, <span class="at">by=</span><span class="st">"hour"</span>, </span>
<span id="cb34-8"><a href="#cb34-8"></a>                                <span class="at">length.out =</span> <span class="dv">48</span>))</span>
<span id="cb34-9"><a href="#cb34-9"></a>plot_ct_nn_fix <span class="ot">&lt;-</span> data_ct_nn_fix <span class="sc">|&gt;</span></span>
<span id="cb34-10"><a href="#cb34-10"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>time, <span class="at">names_to =</span> <span class="st">"Approach"</span>) <span class="sc">|&gt;</span></span>
<span id="cb34-11"><a href="#cb34-11"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> value, <span class="at">col =</span> Approach)) <span class="sc">+</span></span>
<span id="cb34-12"><a href="#cb34-12"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb34-13"><a href="#cb34-13"></a>  <span class="fu">scale_x_datetime</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_date</span>(<span class="st">"%I:%M %p</span><span class="sc">\n</span><span class="st">%d/%m"</span>),</span>
<span id="cb34-14"><a href="#cb34-14"></a>                   <span class="at">breaks =</span> <span class="fu">seq</span>(starting_time, <span class="at">by =</span> <span class="st">"6 hours"</span>, <span class="at">length.out =</span> <span class="dv">49</span><span class="sc">/</span><span class="dv">6</span>)) <span class="sc">+</span></span>
<span id="cb34-15"><a href="#cb34-15"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb34-16"><a href="#cb34-16"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb34-17"><a href="#cb34-17"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span>
<span id="cb34-18"><a href="#cb34-18"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(plot_ct_nn_fix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-d07ffa4cc408648ea8f8" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-d07ffa4cc408648ea8f8">{"x":{"data":[{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0,0,0,0,0,0.036,0.193,0.354,0.501,0.591,0.653,0.666,0.642,0.574,0.477,0.326,0.151,0.016,0,0,0,0,0,0,0,0,0,0,0,0.033,0.191,0.371,0.523,0.626,0.693,0.707,0.683,0.607,0.488,0.337,0.155,0.017,0,0,0,0,0,0],"text":["time: 2006-05-17 00:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 01:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 02:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 03:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 04:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 05:00:00<br />value:  0.036000000<br />Approach: base","time: 2006-05-17 06:00:00<br />value:  0.193000000<br />Approach: base","time: 2006-05-17 07:00:00<br />value:  0.354000000<br />Approach: base","time: 2006-05-17 08:00:00<br />value:  0.501000000<br />Approach: base","time: 2006-05-17 09:00:00<br />value:  0.591000000<br />Approach: base","time: 2006-05-17 10:00:00<br />value:  0.653000000<br />Approach: base","time: 2006-05-17 11:00:00<br />value:  0.666000000<br />Approach: base","time: 2006-05-17 12:00:00<br />value:  0.642000000<br />Approach: base","time: 2006-05-17 13:00:00<br />value:  0.574000000<br />Approach: base","time: 2006-05-17 14:00:00<br />value:  0.477000000<br />Approach: base","time: 2006-05-17 15:00:00<br />value:  0.326000000<br />Approach: base","time: 2006-05-17 16:00:00<br />value:  0.151000000<br />Approach: base","time: 2006-05-17 17:00:00<br />value:  0.016000000<br />Approach: base","time: 2006-05-17 18:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 19:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 20:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 21:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 22:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 23:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 00:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 01:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 02:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 03:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 04:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 05:00:00<br />value:  0.033000000<br />Approach: base","time: 2006-05-18 06:00:00<br />value:  0.191000000<br />Approach: base","time: 2006-05-18 07:00:00<br />value:  0.371000000<br />Approach: base","time: 2006-05-18 08:00:00<br />value:  0.523000000<br />Approach: base","time: 2006-05-18 09:00:00<br />value:  0.626000000<br />Approach: base","time: 2006-05-18 10:00:00<br />value:  0.693000000<br />Approach: base","time: 2006-05-18 11:00:00<br />value:  0.707000000<br />Approach: base","time: 2006-05-18 12:00:00<br />value:  0.683000000<br />Approach: base","time: 2006-05-18 13:00:00<br />value:  0.607000000<br />Approach: base","time: 2006-05-18 14:00:00<br />value:  0.488000000<br />Approach: base","time: 2006-05-18 15:00:00<br />value:  0.337000000<br />Approach: base","time: 2006-05-18 16:00:00<br />value:  0.155000000<br />Approach: base","time: 2006-05-18 17:00:00<br />value:  0.017000000<br />Approach: base","time: 2006-05-18 18:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 19:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 20:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 21:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 22:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 23:00:00<br />value:  0.000000000<br />Approach: base"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"base","legendgroup":"base","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0,0,0,0,0,0.011,0.156,0.27,0.432,0.57,0.634,0.672,0.662,0.55,0.45,0.332,0.152,0.02,0,0,0,0,0,0,0,0,0,0,0,0.006,0.159,0.354,0.493,0.591,0.67,0.688,0.66,0.596,0.49,0.373,0.188,0.018,0,0,0,0,0,0],"text":["time: 2006-05-17 00:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 01:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 02:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 03:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 04:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 05:00:00<br />value:  0.011000000<br />Approach: obs","time: 2006-05-17 06:00:00<br />value:  0.156000000<br />Approach: obs","time: 2006-05-17 07:00:00<br />value:  0.270000000<br />Approach: obs","time: 2006-05-17 08:00:00<br />value:  0.432000000<br />Approach: obs","time: 2006-05-17 09:00:00<br />value:  0.570000000<br />Approach: obs","time: 2006-05-17 10:00:00<br />value:  0.634000000<br />Approach: obs","time: 2006-05-17 11:00:00<br />value:  0.672000000<br />Approach: obs","time: 2006-05-17 12:00:00<br />value:  0.662000000<br />Approach: obs","time: 2006-05-17 13:00:00<br />value:  0.550000000<br />Approach: obs","time: 2006-05-17 14:00:00<br />value:  0.450000000<br />Approach: obs","time: 2006-05-17 15:00:00<br />value:  0.332000000<br />Approach: obs","time: 2006-05-17 16:00:00<br />value:  0.152000000<br />Approach: obs","time: 2006-05-17 17:00:00<br />value:  0.020000000<br />Approach: obs","time: 2006-05-17 18:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 19:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 20:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 21:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 22:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 23:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 00:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 01:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 02:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 03:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 04:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 05:00:00<br />value:  0.006000000<br />Approach: obs","time: 2006-05-18 06:00:00<br />value:  0.159000000<br />Approach: obs","time: 2006-05-18 07:00:00<br />value:  0.354000000<br />Approach: obs","time: 2006-05-18 08:00:00<br />value:  0.493000000<br />Approach: obs","time: 2006-05-18 09:00:00<br />value:  0.591000000<br />Approach: obs","time: 2006-05-18 10:00:00<br />value:  0.670000000<br />Approach: obs","time: 2006-05-18 11:00:00<br />value:  0.688000000<br />Approach: obs","time: 2006-05-18 12:00:00<br />value:  0.660000000<br />Approach: obs","time: 2006-05-18 13:00:00<br />value:  0.596000000<br />Approach: obs","time: 2006-05-18 14:00:00<br />value:  0.490000000<br />Approach: obs","time: 2006-05-18 15:00:00<br />value:  0.373000000<br />Approach: obs","time: 2006-05-18 16:00:00<br />value:  0.188000000<br />Approach: obs","time: 2006-05-18 17:00:00<br />value:  0.018000000<br />Approach: obs","time: 2006-05-18 18:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 19:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 20:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 21:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 22:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 23:00:00<br />value:  0.000000000<br />Approach: obs"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(183,159,0,1)","dash":"solid"},"hoveron":"points","name":"obs","legendgroup":"obs","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[-0.0148715523644463,-0.0141390063140821,-0.0132536692704215,-0.0121051069627415,-0.0207655064078665,0.00705932507749089,0.143831982762584,0.315477934162005,0.460210401125961,0.561804736732432,0.629614886537925,0.640461454639757,0.639507629087083,0.580558239097841,0.49233179634314,0.335184791921328,0.166854060955721,0.016551860574695,-0.00829885447145535,-0.00945242612504377,-0.00998349612097538,-0.0103142278926276,-0.0105186869869207,-0.0107697121633661,-0.0170618856124012,-0.0163517408703923,-0.0155303513125046,-0.014139047575448,-0.0216616604510842,0.00213247276585429,0.138064267874511,0.317690996121988,0.457729046464719,0.565080883891496,0.633809090893993,0.650282236889258,0.652379805373416,0.584956061003514,0.483025371961325,0.332908374458441,0.163039537327602,0.0158110840870042,-0.0104065599280771,-0.011543880459688,-0.0121373045503989,-0.0124468685530517,-0.0126569616241289,-0.0129081682840387],"text":["time: 2006-05-17 00:00:00<br />value: -0.014871552<br />Approach: oct-fixed","time: 2006-05-17 01:00:00<br />value: -0.014139006<br />Approach: oct-fixed","time: 2006-05-17 02:00:00<br />value: -0.013253669<br />Approach: oct-fixed","time: 2006-05-17 03:00:00<br />value: -0.012105107<br />Approach: oct-fixed","time: 2006-05-17 04:00:00<br />value: -0.020765506<br />Approach: oct-fixed","time: 2006-05-17 05:00:00<br />value:  0.007059325<br />Approach: oct-fixed","time: 2006-05-17 06:00:00<br />value:  0.143831983<br />Approach: oct-fixed","time: 2006-05-17 07:00:00<br />value:  0.315477934<br />Approach: oct-fixed","time: 2006-05-17 08:00:00<br />value:  0.460210401<br />Approach: oct-fixed","time: 2006-05-17 09:00:00<br />value:  0.561804737<br />Approach: oct-fixed","time: 2006-05-17 10:00:00<br />value:  0.629614887<br />Approach: oct-fixed","time: 2006-05-17 11:00:00<br />value:  0.640461455<br />Approach: oct-fixed","time: 2006-05-17 12:00:00<br />value:  0.639507629<br />Approach: oct-fixed","time: 2006-05-17 13:00:00<br />value:  0.580558239<br />Approach: oct-fixed","time: 2006-05-17 14:00:00<br />value:  0.492331796<br />Approach: oct-fixed","time: 2006-05-17 15:00:00<br />value:  0.335184792<br />Approach: oct-fixed","time: 2006-05-17 16:00:00<br />value:  0.166854061<br />Approach: oct-fixed","time: 2006-05-17 17:00:00<br />value:  0.016551861<br />Approach: oct-fixed","time: 2006-05-17 18:00:00<br />value: -0.008298854<br />Approach: oct-fixed","time: 2006-05-17 19:00:00<br />value: -0.009452426<br />Approach: oct-fixed","time: 2006-05-17 20:00:00<br />value: -0.009983496<br />Approach: oct-fixed","time: 2006-05-17 21:00:00<br />value: -0.010314228<br />Approach: oct-fixed","time: 2006-05-17 22:00:00<br />value: -0.010518687<br />Approach: oct-fixed","time: 2006-05-17 23:00:00<br />value: -0.010769712<br />Approach: oct-fixed","time: 2006-05-18 00:00:00<br />value: -0.017061886<br />Approach: oct-fixed","time: 2006-05-18 01:00:00<br />value: -0.016351741<br />Approach: oct-fixed","time: 2006-05-18 02:00:00<br />value: -0.015530351<br />Approach: oct-fixed","time: 2006-05-18 03:00:00<br />value: -0.014139048<br />Approach: oct-fixed","time: 2006-05-18 04:00:00<br />value: -0.021661660<br />Approach: oct-fixed","time: 2006-05-18 05:00:00<br />value:  0.002132473<br />Approach: oct-fixed","time: 2006-05-18 06:00:00<br />value:  0.138064268<br />Approach: oct-fixed","time: 2006-05-18 07:00:00<br />value:  0.317690996<br />Approach: oct-fixed","time: 2006-05-18 08:00:00<br />value:  0.457729046<br />Approach: oct-fixed","time: 2006-05-18 09:00:00<br />value:  0.565080884<br />Approach: oct-fixed","time: 2006-05-18 10:00:00<br />value:  0.633809091<br />Approach: oct-fixed","time: 2006-05-18 11:00:00<br />value:  0.650282237<br />Approach: oct-fixed","time: 2006-05-18 12:00:00<br />value:  0.652379805<br />Approach: oct-fixed","time: 2006-05-18 13:00:00<br />value:  0.584956061<br />Approach: oct-fixed","time: 2006-05-18 14:00:00<br />value:  0.483025372<br />Approach: oct-fixed","time: 2006-05-18 15:00:00<br />value:  0.332908374<br />Approach: oct-fixed","time: 2006-05-18 16:00:00<br />value:  0.163039537<br />Approach: oct-fixed","time: 2006-05-18 17:00:00<br />value:  0.015811084<br />Approach: oct-fixed","time: 2006-05-18 18:00:00<br />value: -0.010406560<br />Approach: oct-fixed","time: 2006-05-18 19:00:00<br />value: -0.011543880<br />Approach: oct-fixed","time: 2006-05-18 20:00:00<br />value: -0.012137305<br />Approach: oct-fixed","time: 2006-05-18 21:00:00<br />value: -0.012446869<br />Approach: oct-fixed","time: 2006-05-18 22:00:00<br />value: -0.012656962<br />Approach: oct-fixed","time: 2006-05-18 23:00:00<br />value: -0.012908168<br />Approach: oct-fixed"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,186,56,1)","dash":"solid"},"hoveron":"points","name":"oct-fixed","legendgroup":"oct-fixed","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0,0,0,0,0,0.00705932507749052,0.143831982762584,0.315477934162005,0.46021040112596,0.561804736732432,0.629614886537925,0.640461454639757,0.639507629087083,0.580558239097841,0.49233179634314,0.335184791921328,0.16685406095572,0.0165518605746946,0,0,0,0,0,0,0,0,0,0,0,0.00213247276585471,0.138064267874512,0.317690996121988,0.457729046464719,0.565080883891496,0.633809090893994,0.650282236889258,0.652379805373416,0.584956061003514,0.483025371961325,0.332908374458442,0.163039537327602,0.0158110840870047,0,0,0,0,0,0],"text":["time: 2006-05-17 00:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-17 01:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-17 02:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-17 03:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-17 04:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-17 05:00:00<br />value:  0.007059325<br />Approach: oct-fixed-nn","time: 2006-05-17 06:00:00<br />value:  0.143831983<br />Approach: oct-fixed-nn","time: 2006-05-17 07:00:00<br />value:  0.315477934<br />Approach: oct-fixed-nn","time: 2006-05-17 08:00:00<br />value:  0.460210401<br />Approach: oct-fixed-nn","time: 2006-05-17 09:00:00<br />value:  0.561804737<br />Approach: oct-fixed-nn","time: 2006-05-17 10:00:00<br />value:  0.629614887<br />Approach: oct-fixed-nn","time: 2006-05-17 11:00:00<br />value:  0.640461455<br />Approach: oct-fixed-nn","time: 2006-05-17 12:00:00<br />value:  0.639507629<br />Approach: oct-fixed-nn","time: 2006-05-17 13:00:00<br />value:  0.580558239<br />Approach: oct-fixed-nn","time: 2006-05-17 14:00:00<br />value:  0.492331796<br />Approach: oct-fixed-nn","time: 2006-05-17 15:00:00<br />value:  0.335184792<br />Approach: oct-fixed-nn","time: 2006-05-17 16:00:00<br />value:  0.166854061<br />Approach: oct-fixed-nn","time: 2006-05-17 17:00:00<br />value:  0.016551861<br />Approach: oct-fixed-nn","time: 2006-05-17 18:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-17 19:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-17 20:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-17 21:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-17 22:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-17 23:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-18 00:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-18 01:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-18 02:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-18 03:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-18 04:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-18 05:00:00<br />value:  0.002132473<br />Approach: oct-fixed-nn","time: 2006-05-18 06:00:00<br />value:  0.138064268<br />Approach: oct-fixed-nn","time: 2006-05-18 07:00:00<br />value:  0.317690996<br />Approach: oct-fixed-nn","time: 2006-05-18 08:00:00<br />value:  0.457729046<br />Approach: oct-fixed-nn","time: 2006-05-18 09:00:00<br />value:  0.565080884<br />Approach: oct-fixed-nn","time: 2006-05-18 10:00:00<br />value:  0.633809091<br />Approach: oct-fixed-nn","time: 2006-05-18 11:00:00<br />value:  0.650282237<br />Approach: oct-fixed-nn","time: 2006-05-18 12:00:00<br />value:  0.652379805<br />Approach: oct-fixed-nn","time: 2006-05-18 13:00:00<br />value:  0.584956061<br />Approach: oct-fixed-nn","time: 2006-05-18 14:00:00<br />value:  0.483025372<br />Approach: oct-fixed-nn","time: 2006-05-18 15:00:00<br />value:  0.332908374<br />Approach: oct-fixed-nn","time: 2006-05-18 16:00:00<br />value:  0.163039537<br />Approach: oct-fixed-nn","time: 2006-05-18 17:00:00<br />value:  0.015811084<br />Approach: oct-fixed-nn","time: 2006-05-18 18:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-18 19:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-18 20:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-18 21:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-18 22:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn","time: 2006-05-18 23:00:00<br />value:  0.000000000<br />Approach: oct-fixed-nn"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,191,196,1)","dash":"solid"},"hoveron":"points","name":"oct-fixed-nn","legendgroup":"oct-fixed-nn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[-0.0153679955906507,-0.0146354495402865,-0.0137501124966259,-0.0126015501889459,-0.0212619496340709,0.00656288185128649,0.14333553953638,0.314981490935801,0.459713957899756,0.561308293506228,0.629118443311721,0.639965011413553,0.639011185860879,0.580061795871637,0.491835353116936,0.334688348695124,0.166357617729516,0.0160554173484906,-0.00879529769765974,-0.00994886935124817,-0.0104799393471798,-0.010810671118832,-0.0110151302131251,-0.0112661553895705,-0.0164734653849242,-0.0157633206429153,-0.0149419310850275,-0.0135506273479709,-0.0210732402236071,0.00272089299333134,0.138652688101988,0.318279416349465,0.458317466692196,0.565669304118973,0.63439751112147,0.650870657116735,0.652968225600893,0.585544481230991,0.483613792188802,0.333496794685918,0.163627957555079,0.0163995043144813,-0.00981813970060003,-0.0109554602322109,-0.0115488843229218,-0.0118584483255747,-0.0120685413966519,-0.0123197480565617],"text":["time: 2006-05-17 00:00:00<br />value: -0.015367996<br />Approach: oct-free","time: 2006-05-17 01:00:00<br />value: -0.014635450<br />Approach: oct-free","time: 2006-05-17 02:00:00<br />value: -0.013750112<br />Approach: oct-free","time: 2006-05-17 03:00:00<br />value: -0.012601550<br />Approach: oct-free","time: 2006-05-17 04:00:00<br />value: -0.021261950<br />Approach: oct-free","time: 2006-05-17 05:00:00<br />value:  0.006562882<br />Approach: oct-free","time: 2006-05-17 06:00:00<br />value:  0.143335540<br />Approach: oct-free","time: 2006-05-17 07:00:00<br />value:  0.314981491<br />Approach: oct-free","time: 2006-05-17 08:00:00<br />value:  0.459713958<br />Approach: oct-free","time: 2006-05-17 09:00:00<br />value:  0.561308294<br />Approach: oct-free","time: 2006-05-17 10:00:00<br />value:  0.629118443<br />Approach: oct-free","time: 2006-05-17 11:00:00<br />value:  0.639965011<br />Approach: oct-free","time: 2006-05-17 12:00:00<br />value:  0.639011186<br />Approach: oct-free","time: 2006-05-17 13:00:00<br />value:  0.580061796<br />Approach: oct-free","time: 2006-05-17 14:00:00<br />value:  0.491835353<br />Approach: oct-free","time: 2006-05-17 15:00:00<br />value:  0.334688349<br />Approach: oct-free","time: 2006-05-17 16:00:00<br />value:  0.166357618<br />Approach: oct-free","time: 2006-05-17 17:00:00<br />value:  0.016055417<br />Approach: oct-free","time: 2006-05-17 18:00:00<br />value: -0.008795298<br />Approach: oct-free","time: 2006-05-17 19:00:00<br />value: -0.009948869<br />Approach: oct-free","time: 2006-05-17 20:00:00<br />value: -0.010479939<br />Approach: oct-free","time: 2006-05-17 21:00:00<br />value: -0.010810671<br />Approach: oct-free","time: 2006-05-17 22:00:00<br />value: -0.011015130<br />Approach: oct-free","time: 2006-05-17 23:00:00<br />value: -0.011266155<br />Approach: oct-free","time: 2006-05-18 00:00:00<br />value: -0.016473465<br />Approach: oct-free","time: 2006-05-18 01:00:00<br />value: -0.015763321<br />Approach: oct-free","time: 2006-05-18 02:00:00<br />value: -0.014941931<br />Approach: oct-free","time: 2006-05-18 03:00:00<br />value: -0.013550627<br />Approach: oct-free","time: 2006-05-18 04:00:00<br />value: -0.021073240<br />Approach: oct-free","time: 2006-05-18 05:00:00<br />value:  0.002720893<br />Approach: oct-free","time: 2006-05-18 06:00:00<br />value:  0.138652688<br />Approach: oct-free","time: 2006-05-18 07:00:00<br />value:  0.318279416<br />Approach: oct-free","time: 2006-05-18 08:00:00<br />value:  0.458317467<br />Approach: oct-free","time: 2006-05-18 09:00:00<br />value:  0.565669304<br />Approach: oct-free","time: 2006-05-18 10:00:00<br />value:  0.634397511<br />Approach: oct-free","time: 2006-05-18 11:00:00<br />value:  0.650870657<br />Approach: oct-free","time: 2006-05-18 12:00:00<br />value:  0.652968226<br />Approach: oct-free","time: 2006-05-18 13:00:00<br />value:  0.585544481<br />Approach: oct-free","time: 2006-05-18 14:00:00<br />value:  0.483613792<br />Approach: oct-free","time: 2006-05-18 15:00:00<br />value:  0.333496795<br />Approach: oct-free","time: 2006-05-18 16:00:00<br />value:  0.163627958<br />Approach: oct-free","time: 2006-05-18 17:00:00<br />value:  0.016399504<br />Approach: oct-free","time: 2006-05-18 18:00:00<br />value: -0.009818140<br />Approach: oct-free","time: 2006-05-18 19:00:00<br />value: -0.010955460<br />Approach: oct-free","time: 2006-05-18 20:00:00<br />value: -0.011548884<br />Approach: oct-free","time: 2006-05-18 21:00:00<br />value: -0.011858448<br />Approach: oct-free","time: 2006-05-18 22:00:00<br />value: -0.012068541<br />Approach: oct-free","time: 2006-05-18 23:00:00<br />value: -0.012319748<br />Approach: oct-free"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(97,156,255,1)","dash":"solid"},"hoveron":"points","name":"oct-free","legendgroup":"oct-free","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0,0,0,0,0,0.00656288185128649,0.14333553953638,0.314981490935801,0.459713957899756,0.561308293506228,0.629118443311721,0.639965011413553,0.639011185860879,0.580061795871637,0.491835353116936,0.334688348695124,0.166357617729516,0.0160554173484906,0,0,0,0,0,0,0,0,0,0,0,0.00272089299333134,0.138652688101988,0.318279416349465,0.458317466692196,0.565669304118973,0.63439751112147,0.650870657116735,0.652968225600893,0.585544481230991,0.483613792188802,0.333496794685918,0.163627957555079,0.0163995043144813,0,0,0,0,0,0],"text":["time: 2006-05-17 00:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 01:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 02:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 03:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 04:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 05:00:00<br />value:  0.006562882<br />Approach: oct-sntz","time: 2006-05-17 06:00:00<br />value:  0.143335540<br />Approach: oct-sntz","time: 2006-05-17 07:00:00<br />value:  0.314981491<br />Approach: oct-sntz","time: 2006-05-17 08:00:00<br />value:  0.459713958<br />Approach: oct-sntz","time: 2006-05-17 09:00:00<br />value:  0.561308294<br />Approach: oct-sntz","time: 2006-05-17 10:00:00<br />value:  0.629118443<br />Approach: oct-sntz","time: 2006-05-17 11:00:00<br />value:  0.639965011<br />Approach: oct-sntz","time: 2006-05-17 12:00:00<br />value:  0.639011186<br />Approach: oct-sntz","time: 2006-05-17 13:00:00<br />value:  0.580061796<br />Approach: oct-sntz","time: 2006-05-17 14:00:00<br />value:  0.491835353<br />Approach: oct-sntz","time: 2006-05-17 15:00:00<br />value:  0.334688349<br />Approach: oct-sntz","time: 2006-05-17 16:00:00<br />value:  0.166357618<br />Approach: oct-sntz","time: 2006-05-17 17:00:00<br />value:  0.016055417<br />Approach: oct-sntz","time: 2006-05-17 18:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 19:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 20:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 21:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 22:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 23:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 00:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 01:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 02:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 03:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 04:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 05:00:00<br />value:  0.002720893<br />Approach: oct-sntz","time: 2006-05-18 06:00:00<br />value:  0.138652688<br />Approach: oct-sntz","time: 2006-05-18 07:00:00<br />value:  0.318279416<br />Approach: oct-sntz","time: 2006-05-18 08:00:00<br />value:  0.458317467<br />Approach: oct-sntz","time: 2006-05-18 09:00:00<br />value:  0.565669304<br />Approach: oct-sntz","time: 2006-05-18 10:00:00<br />value:  0.634397511<br />Approach: oct-sntz","time: 2006-05-18 11:00:00<br />value:  0.650870657<br />Approach: oct-sntz","time: 2006-05-18 12:00:00<br />value:  0.652968226<br />Approach: oct-sntz","time: 2006-05-18 13:00:00<br />value:  0.585544481<br />Approach: oct-sntz","time: 2006-05-18 14:00:00<br />value:  0.483613792<br />Approach: oct-sntz","time: 2006-05-18 15:00:00<br />value:  0.333496795<br />Approach: oct-sntz","time: 2006-05-18 16:00:00<br />value:  0.163627958<br />Approach: oct-sntz","time: 2006-05-18 17:00:00<br />value:  0.016399504<br />Approach: oct-sntz","time: 2006-05-18 18:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 19:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 20:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 21:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 22:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 23:00:00<br />value:  0.000000000<br />Approach: oct-sntz"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(245,100,227,1)","dash":"solid"},"hoveron":"points","name":"oct-sntz","legendgroup":"oct-sntz","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":25.5707762557078,"l":28.4931506849315},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1147815540,1148001660],"tickmode":"array","ticktext":["12:00 AM<br />17/05","06:00 AM<br />17/05","12:00 PM<br />17/05","06:00 PM<br />17/05","12:00 AM<br />18/05","06:00 AM<br />18/05","12:00 PM<br />18/05","06:00 PM<br />18/05","12:00 AM<br />19/05"],"tickvals":[1147824000,1147845600,1147867200,1147888800,1147910400,1147932000,1147953600,1147975200,1147996800],"categoryorder":"array","categoryarray":["12:00 AM<br />17/05","06:00 AM<br />17/05","12:00 PM<br />17/05","06:00 PM<br />17/05","12:00 AM<br />18/05","06:00 AM<br />18/05","12:00 PM<br />18/05","06:00 PM<br />18/05","12:00 AM<br />19/05"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.0580947434736384,0.743433083022554],"tickmode":"array","ticktext":["0.0","0.2","0.4","0.6"],"tickvals":[0,0.2,0.4,0.6],"categoryorder":"array","categoryarray":["0.0","0.2","0.4","0.6"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"Approach","font":{"color":null,"family":null,"size":0}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"c132c4a74f6":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"c132c4a74f6","visdat":{"c132c4a74f6":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell" data-hash="lab_session_cache/html/score_nn_fixed_3e45d5383cad98ad433178d7d50f944b">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>score_ct_nn_fix <span class="ot">&lt;-</span> data_ct_nn_fix <span class="sc">|&gt;</span></span>
<span id="cb35-2"><a href="#cb35-2"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span><span class="fu">c</span>(time, obs), <span class="at">names_to =</span> <span class="st">"Approach"</span>) <span class="sc">|&gt;</span></span>
<span id="cb35-3"><a href="#cb35-3"></a>  <span class="fu">group_by</span>(Approach) <span class="sc">|&gt;</span></span>
<span id="cb35-4"><a href="#cb35-4"></a>  <span class="fu">summarise</span>(<span class="at">RMSE =</span> <span class="fu">sqrt</span>(<span class="fu">mean</span>((value<span class="sc">-</span>obs)<span class="sc">^</span><span class="dv">2</span>)))</span>
<span id="cb35-5"><a href="#cb35-5"></a>score_ct_nn_fix</span>
<span id="cb35-6"><a href="#cb35-6"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb35-7"><a href="#cb35-7"></a><span class="co">#&gt;   Approach       RMSE</span></span>
<span id="cb35-8"><a href="#cb35-8"></a><span class="co">#&gt;   &lt;chr&gt;         &lt;dbl&gt;</span></span>
<span id="cb35-9"><a href="#cb35-9"></a><span class="co">#&gt; 1 base         0.0226</span></span>
<span id="cb35-10"><a href="#cb35-10"></a><span class="co">#&gt; 2 oct-fixed    0.0207</span></span>
<span id="cb35-11"><a href="#cb35-11"></a><span class="co">#&gt; 3 oct-fixed-nn 0.0185</span></span>
<span id="cb35-12"><a href="#cb35-12"></a><span class="co">#&gt; 4 oct-free     0.0205</span></span>
<span id="cb35-13"><a href="#cb35-13"></a><span class="co">#&gt; 5 oct-sntz     0.0183</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="exploring-a-subset-of-temporal-aggregation-orders" class="level3"><h3 class="anchored" data-anchor-id="exploring-a-subset-of-temporal-aggregation-orders">Exploring a subset of temporal aggregation orders</h3>
<p>Our approaches so far have involved considering all factors of <span class="math inline">m</span> as potential aggregation orders. Nevertheless, it is worth noting that we could also focus only on a given subset of these factors. For example, we could be interested only on daily, 12-hourly, and hourly forecasts.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/subset_te.png" class="img-fluid figure-img"></p>
</figure>
</div>
<div class="cell" data-hash="lab_session_cache/html/reco_red_ed4c5a567f1c451967710e082893fb34">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>msub <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">24</span>, <span class="dv">12</span>, <span class="dv">1</span>)</span>
<span id="cb36-2"><a href="#cb36-2"></a><span class="co"># thf_tools(m = msub, h = H)</span></span>
<span id="cb36-3"><a href="#cb36-3"></a><span class="co"># Base forecasts matrix</span></span>
<span id="cb36-4"><a href="#cb36-4"></a>base_ct_red <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">Reduce</span>(rbind, base[<span class="fu">paste0</span>(<span class="st">"k"</span>, msub)]))</span>
<span id="cb36-5"><a href="#cb36-5"></a><span class="fu">str</span>(<span class="fu">unname</span>(base_ct_red))</span>
<span id="cb36-6"><a href="#cb36-6"></a><span class="co">#&gt;  num [1:324, 1:54] 1611 131 352 472 477 ...</span></span>
<span id="cb36-7"><a href="#cb36-7"></a></span>
<span id="cb36-8"><a href="#cb36-8"></a><span class="co"># Residuals matrix</span></span>
<span id="cb36-9"><a href="#cb36-9"></a>res_ct_red <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">Reduce</span>(rbind, res[<span class="fu">paste0</span>(<span class="st">"k"</span>, msub)]))</span>
<span id="cb36-10"><a href="#cb36-10"></a><span class="fu">str</span>(<span class="fu">unname</span>(res_ct_red))</span>
<span id="cb36-11"><a href="#cb36-11"></a><span class="co">#&gt;  num [1:324, 1:378] -90.018 -0.924 -18.96 -100.991 -57.978 ...</span></span>
<span id="cb36-12"><a href="#cb36-12"></a></span>
<span id="cb36-13"><a href="#cb36-13"></a>reco_ct_red <span class="ot">&lt;-</span> <span class="fu">octrec</span>(<span class="at">basef =</span> base_ct_red, <span class="at">C =</span> C, <span class="at">comb =</span> <span class="st">"wlsv"</span>, <span class="at">keep =</span> <span class="st">"recf"</span>,</span>
<span id="cb36-14"><a href="#cb36-14"></a>                      <span class="at">res =</span> res_ct_red, <span class="at">m =</span> msub)</span>
<span id="cb36-15"><a href="#cb36-15"></a>reco_ct_red_nn <span class="ot">&lt;-</span> <span class="fu">octrec</span>(<span class="at">basef =</span> base_ct_red, <span class="at">C =</span> C, <span class="at">comb =</span> <span class="st">"wlsv"</span>, <span class="at">keep =</span> <span class="st">"recf"</span>,</span>
<span id="cb36-16"><a href="#cb36-16"></a>                      <span class="at">res =</span> res_ct_red, <span class="at">nn =</span> <span class="cn">TRUE</span>, <span class="at">nn_type =</span> <span class="st">"sntz"</span>,</span>
<span id="cb36-17"><a href="#cb36-17"></a>                      <span class="at">m =</span> msub)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="lab_session_cache/html/plot_red_75156d522acfb835e5ae866d4a38dec2">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a>data_ct_red <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"oct-free"</span> <span class="ot">=</span> <span class="fu">FoReco2ts</span>(reco_ct)<span class="sc">$</span>k1[, id_serie],</span>
<span id="cb37-2"><a href="#cb37-2"></a>                     <span class="st">"oct-sntz"</span> <span class="ot">=</span> <span class="fu">FoReco2ts</span>(sntz_ct)<span class="sc">$</span>k1[, id_serie],</span>
<span id="cb37-3"><a href="#cb37-3"></a>                     <span class="st">"oct-red"</span> <span class="ot">=</span> <span class="fu">FoReco2ts</span>(reco_ct_red)<span class="sc">$</span>k1[, id_serie],</span>
<span id="cb37-4"><a href="#cb37-4"></a>                     <span class="st">"oct-red-sntz"</span> <span class="ot">=</span> <span class="fu">FoReco2ts</span>(reco_ct_red_nn)<span class="sc">$</span>k1[, id_serie],</span>
<span id="cb37-5"><a href="#cb37-5"></a>                     <span class="at">base =</span> <span class="fu">as.numeric</span>(<span class="fu">FoReco2ts</span>(base_te)<span class="sc">$</span>k1),</span>
<span id="cb37-6"><a href="#cb37-6"></a>                     <span class="at">obs =</span> hourly_obs[, id_serie],</span>
<span id="cb37-7"><a href="#cb37-7"></a>                     <span class="at">time =</span> <span class="fu">seq</span>(<span class="at">from=</span>starting_time, <span class="at">by=</span><span class="st">"hour"</span>, </span>
<span id="cb37-8"><a href="#cb37-8"></a>                                <span class="at">length.out =</span> <span class="dv">48</span>))</span>
<span id="cb37-9"><a href="#cb37-9"></a>plot_ct_red <span class="ot">&lt;-</span> data_ct_red <span class="sc">|&gt;</span></span>
<span id="cb37-10"><a href="#cb37-10"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>time, <span class="at">names_to =</span> <span class="st">"Approach"</span>) <span class="sc">|&gt;</span></span>
<span id="cb37-11"><a href="#cb37-11"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> value, <span class="at">col =</span> Approach)) <span class="sc">+</span></span>
<span id="cb37-12"><a href="#cb37-12"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb37-13"><a href="#cb37-13"></a>  <span class="fu">scale_x_datetime</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_date</span>(<span class="st">"%I:%M %p</span><span class="sc">\n</span><span class="st">%d/%m"</span>),</span>
<span id="cb37-14"><a href="#cb37-14"></a>                   <span class="at">breaks =</span> <span class="fu">seq</span>(starting_time, <span class="at">by =</span> <span class="st">"6 hours"</span>, <span class="at">length.out =</span> <span class="dv">49</span><span class="sc">/</span><span class="dv">6</span>)) <span class="sc">+</span></span>
<span id="cb37-15"><a href="#cb37-15"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb37-16"><a href="#cb37-16"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb37-17"><a href="#cb37-17"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span>
<span id="cb37-18"><a href="#cb37-18"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(plot_ct_red)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9970823ba36f3afbbe93" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-9970823ba36f3afbbe93">{"x":{"data":[{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0,0,0,0,0,0.036,0.193,0.354,0.501,0.591,0.653,0.666,0.642,0.574,0.477,0.326,0.151,0.016,0,0,0,0,0,0,0,0,0,0,0,0.033,0.191,0.371,0.523,0.626,0.693,0.707,0.683,0.607,0.488,0.337,0.155,0.017,0,0,0,0,0,0],"text":["time: 2006-05-17 00:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 01:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 02:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 03:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 04:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 05:00:00<br />value:  0.036000000<br />Approach: base","time: 2006-05-17 06:00:00<br />value:  0.193000000<br />Approach: base","time: 2006-05-17 07:00:00<br />value:  0.354000000<br />Approach: base","time: 2006-05-17 08:00:00<br />value:  0.501000000<br />Approach: base","time: 2006-05-17 09:00:00<br />value:  0.591000000<br />Approach: base","time: 2006-05-17 10:00:00<br />value:  0.653000000<br />Approach: base","time: 2006-05-17 11:00:00<br />value:  0.666000000<br />Approach: base","time: 2006-05-17 12:00:00<br />value:  0.642000000<br />Approach: base","time: 2006-05-17 13:00:00<br />value:  0.574000000<br />Approach: base","time: 2006-05-17 14:00:00<br />value:  0.477000000<br />Approach: base","time: 2006-05-17 15:00:00<br />value:  0.326000000<br />Approach: base","time: 2006-05-17 16:00:00<br />value:  0.151000000<br />Approach: base","time: 2006-05-17 17:00:00<br />value:  0.016000000<br />Approach: base","time: 2006-05-17 18:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 19:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 20:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 21:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 22:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-17 23:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 00:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 01:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 02:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 03:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 04:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 05:00:00<br />value:  0.033000000<br />Approach: base","time: 2006-05-18 06:00:00<br />value:  0.191000000<br />Approach: base","time: 2006-05-18 07:00:00<br />value:  0.371000000<br />Approach: base","time: 2006-05-18 08:00:00<br />value:  0.523000000<br />Approach: base","time: 2006-05-18 09:00:00<br />value:  0.626000000<br />Approach: base","time: 2006-05-18 10:00:00<br />value:  0.693000000<br />Approach: base","time: 2006-05-18 11:00:00<br />value:  0.707000000<br />Approach: base","time: 2006-05-18 12:00:00<br />value:  0.683000000<br />Approach: base","time: 2006-05-18 13:00:00<br />value:  0.607000000<br />Approach: base","time: 2006-05-18 14:00:00<br />value:  0.488000000<br />Approach: base","time: 2006-05-18 15:00:00<br />value:  0.337000000<br />Approach: base","time: 2006-05-18 16:00:00<br />value:  0.155000000<br />Approach: base","time: 2006-05-18 17:00:00<br />value:  0.017000000<br />Approach: base","time: 2006-05-18 18:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 19:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 20:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 21:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 22:00:00<br />value:  0.000000000<br />Approach: base","time: 2006-05-18 23:00:00<br />value:  0.000000000<br />Approach: base"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"base","legendgroup":"base","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0,0,0,0,0,0.011,0.156,0.27,0.432,0.57,0.634,0.672,0.662,0.55,0.45,0.332,0.152,0.02,0,0,0,0,0,0,0,0,0,0,0,0.006,0.159,0.354,0.493,0.591,0.67,0.688,0.66,0.596,0.49,0.373,0.188,0.018,0,0,0,0,0,0],"text":["time: 2006-05-17 00:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 01:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 02:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 03:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 04:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 05:00:00<br />value:  0.011000000<br />Approach: obs","time: 2006-05-17 06:00:00<br />value:  0.156000000<br />Approach: obs","time: 2006-05-17 07:00:00<br />value:  0.270000000<br />Approach: obs","time: 2006-05-17 08:00:00<br />value:  0.432000000<br />Approach: obs","time: 2006-05-17 09:00:00<br />value:  0.570000000<br />Approach: obs","time: 2006-05-17 10:00:00<br />value:  0.634000000<br />Approach: obs","time: 2006-05-17 11:00:00<br />value:  0.672000000<br />Approach: obs","time: 2006-05-17 12:00:00<br />value:  0.662000000<br />Approach: obs","time: 2006-05-17 13:00:00<br />value:  0.550000000<br />Approach: obs","time: 2006-05-17 14:00:00<br />value:  0.450000000<br />Approach: obs","time: 2006-05-17 15:00:00<br />value:  0.332000000<br />Approach: obs","time: 2006-05-17 16:00:00<br />value:  0.152000000<br />Approach: obs","time: 2006-05-17 17:00:00<br />value:  0.020000000<br />Approach: obs","time: 2006-05-17 18:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 19:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 20:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 21:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 22:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-17 23:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 00:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 01:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 02:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 03:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 04:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 05:00:00<br />value:  0.006000000<br />Approach: obs","time: 2006-05-18 06:00:00<br />value:  0.159000000<br />Approach: obs","time: 2006-05-18 07:00:00<br />value:  0.354000000<br />Approach: obs","time: 2006-05-18 08:00:00<br />value:  0.493000000<br />Approach: obs","time: 2006-05-18 09:00:00<br />value:  0.591000000<br />Approach: obs","time: 2006-05-18 10:00:00<br />value:  0.670000000<br />Approach: obs","time: 2006-05-18 11:00:00<br />value:  0.688000000<br />Approach: obs","time: 2006-05-18 12:00:00<br />value:  0.660000000<br />Approach: obs","time: 2006-05-18 13:00:00<br />value:  0.596000000<br />Approach: obs","time: 2006-05-18 14:00:00<br />value:  0.490000000<br />Approach: obs","time: 2006-05-18 15:00:00<br />value:  0.373000000<br />Approach: obs","time: 2006-05-18 16:00:00<br />value:  0.188000000<br />Approach: obs","time: 2006-05-18 17:00:00<br />value:  0.018000000<br />Approach: obs","time: 2006-05-18 18:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 19:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 20:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 21:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 22:00:00<br />value:  0.000000000<br />Approach: obs","time: 2006-05-18 23:00:00<br />value:  0.000000000<br />Approach: obs"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(183,159,0,1)","dash":"solid"},"hoveron":"points","name":"obs","legendgroup":"obs","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[-0.0153679955906507,-0.0146354495402865,-0.0137501124966259,-0.0126015501889459,-0.0212619496340709,0.00656288185128649,0.14333553953638,0.314981490935801,0.459713957899756,0.561308293506228,0.629118443311721,0.639965011413553,0.639011185860879,0.580061795871637,0.491835353116936,0.334688348695124,0.166357617729516,0.0160554173484906,-0.00879529769765974,-0.00994886935124817,-0.0104799393471798,-0.010810671118832,-0.0110151302131251,-0.0112661553895705,-0.0164734653849242,-0.0157633206429153,-0.0149419310850275,-0.0135506273479709,-0.0210732402236071,0.00272089299333134,0.138652688101988,0.318279416349465,0.458317466692196,0.565669304118973,0.63439751112147,0.650870657116735,0.652968225600893,0.585544481230991,0.483613792188802,0.333496794685918,0.163627957555079,0.0163995043144813,-0.00981813970060003,-0.0109554602322109,-0.0115488843229218,-0.0118584483255747,-0.0120685413966519,-0.0123197480565617],"text":["time: 2006-05-17 00:00:00<br />value: -0.015367996<br />Approach: oct-free","time: 2006-05-17 01:00:00<br />value: -0.014635450<br />Approach: oct-free","time: 2006-05-17 02:00:00<br />value: -0.013750112<br />Approach: oct-free","time: 2006-05-17 03:00:00<br />value: -0.012601550<br />Approach: oct-free","time: 2006-05-17 04:00:00<br />value: -0.021261950<br />Approach: oct-free","time: 2006-05-17 05:00:00<br />value:  0.006562882<br />Approach: oct-free","time: 2006-05-17 06:00:00<br />value:  0.143335540<br />Approach: oct-free","time: 2006-05-17 07:00:00<br />value:  0.314981491<br />Approach: oct-free","time: 2006-05-17 08:00:00<br />value:  0.459713958<br />Approach: oct-free","time: 2006-05-17 09:00:00<br />value:  0.561308294<br />Approach: oct-free","time: 2006-05-17 10:00:00<br />value:  0.629118443<br />Approach: oct-free","time: 2006-05-17 11:00:00<br />value:  0.639965011<br />Approach: oct-free","time: 2006-05-17 12:00:00<br />value:  0.639011186<br />Approach: oct-free","time: 2006-05-17 13:00:00<br />value:  0.580061796<br />Approach: oct-free","time: 2006-05-17 14:00:00<br />value:  0.491835353<br />Approach: oct-free","time: 2006-05-17 15:00:00<br />value:  0.334688349<br />Approach: oct-free","time: 2006-05-17 16:00:00<br />value:  0.166357618<br />Approach: oct-free","time: 2006-05-17 17:00:00<br />value:  0.016055417<br />Approach: oct-free","time: 2006-05-17 18:00:00<br />value: -0.008795298<br />Approach: oct-free","time: 2006-05-17 19:00:00<br />value: -0.009948869<br />Approach: oct-free","time: 2006-05-17 20:00:00<br />value: -0.010479939<br />Approach: oct-free","time: 2006-05-17 21:00:00<br />value: -0.010810671<br />Approach: oct-free","time: 2006-05-17 22:00:00<br />value: -0.011015130<br />Approach: oct-free","time: 2006-05-17 23:00:00<br />value: -0.011266155<br />Approach: oct-free","time: 2006-05-18 00:00:00<br />value: -0.016473465<br />Approach: oct-free","time: 2006-05-18 01:00:00<br />value: -0.015763321<br />Approach: oct-free","time: 2006-05-18 02:00:00<br />value: -0.014941931<br />Approach: oct-free","time: 2006-05-18 03:00:00<br />value: -0.013550627<br />Approach: oct-free","time: 2006-05-18 04:00:00<br />value: -0.021073240<br />Approach: oct-free","time: 2006-05-18 05:00:00<br />value:  0.002720893<br />Approach: oct-free","time: 2006-05-18 06:00:00<br />value:  0.138652688<br />Approach: oct-free","time: 2006-05-18 07:00:00<br />value:  0.318279416<br />Approach: oct-free","time: 2006-05-18 08:00:00<br />value:  0.458317467<br />Approach: oct-free","time: 2006-05-18 09:00:00<br />value:  0.565669304<br />Approach: oct-free","time: 2006-05-18 10:00:00<br />value:  0.634397511<br />Approach: oct-free","time: 2006-05-18 11:00:00<br />value:  0.650870657<br />Approach: oct-free","time: 2006-05-18 12:00:00<br />value:  0.652968226<br />Approach: oct-free","time: 2006-05-18 13:00:00<br />value:  0.585544481<br />Approach: oct-free","time: 2006-05-18 14:00:00<br />value:  0.483613792<br />Approach: oct-free","time: 2006-05-18 15:00:00<br />value:  0.333496795<br />Approach: oct-free","time: 2006-05-18 16:00:00<br />value:  0.163627958<br />Approach: oct-free","time: 2006-05-18 17:00:00<br />value:  0.016399504<br />Approach: oct-free","time: 2006-05-18 18:00:00<br />value: -0.009818140<br />Approach: oct-free","time: 2006-05-18 19:00:00<br />value: -0.010955460<br />Approach: oct-free","time: 2006-05-18 20:00:00<br />value: -0.011548884<br />Approach: oct-free","time: 2006-05-18 21:00:00<br />value: -0.011858448<br />Approach: oct-free","time: 2006-05-18 22:00:00<br />value: -0.012068541<br />Approach: oct-free","time: 2006-05-18 23:00:00<br />value: -0.012319748<br />Approach: oct-free"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,186,56,1)","dash":"solid"},"hoveron":"points","name":"oct-free","legendgroup":"oct-free","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[-0.0194822038490015,-0.0187496577986373,-0.0183415748894243,-0.0183824556899284,-0.0184006093048273,0.0094242221805301,0.163039046830978,0.334684998230399,0.492642252407691,0.587856082350967,0.646751079173736,0.657597647275568,0.645808059889496,0.586858669900254,0.499627388938635,0.345556667647249,0.162271966664091,0.0119697662830654,-0.00807462201649822,-0.00922819367008664,-0.00977364946392805,-0.00960814318493487,-0.00958277472285592,-0.00983379989930131,-0.021694014541092,-0.0209838697990831,-0.0205937663930616,-0.020649078379425,-0.0206788157196371,0.00311531749730136,0.154826664316335,0.334453392563811,0.489711940289918,0.594908208521699,0.662449103030773,0.678922249026037,0.668726613508147,0.601302869138245,0.488022099855613,0.339051179089247,0.157559779800724,0.0103313265601261,-0.00997095243644423,-0.0111082729680551,-0.0116540771494792,-0.0114888511155392,-0.0114637081427229,-0.0117149148026327],"text":["time: 2006-05-17 00:00:00<br />value: -0.019482204<br />Approach: oct-red","time: 2006-05-17 01:00:00<br />value: -0.018749658<br />Approach: oct-red","time: 2006-05-17 02:00:00<br />value: -0.018341575<br />Approach: oct-red","time: 2006-05-17 03:00:00<br />value: -0.018382456<br />Approach: oct-red","time: 2006-05-17 04:00:00<br />value: -0.018400609<br />Approach: oct-red","time: 2006-05-17 05:00:00<br />value:  0.009424222<br />Approach: oct-red","time: 2006-05-17 06:00:00<br />value:  0.163039047<br />Approach: oct-red","time: 2006-05-17 07:00:00<br />value:  0.334684998<br />Approach: oct-red","time: 2006-05-17 08:00:00<br />value:  0.492642252<br />Approach: oct-red","time: 2006-05-17 09:00:00<br />value:  0.587856082<br />Approach: oct-red","time: 2006-05-17 10:00:00<br />value:  0.646751079<br />Approach: oct-red","time: 2006-05-17 11:00:00<br />value:  0.657597647<br />Approach: oct-red","time: 2006-05-17 12:00:00<br />value:  0.645808060<br />Approach: oct-red","time: 2006-05-17 13:00:00<br />value:  0.586858670<br />Approach: oct-red","time: 2006-05-17 14:00:00<br />value:  0.499627389<br />Approach: oct-red","time: 2006-05-17 15:00:00<br />value:  0.345556668<br />Approach: oct-red","time: 2006-05-17 16:00:00<br />value:  0.162271967<br />Approach: oct-red","time: 2006-05-17 17:00:00<br />value:  0.011969766<br />Approach: oct-red","time: 2006-05-17 18:00:00<br />value: -0.008074622<br />Approach: oct-red","time: 2006-05-17 19:00:00<br />value: -0.009228194<br />Approach: oct-red","time: 2006-05-17 20:00:00<br />value: -0.009773649<br />Approach: oct-red","time: 2006-05-17 21:00:00<br />value: -0.009608143<br />Approach: oct-red","time: 2006-05-17 22:00:00<br />value: -0.009582775<br />Approach: oct-red","time: 2006-05-17 23:00:00<br />value: -0.009833800<br />Approach: oct-red","time: 2006-05-18 00:00:00<br />value: -0.021694015<br />Approach: oct-red","time: 2006-05-18 01:00:00<br />value: -0.020983870<br />Approach: oct-red","time: 2006-05-18 02:00:00<br />value: -0.020593766<br />Approach: oct-red","time: 2006-05-18 03:00:00<br />value: -0.020649078<br />Approach: oct-red","time: 2006-05-18 04:00:00<br />value: -0.020678816<br />Approach: oct-red","time: 2006-05-18 05:00:00<br />value:  0.003115317<br />Approach: oct-red","time: 2006-05-18 06:00:00<br />value:  0.154826664<br />Approach: oct-red","time: 2006-05-18 07:00:00<br />value:  0.334453393<br />Approach: oct-red","time: 2006-05-18 08:00:00<br />value:  0.489711940<br />Approach: oct-red","time: 2006-05-18 09:00:00<br />value:  0.594908209<br />Approach: oct-red","time: 2006-05-18 10:00:00<br />value:  0.662449103<br />Approach: oct-red","time: 2006-05-18 11:00:00<br />value:  0.678922249<br />Approach: oct-red","time: 2006-05-18 12:00:00<br />value:  0.668726614<br />Approach: oct-red","time: 2006-05-18 13:00:00<br />value:  0.601302869<br />Approach: oct-red","time: 2006-05-18 14:00:00<br />value:  0.488022100<br />Approach: oct-red","time: 2006-05-18 15:00:00<br />value:  0.339051179<br />Approach: oct-red","time: 2006-05-18 16:00:00<br />value:  0.157559780<br />Approach: oct-red","time: 2006-05-18 17:00:00<br />value:  0.010331327<br />Approach: oct-red","time: 2006-05-18 18:00:00<br />value: -0.009970952<br />Approach: oct-red","time: 2006-05-18 19:00:00<br />value: -0.011108273<br />Approach: oct-red","time: 2006-05-18 20:00:00<br />value: -0.011654077<br />Approach: oct-red","time: 2006-05-18 21:00:00<br />value: -0.011488851<br />Approach: oct-red","time: 2006-05-18 22:00:00<br />value: -0.011463708<br />Approach: oct-red","time: 2006-05-18 23:00:00<br />value: -0.011714915<br />Approach: oct-red"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,191,196,1)","dash":"solid"},"hoveron":"points","name":"oct-red","legendgroup":"oct-red","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0,0,0,0,0,0.0094242221805301,0.163039046830978,0.334684998230399,0.492642252407691,0.587856082350967,0.646751079173736,0.657597647275568,0.645808059889496,0.586858669900254,0.499627388938635,0.345556667647249,0.162271966664091,0.0119697662830654,0,0,0,0,0,0,0,0,0,0,0,0.00311531749730136,0.154826664316335,0.334453392563811,0.489711940289918,0.594908208521699,0.662449103030773,0.678922249026037,0.668726613508147,0.601302869138245,0.488022099855613,0.339051179089247,0.157559779800724,0.0103313265601261,0,0,0,0,0,0],"text":["time: 2006-05-17 00:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-17 01:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-17 02:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-17 03:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-17 04:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-17 05:00:00<br />value:  0.009424222<br />Approach: oct-red-sntz","time: 2006-05-17 06:00:00<br />value:  0.163039047<br />Approach: oct-red-sntz","time: 2006-05-17 07:00:00<br />value:  0.334684998<br />Approach: oct-red-sntz","time: 2006-05-17 08:00:00<br />value:  0.492642252<br />Approach: oct-red-sntz","time: 2006-05-17 09:00:00<br />value:  0.587856082<br />Approach: oct-red-sntz","time: 2006-05-17 10:00:00<br />value:  0.646751079<br />Approach: oct-red-sntz","time: 2006-05-17 11:00:00<br />value:  0.657597647<br />Approach: oct-red-sntz","time: 2006-05-17 12:00:00<br />value:  0.645808060<br />Approach: oct-red-sntz","time: 2006-05-17 13:00:00<br />value:  0.586858670<br />Approach: oct-red-sntz","time: 2006-05-17 14:00:00<br />value:  0.499627389<br />Approach: oct-red-sntz","time: 2006-05-17 15:00:00<br />value:  0.345556668<br />Approach: oct-red-sntz","time: 2006-05-17 16:00:00<br />value:  0.162271967<br />Approach: oct-red-sntz","time: 2006-05-17 17:00:00<br />value:  0.011969766<br />Approach: oct-red-sntz","time: 2006-05-17 18:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-17 19:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-17 20:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-17 21:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-17 22:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-17 23:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-18 00:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-18 01:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-18 02:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-18 03:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-18 04:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-18 05:00:00<br />value:  0.003115317<br />Approach: oct-red-sntz","time: 2006-05-18 06:00:00<br />value:  0.154826664<br />Approach: oct-red-sntz","time: 2006-05-18 07:00:00<br />value:  0.334453393<br />Approach: oct-red-sntz","time: 2006-05-18 08:00:00<br />value:  0.489711940<br />Approach: oct-red-sntz","time: 2006-05-18 09:00:00<br />value:  0.594908209<br />Approach: oct-red-sntz","time: 2006-05-18 10:00:00<br />value:  0.662449103<br />Approach: oct-red-sntz","time: 2006-05-18 11:00:00<br />value:  0.678922249<br />Approach: oct-red-sntz","time: 2006-05-18 12:00:00<br />value:  0.668726614<br />Approach: oct-red-sntz","time: 2006-05-18 13:00:00<br />value:  0.601302869<br />Approach: oct-red-sntz","time: 2006-05-18 14:00:00<br />value:  0.488022100<br />Approach: oct-red-sntz","time: 2006-05-18 15:00:00<br />value:  0.339051179<br />Approach: oct-red-sntz","time: 2006-05-18 16:00:00<br />value:  0.157559780<br />Approach: oct-red-sntz","time: 2006-05-18 17:00:00<br />value:  0.010331327<br />Approach: oct-red-sntz","time: 2006-05-18 18:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-18 19:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-18 20:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-18 21:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-18 22:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz","time: 2006-05-18 23:00:00<br />value:  0.000000000<br />Approach: oct-red-sntz"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(97,156,255,1)","dash":"solid"},"hoveron":"points","name":"oct-red-sntz","legendgroup":"oct-red-sntz","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1147824000,1147827600,1147831200,1147834800,1147838400,1147842000,1147845600,1147849200,1147852800,1147856400,1147860000,1147863600,1147867200,1147870800,1147874400,1147878000,1147881600,1147885200,1147888800,1147892400,1147896000,1147899600,1147903200,1147906800,1147910400,1147914000,1147917600,1147921200,1147924800,1147928400,1147932000,1147935600,1147939200,1147942800,1147946400,1147950000,1147953600,1147957200,1147960800,1147964400,1147968000,1147971600,1147975200,1147978800,1147982400,1147986000,1147989600,1147993200],"y":[0,0,0,0,0,0.00656288185128649,0.14333553953638,0.314981490935801,0.459713957899756,0.561308293506228,0.629118443311721,0.639965011413553,0.639011185860879,0.580061795871637,0.491835353116936,0.334688348695124,0.166357617729516,0.0160554173484906,0,0,0,0,0,0,0,0,0,0,0,0.00272089299333134,0.138652688101988,0.318279416349465,0.458317466692196,0.565669304118973,0.63439751112147,0.650870657116735,0.652968225600893,0.585544481230991,0.483613792188802,0.333496794685918,0.163627957555079,0.0163995043144813,0,0,0,0,0,0],"text":["time: 2006-05-17 00:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 01:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 02:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 03:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 04:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 05:00:00<br />value:  0.006562882<br />Approach: oct-sntz","time: 2006-05-17 06:00:00<br />value:  0.143335540<br />Approach: oct-sntz","time: 2006-05-17 07:00:00<br />value:  0.314981491<br />Approach: oct-sntz","time: 2006-05-17 08:00:00<br />value:  0.459713958<br />Approach: oct-sntz","time: 2006-05-17 09:00:00<br />value:  0.561308294<br />Approach: oct-sntz","time: 2006-05-17 10:00:00<br />value:  0.629118443<br />Approach: oct-sntz","time: 2006-05-17 11:00:00<br />value:  0.639965011<br />Approach: oct-sntz","time: 2006-05-17 12:00:00<br />value:  0.639011186<br />Approach: oct-sntz","time: 2006-05-17 13:00:00<br />value:  0.580061796<br />Approach: oct-sntz","time: 2006-05-17 14:00:00<br />value:  0.491835353<br />Approach: oct-sntz","time: 2006-05-17 15:00:00<br />value:  0.334688349<br />Approach: oct-sntz","time: 2006-05-17 16:00:00<br />value:  0.166357618<br />Approach: oct-sntz","time: 2006-05-17 17:00:00<br />value:  0.016055417<br />Approach: oct-sntz","time: 2006-05-17 18:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 19:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 20:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 21:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 22:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-17 23:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 00:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 01:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 02:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 03:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 04:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 05:00:00<br />value:  0.002720893<br />Approach: oct-sntz","time: 2006-05-18 06:00:00<br />value:  0.138652688<br />Approach: oct-sntz","time: 2006-05-18 07:00:00<br />value:  0.318279416<br />Approach: oct-sntz","time: 2006-05-18 08:00:00<br />value:  0.458317467<br />Approach: oct-sntz","time: 2006-05-18 09:00:00<br />value:  0.565669304<br />Approach: oct-sntz","time: 2006-05-18 10:00:00<br />value:  0.634397511<br />Approach: oct-sntz","time: 2006-05-18 11:00:00<br />value:  0.650870657<br />Approach: oct-sntz","time: 2006-05-18 12:00:00<br />value:  0.652968226<br />Approach: oct-sntz","time: 2006-05-18 13:00:00<br />value:  0.585544481<br />Approach: oct-sntz","time: 2006-05-18 14:00:00<br />value:  0.483613792<br />Approach: oct-sntz","time: 2006-05-18 15:00:00<br />value:  0.333496795<br />Approach: oct-sntz","time: 2006-05-18 16:00:00<br />value:  0.163627958<br />Approach: oct-sntz","time: 2006-05-18 17:00:00<br />value:  0.016399504<br />Approach: oct-sntz","time: 2006-05-18 18:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 19:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 20:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 21:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 22:00:00<br />value:  0.000000000<br />Approach: oct-sntz","time: 2006-05-18 23:00:00<br />value:  0.000000000<br />Approach: oct-sntz"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(245,100,227,1)","dash":"solid"},"hoveron":"points","name":"oct-sntz","legendgroup":"oct-sntz","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":25.5707762557078,"l":28.4931506849315},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1147815540,1148001660],"tickmode":"array","ticktext":["12:00 AM<br />17/05","06:00 AM<br />17/05","12:00 PM<br />17/05","06:00 PM<br />17/05","12:00 AM<br />18/05","06:00 AM<br />18/05","12:00 PM<br />18/05","06:00 PM<br />18/05","12:00 AM<br />19/05"],"tickvals":[1147824000,1147845600,1147867200,1147888800,1147910400,1147932000,1147953600,1147975200,1147996800],"categoryorder":"array","categoryarray":["12:00 AM<br />17/05","06:00 AM<br />17/05","12:00 PM<br />17/05","06:00 PM<br />17/05","12:00 AM<br />18/05","06:00 AM<br />18/05","12:00 PM<br />18/05","06:00 PM<br />18/05","12:00 AM<br />19/05"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.0581287152681466,0.743434700727055],"tickmode":"array","ticktext":["0.0","0.2","0.4","0.6"],"tickvals":[0,0.2,0.4,0.6],"categoryorder":"array","categoryarray":["0.0","0.2","0.4","0.6"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"Approach","font":{"color":null,"family":null,"size":0}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"c13313b84f7":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"c13313b84f7","visdat":{"c13313b84f7":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell" data-hash="lab_session_cache/html/score_red_650ec592927eef7884dd20d023d5e72a">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a>score_ct_red <span class="ot">&lt;-</span> data_ct_red <span class="sc">|&gt;</span></span>
<span id="cb38-2"><a href="#cb38-2"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span><span class="fu">c</span>(time, obs), <span class="at">names_to =</span> <span class="st">"Approach"</span>) <span class="sc">|&gt;</span></span>
<span id="cb38-3"><a href="#cb38-3"></a>  <span class="fu">group_by</span>(Approach) <span class="sc">|&gt;</span></span>
<span id="cb38-4"><a href="#cb38-4"></a>  <span class="fu">summarise</span>(<span class="at">RMSE =</span> <span class="fu">sqrt</span>(<span class="fu">mean</span>((value<span class="sc">-</span>obs)<span class="sc">^</span><span class="dv">2</span>)))</span>
<span id="cb38-5"><a href="#cb38-5"></a>score_ct_red</span>
<span id="cb38-6"><a href="#cb38-6"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb38-7"><a href="#cb38-7"></a><span class="co">#&gt;   Approach       RMSE</span></span>
<span id="cb38-8"><a href="#cb38-8"></a><span class="co">#&gt;   &lt;chr&gt;         &lt;dbl&gt;</span></span>
<span id="cb38-9"><a href="#cb38-9"></a><span class="co">#&gt; 1 base         0.0226</span></span>
<span id="cb38-10"><a href="#cb38-10"></a><span class="co">#&gt; 2 oct-free     0.0205</span></span>
<span id="cb38-11"><a href="#cb38-11"></a><span class="co">#&gt; 3 oct-red      0.0210</span></span>
<span id="cb38-12"><a href="#cb38-12"></a><span class="co">#&gt; 4 oct-red-sntz 0.0182</span></span>
<span id="cb38-13"><a href="#cb38-13"></a><span class="co">#&gt; 5 oct-sntz     0.0183</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="references" class="level2"><h2 class="anchored" data-anchor-id="references">References</h2>
<p>3TIER, 2010. Development of regional wind resource and wind plant output datasets: final subcontract report. In: Electricity generation, Energy storage, Forecasting wind, Solar energy, Wind energy, Wind farms, Wind modeling. <a href="https://digitalscholarship.unlv.edu/renew_pubs/4" class="uri">https://digitalscholarship.unlv.edu/renew_pubs/4</a></p>
<p>Di Fonzo, T., Girolimetto, D., 2023. Spatio-temporal reconciliation of solar forecasts. Solar Energy 251, 13–29. <a href="https://doi.org/10.1016/j.solener.2023.01.003" class="uri">https://doi.org/10.1016/j.solener.2023.01.003</a></p>
<p>Hyndman, R.J., Athanasopoulos, G., Bergmeir, C., Caceres, G., Chhay, L., O’Hara-Wild, M., Petropoulos, F., Razbash, S., Wang, E., Yasmeen, F., 2021. Package forecast: Forecasting functions for time series and linear models. Version 8.15. URL: <a href="https://pkg.robjhyndman.com/forecast/" class="uri">https://pkg.robjhyndman.com/forecast/</a></p>
<p>Stellato, B., Banjac, Goran, P., Bemporad, A., Boyd, S., 2020. OSQP: an operator splitting solver for quadratic programs. Math. Program. Comput. 12 (4), 637–672. <a href="http://dx.doi.org/10.1007/s12532-020-00179-2" class="uri">http://dx.doi.org/10.1007/s12532-020-00179-2</a></p>
<p>Yang, D., Quan, H., Disfani, V.R., Liu, L., 2017a. Reconciling solar forecasts: Geographical hierarchy. Solar Energy 146, 276–286. <a href="http://dx.doi.org/10.1016/j.solener.2017.02.010" class="uri">http://dx.doi.org/10.1016/j.solener.2017.02.010</a></p>
</section></main><!-- /main column --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>